{"version":3,"sources":["webpack:///webpack/bootstrap 6a28c9c22f445455406b","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/packer/cubX/core/Math2D.js","webpack:///./src/api/components/LightDispatcher.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/packer/cubX/core/Region.js","webpack:///./src/api/App.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/packer/cubX/core/Components.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/utils/cik/Tween.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/view/CargoView.js","webpack:///./src/api/UX.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/debug/RuntimeTester.js","webpack:///./src/api/Resources.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/cubX/CUBDebug.js","webpack:///./src/api/packer/cubX/heuristics/Heuristic.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/view/EntryInputView.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/view/components/TextLabelView.js","webpack:///./src/api/Constants.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/packer/cubX/core/RegionsTree.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/packer/cubX/core/PackedComponents.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/dom/DomUI.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/api/components/PackerInterface.js","webpack:///./src/dev.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/min-dependencies/lib/keypress.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/min-dependencies/lib/three/controls/OrbitControls.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/components/assets/ColorTemplate.js","webpack:///./src/api/utils/cik/transitions/Transition.js","webpack:///./src/api/components/Visualization.js","webpack:///./src/api/components/User.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/view/components/FloatingShelf.js","webpack:///./src/api/view/components/Outline.js","webpack:///./src/min-dependencies/lib/three/controls/TransformControls.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/packer/cubX/CUB.js","webpack:///./src/api/packer/afit/AFitTest.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/cubX/heuristics/HeuRegular.js","webpack:///./src/api/packer/cubX/heuristics/HeuParametric1.js","webpack:///./src/api/view/View.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/view/components/Musipack.js","webpack:///./src/api/view/OrthoviewsNavigator.js","webpack:///./src/api/utils/cik/NaNRecovery.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","typeofObject","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","keys","forEach","key","AssignUndefined","undefined","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","Signaler","signals","dispatches","event","args","On","push","eventCallbacks","once","splice","indexOf","callbacks","index","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","SolidMaterialType","MeshStandardMaterial","TransparentMaterialType","InvisibleMaterialType","MeshBasicMaterial","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","castShadow","receiveShadow","colorTemplates","Map","signaler","resourcesSet","_resources","Symbol","Asset","url","material","mapName","Promise","resolve","reject","OnIncludingPrior","texture","Texture","TextureLoader","load","resources","texturesPath","roughness","metalness","geometry","mesh","Mesh","modified","setHex","getHex","reduce","clamp","opacity","transparent","texturePath","CastReceiveShadow","traverse","child","colors","template","ColorTemplate","Dispatch","CreateColorTemplate","numEntries","getDefaultLabel","epsilon","pow","numberType","BoxEntry","dimensions","Dimensions","weight","quantity","properties","stacking","StackingProperty","rotation","RotationConstraint","translation","TranslationConstraint","descriptions","TextField","Reset","defaultContent","clear","entry","Copy","field","own","Clone","Assert","CargoEntry","_weight","uid","generateUUID","has","delete","combinedVolume","ContainingVolume","Container","volumes","WarnOnce","volume","numVolumes","minX","Number","MAX_SAFE_INTEGER","minY","minZ","maxX","MIN_SAFE_INTEGER","maxY","maxZ","combinedWeightCapacity","pos","position","dim","width","height","weightCapacity","container","Set","containingVolume","FromJSON","Add","smallValue","smallValueSqrt","segmentIntersect","x1","y1","x2","y2","x3","y3","x4","y4","denominator","abs","ua","ub","linesIntersect","ax","ay","bx","by","cx","cy","dx","dy","a1","b1","c1","a2","b2","c2","determinant","rectangleContainsPoint","offset","rx","ry","rw","rh","px","py","h","rectangleContainsRectangle","ox","oy","ow","oh","rectanglesFromPoints","points","toInt","round","xs","xCat","floor","point","ys","yCat","insert","iY","sortYCat","xsKeys","iX","sort","intersectedXs","xCat1","ys1","iX2","xCat2","ys2","yIntersect","xIntersect","iY1","iY2","rectangles","iIX","intersectedX","p1","p2","p3","p4","rectangle","reduceRectangles","iRect","ra","aw","ah","jRect","rb","bw","bh","max","segmentContainsPoint","vx","vy","vxa","vya","vxb","vyb","db","_signals","_dispatches","LightDispatcher","serializeModes","none","property","min","createKeyInfo","isFolderGrouped","propertyPath","split","slice","join","shift","owner","getKey","setKey","val","endKey","download","filename","file","Blob","navigator","msSaveOrOpenBlob","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Shortcut","Config","shortcutsGUI","shortcuts","instances","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","saveValue","isColor","parseInt","toJSON","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","addColor","call","scope","editor","Save","Debug","Serialize","defaultsFolder","serializeMode","unrolled","subProperties","subProperty","category","shortcut","setRectangleWeights","rect","stackingCapacity","Array","maxWeightValue","Region","preferredX","SetWeights","region","l","tempCorners","tempPoints","pz","subRegion","rz","rl","other","grounded","tempRegion","fit","weightFit","minRegionAxis","newRegions","axis","size","east","west","over","south","ptsA","GetFloorPoints","ptsB","tempPoints2","adjacent","intersections","iA","nextA","az","nax","naz","iB","nextB","bz","nbx","nbz","intersection","rectA","rectB","format","nf","n","numberFormat","start","App","containerDiv","ux","cargoInput","packingSpaceInput","packerInterface","packerParams","packer","Packer","CargoInput","boxEntry","cargoList","modify","Modify","SolveAgain","remove","Remove","PackingSpaceInput","containerLoaded","packingSpace","AddContainer","PackerInterface","solveRequest","solverParams","Solve","domUI","DomUI","sceneSetup","SceneSetup","Init","then","Start","bind","viewParams","view","View","_Bind","resetColor","show","existingEntry","GetEntry","previewColorBackup","Description","hud","Preview","hideEntryPreview","hide","onPackUpdate","packingResult","_Notify","solved","packUpdate","onPackFailed","error","failed","packFailed","autoUpdatePack","solveAgain","ClearPackingResults","CUB","typeofHeuristicParams","heuristics","HeuParametric1","Params","extractHeuristicParams","cubParams","heuristicParams","scoringWeight","score_minLength","score_minWastedSpace","scoring","minWaste","PackedCargo","orientation","UnpackedCargo","unpackedQuantity","PackingResult","numTotalItems","runtime","packed","unpacked","defaultParams","_solverParams","PackingSpace","CargoList","solverExecutionsCount","algorithm","algorithmParams","SolveCUB","ready","Item","current","items","entries","groups","values","group","validOrientations","enabled","allowedOrientations","capacity","defaultStackingFactor","item","startTime","performance","heuristic","pack","cubRuntime","cubRuntime2Dec","packedItems","packedItem","ref","Vector3","packedWidth","packedHeight","packedLength","ResolveOrientation","packedCargo","unpackedItems","unpackedItem","unpackedCargo","_weightCapacity","SetUID","Volume","typeofNumber","_maxHeight","_validOrientations","orientations","xyz","zyx","yxz","yzx","zxy","xzy","q","vo","toLowerCase","maxHeight","GetOrientedDimensions","minDimensions","iItem","numItems","iOrient","init","started","paused","stopped","quality","Quality","Common","units","controllerParams","sceneController","rendererParams","clearColor","backgroundColor","sceneRenderer","Renderer","renderer","toneMappingExposure","cameraParams","fov","aspect","near","far","cameraController","Camera","OrbitControls","Input","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hudParams","hudCameraParams","HUDView","hudCameraRef","AdjustCamera","autoClear","setupParams","gridHelper","SetTarget","GridHelper","AddDefault","configure","Configure","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","helpers","ambientLight","AmbientLight","directionalLight","DirectionalLight","ambientContainer","directionalLightComplem","onGUIChanged","dl","shadow","updateProjectionMatrix","UpdateShadowMaps","map","mapSize","manhattanDistanceTo","copy","dispose","dlHelper","update","dlCameraHelper","Smart","Control3D","smart","MakeShortcut","lightController","shadowControllers","shadowCameraControllers","Unroll","DirectionalLightHelper","CameraHelper","global","clone","appControl3D","control","hudControl3D","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","config","VecToString","rotationProperties","rotationControllers","Multiple","tempCoords","ownCoords","center","tempVec3","tempVec3_b","change","userChange","PerspectiveCamera","name","changed","dollyAnimation","Tween","Combo","RequestN","functions","ease","easeInOutQuad","lookAt","onDollyAnimationComplete","onComplete","Hook","fovAnimation","onFOVAnimationComplete","fpsControls","Navigation","FirstPerson","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","addEventListener","e","distanceTo","v","subVectors","saveState","reset","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","box3","distanceMultiplier","extent","getSize","frameSize","distance","getCenter","coords","CalcFrameCoords","duration","endCoords","TransitionFromToCoords","startCoords","SetDurations","p","SetStartValues","tp","SetDeltas","Restart","deltaFOV","startValue","delta","TweenCallback","time","TweenCompletedCallback","clock","Clock","poolNewFN","poolResetFN","tween","pool","Pool","linear","easeOutElastic","ts","tc","easeOutQuad","easeOutCubic","special","pingPong","TweenComboCompletedCallback","TweenCombo","tweens","completed","Unhook","Return","startValue0","delta0","startValue1","delta1","startValue2","delta2","tween0","Request","tween1","tween2","combo","getElapsedTime","endValue","_new","_reset","fnNew","fnReset","objects","unitCubeGeometry","BoxBufferGeometry","materialTemplate","flatShading","brightnessRange","hueBase","random","nextColor","setHSL","GoldenSeries","_materialSettings","_color","typeofString","CargoBoxView","colorHex","scale","vec3","labelView","s","SetScale","RestoreMaterial","SetMaterialFocus","focus","CargoView","dummyGeometry","SphereBufferGeometry","dummyMaterial","_entry","_focus","Object3D","tlvParams","font","backColor","fontColor","textAlign","sidePadding","ratioToX","TextLabelView","rotateY","rotateX","UpdateText","cargoView","scaleRefFigure","Constants","man","UX","app","visualization","Visualization","user","User","_selectedEntryUID","labels","tempBox","Box3","tempVec","select","deselect","interact","outlineOffset","CargoListView","templatesView","cargoTemplateViews","fsParams","padding","ColorTemplates","Apply","floatingShelf","FloatingShelf","raycastGroupItems","raycastGroup","RaycastGroup","OnInteract","outline","Outline","offsetFactor","slidingAnimation","originalPosition","onAnimationComplete","templateCargoView","ticketParams","Dummy","UpdateItems","Sort","ReflectEntry","SetOutline","raycastGroupIndex","box","entryUID","GetTemplate","targetY","deltaY","CargoGroup","cargoGroup","textColor","textLabelView","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","cargoes","next","done","setFromObject","applyMatrix4","halfSize","Compare","onFocus","onFocusLost","draggable","Draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","visible","SetCurrent","oldPos","GetPosition","SetPosition","Show","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","_vec3","RuntimeTester","Notify","Abs","Test","tests","TestLog","successes","failures","trial","title","maximumRuns","isNaN","trials","runsCount","testFunction","expectedResult","Trial","BindTo","Execute","success","Succeeded","Failed","succeeded","TrialLog","test","TryInstance","pass","successful","skipped","testValues","testRuns","testSuccessful","Resources","Cargo","currentQuantity","stopPropagation","stylesheet","createCSS","css","getElementsByTagName","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","text","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","parentNode","divTop","divLeft","cursor","stopMoving","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","spaces","world","local","modes","translate","rotate","defaultControls","TransformControls","renderOrder","attach","detach","Detach","space","setMode","stringType","groupAdded","groupRemoved","groupModified","containerAdded","_currentIndex","containers","currentIndex","sleep","debugLog","keypress","debugRegion","debugClear","debugging","ListenKeys","ms","force","execute","tid","clearTimeout","solid","checkered","debugUID","Viz","DrawVolume","Boolean","uids","RemoveObjectByUID","ClearAll","numberFormatDefault","nStr","HeuristicParams","HeuristicResult","containingRegion","packedRegion","_items","_packedContainer","_regionsTree","_workingItem","HeuristicWorkingSet","packedContainer","regionsTree","WeightPass","Validate","Find","FitFunction","NextItem","Error","Heuristic","workingSetType","workingSet","RemoveItem","WorkingSet","Result","UpdateComponent","interval","lastUpdateTime","collectionQuery","updateProperty","recursive","raycastItems","GetRaycastItems","rItem","Cik","raycastItem","raycaster","UpdateRaycastItems","intersects","intersectObjects","raycastItemIndex","BubbleUpForIndex","collection","nestLimit","numCollection","parent","itemsContainer","miscContainer","defaults","Scene","objName","getObjectByName","tempBox3","_scaleFigure","scaleFigure","woman","EntryInputView","preview","previewTypes","offsetX","side","DoubleSide","SetTextureMap","alphaMap","repeat","setX","refMesh","PlaneGeometry","bkgMesh","depthWrite","depthFunc","NeverDepth","transition","Transition","slideIn","Slide","slideOut","onTransitionComplete","transitionController","complete","valid","End","children","boxView","previewing","deltaTime","tlWatchTimer","tlWatchEntries","tlWatchUpdater","newValue","propertyName","savedValue","tl","addTLWatch","setInterval","_value","TextLabel","GetString","textLabel","canvas2d","context2d","getContext","fillStyle","fillRect","textBaseline","fillText","CanvasTexture","minFilter","LinearFilter","anisotropy","image","needsUpdate","OnChange","Label","guiExtensions","blockEvent","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","RegionsTree","root","regions","thisArg","numRegions","iRegion","search","Subtract","regionIndex","debugUIDs","coordID","levels","neighbours","regionA","jRegion","regionB","Intersects","numNeighbours","iNeighbour","neighbourA","jNeighbour","neighbourB","connectedNeighbours","ConnectFloorRects","levelsYCats","iYCat","numYCats","level","regionY","regionHeight","numRects","newRegion","volumeA","volumeB","ContainsRegion","sortFunction","delay","debugGeometry","debugMaterial","wrapS","wrapT","RepeatWrapping","debugBox","DebugBox","alphaHexMask","debugObjects","tVec3","tPos","tScale","DebugViz","wireframe","packingSpaceView","packResultView","cargoViews","o","AFitTest","Box","api","PackedItem","PackedContainer","cumulatedWeight","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","cv","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","ContainerBox","createContainerBoxes","boxes","CreateMesh","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","initializationBox3","StandardSceneObject","containerBoxes","platformMesh","planeGeom","BoxGeometry","planeMaterial","CreateSolidMaterialMatte","ReceiveShadow","object3d","animationDuration","packedCargoView","PackedCargoBoxView","Extend","getOrientationAngles","getOrientationEuler","rad","Euler","packVizStart","packVizEnd","cargoVizCreate","cargoVizPack","cargoVizUnpack","PackResultView","cargoListView","animatingViews","Pizzicato","musipack","matrix","GetMatrix","decompose","packedQuantities","zEntry","numPackedItems","delayPerItem","cargoViewTemplate","packedQuantity","totalQuantity","UpdateLabel","SetRotationAngles","posTweenCombo","onTweenComplete","OnCargoFirstTweenComplete","extraData","unpackedOffset","numUnpackedItems","j","OnTweenComplete","scaleTweenCombo","DisableHighlights","Highlight","numCargoViews","cvEntry","halfHeight","low","high","animatingView","fn","nodeType","textContent","attrMapString","isNodeString","isElementString","isType","isNode","Node","ownerDocument","isElement","isArray","subChild","createTextNode","arguments","settings","childIndex","argumentsLength","attributeMap","attr","Proxy","proxy","defaultFormatParams","orthoViewSelected","orthoviews","home","front","icons","margin","dispatch","icon","right","imageURL","div","onmouseover","backgroundPositionX","onmouseout","preventDefault","_cargoList","boxEntryPool","renewBoxEntry","GetNextColor","entryMirror","IsVolume","commitedEntry","existing","sliderValueChange","sliderValueStop","createContainerView","model","thickness","PlatformVisibility","jsonObject","ResultSpace","ResultEntry","packingSpaces","totalPacked","totalUnpacked","solveDuration","toInterfaceResults","getSpace","containerUID","ps","packEntry","resultEntry","isFirst","defaultSolverParams","FreightPacker","utils","devSetup","domain","fp","toConsole","traceToConsole","SetViewParent","auto","uxParams","cargoInputParams","packingSpaceInputParams","appParams","webgl","Capabilities","IsWebGLReady","canvas","gl","WebGLRenderingContext","defaultKeysListen","concat","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","Raycaster","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keyboard","Listener","on","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","bottom","button","UpdateScreenAndMouse","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","wheelDelta","detail","lerp","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","drid","_repeats","clearInterval","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","_change_keycodes_by_browser","_compare_arrays","_compare_arrays_sorted","_convert_key_to_readable","_convert_to_shifted_key","_decide_meta_key","_factory_defaults","_filter_array","_index_of_in_array","_is_array_in_array","_is_array_in_array_sorted","_key_is_valid","_keycode_alternate_names","_keycode_dictionary","_keycode_shifted_keys","_log_error","_metakey","_modifier_event_mapping","_modifier_keys","_validate_combo","__hasProp","hasOwnProperty","__indexOf","is_unordered","is_counting","is_exclusive","is_solitary","prevent_default","dictionary","count","allows_key_repeat","keyup_fired","attach_handler","jQuery","should_suppress_event_defaults","should_force_event_defaults","sequence_delay","_registered_combos","_keys_down","_active_combos","_sequence","_sequence_timer","_prevent_capture","_defaults","handler","keydown_event","_this","_receive_input","_bug_catcher","keyup_event","blur_event","_i","_len","_ref","_key_up","remove_handler","removeEvent","_ref1","keyCode","_cmd_bug_check","combo_keys","_prevent_default","should_prevent","returnValue","_get_active_combos","active_combos","keys_down","down_key","_match_combo_arrays","match","_fuzzy_match_combo_arrays","_get_potential_combos","potentials","is_sequence","_add_to_active_combos","active_combo","active_key","active_keys","already_replaced","combo_key","should_prepend","should_replace","_j","_k","_len1","unshift","_remove_from_active_combos","_get_possible_sequences","matches","sequence","_ref2","_add_key_to_sequence","sequence_combos","_get_sequence","seq_key","is_keydown","_key_down","_fire","key_event","is_autorepeat","potential_match","match_handler","source_combo","_keys_remain","keys_remain","combos","event_mod","mod","potential","potential_combos","sequence_combo","shifted_key","_handle_combo_down","is_other_exclusive","potential_combo","active_combos_length","unshifted_key","_l","_len2","_ref3","shiftKey","_handle_combo_up","keys_remaining","counting_combo","count_callback","combo_dictionary","register_many","combo_array","_results","keys_or_combo","unregister_many","get_registered_combos","stop_listening","get_meta_key","userAgent","k","array","prev","apply","valid_key","_","alt_name","mod_key","non_modifier_keys","validated","define","exports","testCallback","composer","antialias","shadows","renderSizeMul","OnTestComplete","shadowMapType","PCFSoftShadowMap","shadowsAutoUpdate","WebGLRenderer","shadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","Uncharted2ToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","ResizeDomElement","UseComposer","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","ignoredAreas","minDistance","Infinity","minZoom","maxZoom","minPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panningMode","ScreenSpacePanning","keyPanSpeed","autoRotateSpeed","enableKeys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","dispatchEvent","changeEvent","state","STATE","NONE","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","makeSafe","radius","panOffset","setFromSpherical","zoomChanged","EPS","dot","quaternion","onContextMenu","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","angle","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","HorizontalPanning","crossVectors","pan","deltaX","isPerspectiveCamera","targetDistance","tan","clientHeight","isOrthographicCamera","clientWidth","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","checkIgnoredAreas","rects","ContainsPoint","create","EventDispatcher","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","defaultCamTRS","Transform","cameraTransform","entryInputViewParams","entryInputView","_position","_rotation","transform","_enabled","PackingProperty","prop","Constraint","_allowedOrientations","allowX","allowY","allowZ","allowed","allowWH","allowLH","allowWL","findNearest","dMin","nearest","vz","tempColor","mapColor","Material","TransitionController","from","to","bounds","OnComplete","_controller","boundsView","transformView","_app","PackResults","Slice","visualizationSignals","packResults","highlightPackedInstances","boxEntryInteract","onCargoInteract","cargoEntry","PackingItem","cargo","targetView","cubeGeometry","outlineMaterial","depthTest","boxOutlineMaterial","offsetUnits","outlines","Disable","oChild","outlineReady","boxMaterial","boxMesh","addScalar","applyMatrix","GizmoMaterial","parameters","FrontSide","setValues","oldColor","oldOpacity","highlight","highlighted","setRGB","GizmoLineMaterial","LineBasicMaterial","linewidth","pickerMaterial","TransformGizmo","handles","pickers","planes","planeGeometry","PlaneBufferGeometry","activePlane","setupGizmos","gizmoMap","handleGizmos","pickerGizmos","updateMatrix","tempGeometry","eye","vec1","vec2","lookAtMatrix","setFromRotationMatrix","setFromEuler","TransformGizmoTranslate","arrowGeometry","Geometry","CylinderGeometry","merge","lineXGeometry","BufferGeometry","addAttribute","Float32BufferAttribute","lineYGeometry","lineZGeometry","X","Line","Y","Z","XYZ","OctahedronGeometry","XY","YZ","XZ","CylinderBufferGeometry","setActivePlane","tempMatrix","extractRotation","TransformGizmoRotate","CircleGeometry","facing","arc","vertices","E","XYZE","TorusBufferGeometry","eye2","worldRotation","tempQuaternion","unitX","unitY","unitZ","quaternionX","quaternionY","quaternionZ","makeRotationFromQuaternion","setFromAxisAngle","atan2","multiplyQuaternions","TransformGizmoScale","translationSnap","rotationSnap","_mode","_dragging","_gizmo","gizmoObj","mouseDownEvent","mouseUpEvent","mode","objectChangeEvent","ray","pointerVector","offsetRotation","tempVector","quaternionXYZ","quaternionE","oldPosition","oldScale","oldRotationMatrix","parentRotationMatrix","parentScale","worldPosition","worldRotationMatrix","camPosition","camRotation","onPointerDown","onPointerHover","onPointerMove","onPointerUp","getMode","setTranslationSnap","setRotationSnap","setSpace","setFromMatrixPosition","OrthographicCamera","pointer","changedTouches","intersect","planeIntersect","setFromMatrixScale","multiply","cross","angleTo","TouchEvent","_box3","setFromCenterAndSize","cub","SetItems","SetPackedContainer","SetRegionsTree","fallback","HeuRegular","firstRegion","harsh","itemVolume","regionRemains","Occupy","ProcessRegionsPerPackedItem","containerWidth","containerHeight","ProcessRegionsPreferredX","ProcessRegionsMergeExpand","ProcessRegionsForPackedItems","ProcessRegionsForZeroRegions","ProcessRegionsEnclosed","SortDeepestSmallest","Fit","placement","workingHeuristic","final","nextItem","ProcessRegions","FitUsingHeuristic","unpackItem","packItem","fitWith","Unpack","Pack","toItems","TestData","containerData","ID","Name","Length","Width","Height","itemsData","Quantity","WeightCapacity","StackingCapacity","almost","n1","n2","dim1","dim2","dim3","IsPacked","Dim1","Dim2","Dim3","CoordX","CoordY","CoordZ","PackDimX","PackDimY","PackDimZ","HeuRegularParams","HeuRegularSet","VolumeSort","workingItem","regionFitTest","FitTest","validItem","SetWorkingItem","ScoringParams","HeuParametric1Params","scoreConstructor","sortByN","orientationScoreTable","HeuParametric1Set","GetMinDimensions","minDimensionsNoWasteFactor","regionScoreTable","containerLength","minZScore","minWasteScore","scoreW","scoreH","scoreL","minZWeight","minWasteWeight","score","dummyRegion","RateFit","orientationScore","regionScore","pop","highestScore","transitionDuration","paddingZ","paddingY","orthoviewsNavigator","Navigate","OrthoviewsNavigator","DisplayPackingResult","CreateOrthoViewsIcons","OnOrthoViewSelected","lights","DefaultLights","light","dlData","Load","dlComp","orthoviewsNavParams","onContainerAdded","TransitionToFrame","containerSize","AddRaycastGroup","onCargoListViewChanged","listViewCenterX","getWorldPosition","centerX","onCargoGroupAdded","onCargoGroupRemoved","onCargoGroupModified","UpdateGroup","boundingView","HUDSetup","Clear","viewType","Toggle","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","_wireMaterialSettings","meshMaterial","blending","NormalBlending","wireMesh","LineSegments","tempRange","Range","halfLength","range","frequency","_playing","_iid","Note","wave","Sound","options","play","onNoteComplete","Stop","stop","note","Toner","ranges","divs","divLength","Evaluate","GetNote","Play","RelaseNote","Musipack","toner","Once","OnItemPacked","OnItemUnpacked","EvaluateItem","Coords","tempCamOffset","_cargoListView","_boundingView","_recovery","nanRecovery","NaNRecovery","changeFOV","neededRecovery","AssertUpdateRecover","slideDown","SlideUp","SlideDown","TransitionToFOV","Watch"],"mappings":"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","file":"FreightPacker-dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 54);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6a28c9c22f445455406b","\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\nconst twopi = 2 * Math.PI;\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\nconst goldenRatioConjugate = goldenRatio - 1;\n\nconst typeofObject = 'object';\n\nclass Utils {\n\n    static Redefine(object, constructor){\n        var classProperties = object;\n        var instanceProperties = object.prototype;\n    \n        var def = constructor(instanceProperties);\n    \n        Object.assign(def, classProperties);\n        Object.assign(def.prototype, instanceProperties);\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\n\n        return def;\n    }\n\n    /**\n     * @template T\n     * @param {T} target \n     * @param {Object} source \n     * @returns {T}\n     */\n    static AssignUndefined(target, source){\n        if(typeof target !== typeofObject){\n            target = {};\n            Object.assign(target, source);\n            return target;\n        }\n\n        var keys = Object.keys(source);\n        keys.forEach(key => {\n            if(typeof source[key] === typeofObject) Utils.AssignUndefined(target[key], source[key]);\n            if(target[key] === undefined) target[key] = source[key];\n        });\n        return target;\n    }\n\n    static Snapshot(obj){\n        return JSON.parse(JSON.stringify(obj));\n    }\n\n    static GetRectOffset(element){\n        var style = window.getComputedStyle(element),\n            marginLeft = parseFloat(style.marginLeft),\n            marginTop = parseFloat(style.marginTop),\n            paddingLeft = parseFloat(style.paddingLeft),\n            paddingTop = parseFloat(style.paddingTop);\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\n    }\n\n    static TrimVariable(input){\n        return input.replace(trimVariableRegex, '');\n    }\n\n    static LimitString(str, length){\n        if(str.length > length) str = str.substring(str.length - length);\n        return str;\n    }\n\n    static LoopIndex(i, len){\n        i = i % len;\n        if(i < 0) i = len + i;\n        return i;\n    }\n\n    static FastCircleLoop(divisions, callback){\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\n        var da = twopi / divisions;\n        var a = Math.cos(da);\n        var b = Math.sin(da);\n        var cos = 1;\n        var sin = 0;\n        for( var i = 0; i < divisions; i++ )\n        {\n            var nc = a*cos - b*sin;\n            var ns = b*cos + a*sin;\n            cos = nc;\n            sin = ns;\n            callback(cos, sin);\n        }\n    }\n\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\n        color = color || new THREE.Color();\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\n        return color.set(r, g, b);\n    }\n\n    /**\n     * Returns the next value [0, 1] in the golden series\n     * @param {Number} base \n     */\n    static GoldenSeries(base){\n\t\treturn (base + goldenRatioConjugate) % 1;\n    }\n\n    static VecToString(vector, fixed){\n        fixed = fixed || 8;\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\n    }\n}\n\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\n/** SignalerCallback \n * @callback SignalerCallback\n * @param {Array<*>} args\n */\n\nclass Signaler {\n    constructor(){\n        /** @type {Array<SignalerCallback>} */\n        this.signals = {};\n        /** @type {Array<string>} */\n        this.dispatches = {};\n    }\n\n    /** @param {string} event @param {SignalerCallback} callback */\n    OnIncludingPrior(event, callback){\n        let args = this.dispatches[event];\n        if(args){\n            callback(...args);\n        }\n        else{\n            this.On(event, callback);\n        }\n    }\n\n    /** @param {string} event @param {SignalerCallback} callback */\n    On(event, callback){\n        if(this.signals[event] === undefined){\n            this.signals[event] = [];\n        }\n        this.signals[event].push(callback);\n    }\n\n    /** @param {string} event @param {SignalerCallback} callback */\n    Once(event, callback){\n        if(this.signals[event] === undefined){\n            this.signals[event] = [];\n        }\n        let eventCallbacks = this.signals[event];\n        let once;\n        once = function(...args){\n            eventCallbacks.splice(eventCallbacks.indexOf(once), 1);\n            callback(...args);\n        };\n        eventCallbacks.push(once);\n    }\n\n    /** @param {string} event @param {SignalerCallback} callback */\n    Off(event, callback){\n        let callbacks = this.signals[event];\n        if(callbacks){\n            let index = callbacks.indexOf(callback);\n            if(index != -1){\n                callbacks.splice(index, 1);\n            }\n        }\n    }\n\n    /** @param {string} event @param {Array<*>} [args] */\n    Dispatch(event, ...args){\n        this.dispatches[event] = args;\n        let callbacks = this.signals[event];\n        if(callbacks){\n            for(let i = 0, len = callbacks.length; i < len; i++){\n                callbacks[i](...args);\n            }\n        }\n    }\n\n}\n\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","\n// dat.GUI console mirroring\n// Access with >> dat.list\n\nimport Utils from \"../Utils\";\n\nvar defaultGUIParams = {publish: true, key: ''};\n\nvar dat = {\n    guis: [],\n\n    controllers: {\n        Controller: function(target, key){\n\n            this.label = key;\n\n            var onChangeCallback;\n            this.onChange = function(callback){\n                onChangeCallback = callback;\n            };\n\n            let valueProp = {\n                get: function(){\n                    return target[key];\n                },\n                set: function(value){\n                    target[key] = value;\n                    if(onChangeCallback)\n                        onChangeCallback();\n                }\n            };\n            Object.defineProperty(this, 'value', valueProp);\n\n            Object.defineProperties(this, {\n                list: {\n                    get: (function(){\n                        let isFunction = typeof target[key] === 'function';\n                        if(isFunction){\n                            return function(){\n                                return {\n                                    get: function(){\n                                        target[key]();\n                                        return target[key];\n                                    }\n                                };\n                            };\n                        }\n                        else{\n                            return function(){\n                                return valueProp;\n                            };\n                        }\n                    })()\n                }\n            });\n\n            this.step = function(){return this;};\n            this.listen = function(){return this;};\n            this.updateDisplay = function(){return this;};\n        }\n    },\n\n    GUI: function(params){\n        this.i = 0;\n        this.data = {};\n        this.__controllers = [];\n        this.__folders = [];\n\n        params = Utils.AssignUndefined(params, defaultGUIParams);\n\n        this.label = params.label;\n\n        if(params.publish)\n            dat.guis.push(this);\n\n        this.add = function(target, key){\n            let controller = new dat.controllers.Controller(target, key);\n            this.__controllers.push(controller);\n            let isFunction = typeof target[key] === 'function';\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\n            return controller;\n        };\n\n        this.addFolder = function(label){\n            let folder = new dat.GUI({publish: false, key: label});\n            this.__folders.push(folder);\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\n            return folder;\n        };\n\n        this.open = function(){return this;};\n\n        Object.defineProperties(this, {\n            domElement: {\n                get: function(){\n                    return document.createElement('div');\n                }\n            },\n            list: {\n                get: function(){\n                    let result = {};\n                    let keys = Object.keys(this.data);\n                    let data = this.data;\n                    for(var iKey = 0; iKey < keys.length; iKey++){\n                        let key = keys[iKey];\n                        let listProp = data[key].list;\n                        Object.defineProperty(result, key, listProp.get ? \n                            listProp :\n                            {\n                                get: function(){\n                                    return listProp;\n                                }\n                            }\n                        );\n                    }\n                    return result;\n                }\n            }\n        });\n\n        this.destroy = function(){\n            var index = dat.guis.indexOf(this);\n            if(index !== -1)\n                dat.guis.splice(index, 1);\n        };\n    }\n};\n\nObject.defineProperties(dat, {\n    list: {\n        get: function(){\n            let result = [];\n            for(var i = 0; i < this.guis.length; i++){\n                result[i] = this.guis[i].list;\n            }\n            return result;\n        }\n    }\n});\n\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","import Utils from \"./Utils\";\n\nconst logType = {\n    trace: 0,\n    normal: 1,\n    warn: 2\n};\n\nconst logTypeLabel = {\n    0: 'Trace',\n    1: 'Log',\n    2: 'Warn'\n};\n\nconst defaultPrintFilter = {\n    0: true,\n    1: true,\n    2: true\n};\n\nvar programStartTime = Date.now();\nvar messages = [];\nvar warnOnce = {};\n\nclass Message {\n    constructor(type, ...args){\n        this.type = type;\n        this.timestamp = Date.now();\n        this.content = [];\n        args.forEach(arg => {\n            if(typeof arg === 'string'){\n                this.content.push(arg);\n            }\n            else{\n                try{\n                    var json = JSON.stringify(arg).substr(0, 2000);\n                    this.content.push(json);\n                }\n                catch(err){\n                    this.content.push('  parse error: ' + err);\n                }\n            }\n        });\n    }\n\n    ToString(){\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\n    }\n}\n\nclass Logger {\n\n    static set active(value){\n        this._active = value;\n    }\n\n    static set toConsole(value){\n        this._toConsole = value;\n    }\n\n    static set traceToConsole(value){\n        this._traceToConsole = value;\n    }\n\n    static AddLog(message){\n        messages.push(message);\n    }\n\n    static Trace(...args){\n        if(this._active){\n            var message = new Message(logType.trace, ...args);\n            this.AddLog(message);\n            if(this._toConsole || this._traceToConsole){\n                console.groupCollapsed(...args);\n                console.trace('stack');\n                console.groupEnd();\n            }\n        }\n    }\n\n    static Log(...args){\n        if(this._active){\n            var message = new Message(logType.normal, ...args);\n            this.AddLog(message);\n            if(this._toConsole){\n                console.log(...args);\n            }\n        }\n    }\n\n    static Warn(...args){\n        if(this._active){\n            var message = new Message(logType.warn, ...args);\n            this.AddLog(message);\n            if(this._toConsole) console.warn(...args);\n        }\n    }\n\n    static LogOnce(id, ...args){\n        if(this._active && !warnOnce[id]){\n            warnOnce[id] = true;\n            Logger.Log(...args);\n        }\n    }\n\n    static WarnOnce(id, ...args){\n        if(this._active && !warnOnce[id]){\n            warnOnce[id] = true;\n            Logger.Warn(...args);\n        }\n    }\n\n    static Print(filter){\n        Utils.AssignUndefined(filter, defaultPrintFilter);\n\n        var output = 'Log:\\n';\n        messages.forEach(message => {\n            if(filter[message.type]){\n                output += message.ToString() + '\\n';\n            }\n        });\n\n        return output;\n    }\n}\n\nLogger.active = true;\n\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import ColorTemplate from \"./ColorTemplate\";\nimport Signaler from \"../../utils/cik/Signaler\";\nimport Resources from \"../../Resources\";\n\nconst SolidMaterialType = THREE.MeshStandardMaterial;\nconst TransparentMaterialType = THREE.MeshStandardMaterial;\nconst InvisibleMaterialType = THREE.MeshBasicMaterial;\n\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\nconst defaultMeshMaterial = new SolidMaterialType({color: 0xaaaaaa});\n\nconst objectLoader = new THREE.ObjectLoader();\nconst jsonLoader = new THREE.JSONLoader();\n\nconst castShadow = true;\nconst receiveShadow = true;\n\n/** @type {Map<string, ColorTemplate>} */\nvar colorTemplates = new Map();\n\nvar signaler = new Signaler();\nconst signals = {\n    resourcesSet: 'resourcesSet'\n};\n\nconst _resources = Symbol('resources');\n\nclass Asset {\n    constructor(){\n\n    }\n\n    /** @param {Resources} value */\n    static set resources(value){\n        Asset[_resources] = value;\n        signaler.Dispatch(signals.resourcesSet);\n    }\n\n    static get resources(){ return Asset[_resources]; }\n\n    /**\n     * @param {string} url \n     * @param {THREE.Material} material \n     * @param {string} mapName \n     * @returns {Promise<THREE.Texture>}\n     */\n    static SetTextureMap(url, material, mapName){\n        return new Promise( (resolve, reject) => {\n            signaler.OnIncludingPrior(signals.resourcesSet, () => {\n                let texture = material[mapName];\n                if(texture instanceof THREE.Texture || texture === null){\n                    material[mapName] = new THREE.TextureLoader().load(Asset.resources.texturesPath + url, resolve, undefined, reject);\n                }\n            });\n        });\n    }\n\n    /**\n     * @param {Number} color hex\n     */\n    static CreateSolidMaterialMatte(color){\n        return new Asset.SolidMaterialType({color: color, roughness: 1, metalness: .2});\n    }\n\n    /**\n     * \n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \n     * @param {THREE.Material} [material]\n     */\n    static CreateMesh(geometry, material){\n        geometry = geometry || defaultGeometry;\n        material = material || defaultMeshMaterial;\n\n        var mesh = new THREE.Mesh(geometry, material);\n        return mesh;\n    }\n\n    static RestoreMaterial(material, modified){\n        if(modified === undefined) return;\n\n        let keys = Object.keys(modified);\n        for(let i = 0; i < keys.length; i++){\n            let key = keys[i];\n            if(material[key] !== undefined){\n                if(material[key].setHex){\n                    /** @type {THREE.Color} */\n                    let color = material.color;\n                    color.setHex(modified[key]);\n                }\n                else{\n                    material[key] = modified[key];\n                }\n            }\n        }\n    }\n\n    static SetMaterialFocus(material, value, modified){\n\n        /** @type {THREE.Color} */\n        let color = material.color;\n        if(color !== undefined){\n            if(modified) modified.color = color.getHex();\n\n            let reduce = (value - 1) / 4;\n            color.r = THREE.Math.clamp(color.r - reduce, 0, 1);\n            color.g = THREE.Math.clamp(color.g - reduce, 0, 1);\n            color.b = THREE.Math.clamp(color.b - reduce, 0, 1);\n        }\n\n        /** @type {Number} */\n        let opacity = material.opacity;\n        if(opacity !== undefined){\n            if(modified){\n                modified.opacity = opacity;\n                modified.transparent = material.transparent;\n            }\n\n            material.opacity = THREE.Math.clamp(material.opacity * value, 0, 1);;\n            material.transparent = material.opacity < 1;\n        }\n    }\n\n    /**\n     * @typedef GeometryJSONReturn\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\n     * @property {Array<THREE.Material>} [materials]\n     * \n     * @param {Object} json - Representing Geometry or BufferGeometry json data\n     * @param {string} [texturePath] - optional texture url \n     * @returns {GeometryJSONReturn}\n     */\n    static FromGeometryJSON(json, texturePath){\n        return jsonLoader.parse(json, texturePath);\n    }\n\n    /**\n     * @param {Object} json \n     * @returns {THREE.Object3D}\n     */\n    static FromJSON(json){\n        return objectLoader.parse(json);\n    }\n\n    /** @param {THREE.Object3D} object */\n    static StandardSceneObject(object){\n        Asset.CastReceiveShadow(object);\n    }\n\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\n    static CastReceiveShadow(object, value){\n        object.traverse(function(child){\n            if(child instanceof THREE.Mesh){\n                child.castShadow = value === undefined ? castShadow : value;\n                child.receiveShadow = value === undefined ? receiveShadow : value;\n            }\n        });\n    }\n\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\n    static ReceiveShadow(object, value){\n        if(value === undefined) value = receiveShadow;\n        object.traverse(function(child){\n            if(child instanceof THREE.Mesh){\n                child.receiveShadow = value;\n            }\n        });\n    }\n\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\n    static CastShadow(object, value){\n        if(value === undefined) value = castShadow;\n        object.traverse(function(child){\n            if(child instanceof THREE.Mesh){\n                child.castShadow = value;\n            }\n        });\n    }\n\n    /**\n     * @param {string} key \n     * @param {Array<string|THREE.Color>} colors \n     */\n    static CreateColorTemplate(key, ...colors){\n        var template = new ColorTemplate(...colors);\n        colorTemplates.set(key, template);\n    }\n\n    /**\n     * @param {string} key \n     */\n    static ColorTemplates(key){\n        return colorTemplates.get(key);\n    }\n\n}\n\nAsset.SolidMaterialType = SolidMaterialType;\nAsset.TransparentMaterialType = TransparentMaterialType;\nAsset.InvisibleMaterialType = InvisibleMaterialType;\n\nAsset.CreateColorTemplate('Containers', 0x020202, 0x7f7f7f, 0xffffff);\n\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","import { StackingProperty, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\nimport Dimensions from \"./Dimensions\";\nimport TextField from \"../common/TextField\";\nimport CargoEntry from \"../common/CargoEntry\";\n\n/**\n * @typedef {Object} BoxEntryProperties\n * @property {StackingProperty} stacking\n * @property {RotationConstraint} rotation\n * @property {TranslationConstraint} translation\n */\n\nvar numEntries = 0;\nfunction getDefaultLabel(){\n    return 'Box ' + numEntries.toString();\n}\n\nconst epsilon = Math.pow(2, -52);\nconst numberType = 'number';\n\nclass BoxEntry extends CargoEntry {\n    constructor(){\n        numEntries++;\n\n        super();\n        this.type = 'BoxEntry';\n\n        this.dimensions = new Dimensions(0, 0, 0);\n\n        this.weight = 0;\n        this.quantity = 1;\n        \n        /**\n         * @type {BoxEntryProperties}\n         */\n        this.properties;\n\n        this.properties.stacking    = new StackingProperty();\n        this.properties.rotation    = new RotationConstraint();\n        this.properties.translation = new TranslationConstraint();\n        \n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\n    }\n\n    set weight(value){ super.weight = value; }\n    get weight(){\n        return super.weight;\n    }\n\n    /**\n     * @returns {string}\n     */\n    get label(){\n        var field = this.descriptions.get('label');\n        return field ? field.content : undefined;\n    }\n\n    set label(value){\n        var field = this.descriptions.get('label');\n        if(field)\n            field.content = value;\n        else\n            this.descriptions.set('label', new TextField('label', value));\n    }\n\n    Reset(){\n        this.weight = 0;\n        this.quantity = 1;\n\n        this.properties.stacking.Reset();\n        this.properties.rotation.Reset();\n        this.properties.translation.Reset();\n\n        var label = this.descriptions.get('label');\n        label.content = TextField.defaultContent;\n        this.descriptions.clear();\n        this.descriptions.set('label', label);\n    }\n\n    /**\n     * @param {BoxEntry} entry \n     */\n    Copy(entry){\n        this.dimensions.Copy(entry.dimensions);\n        this.weight = entry.weight;\n        this.quantity = entry.quantity;\n\n        this.properties.stacking.Copy(entry.properties.stacking);\n        this.properties.rotation.Copy(entry.properties.rotation);\n        this.properties.translation.Copy(entry.properties.translation);\n\n        for(var [key, field] of entry.descriptions){\n            let own = this.descriptions.get(key);\n            if(own)\n                own.Copy(field);\n            else\n                this.descriptions.set(key, field.Clone());\n        }\n    }\n\n    Clone(){\n        var entry = new BoxEntry();\n        \n        entry.dimensions = this.dimensions.Clone();\n\n        entry.weight = this.weight;\n        entry.quantity = this.quantity;\n\n        entry.properties.stacking      = this.properties.stacking.Clone();\n        entry.properties.rotation       = this.properties.rotation.Clone();\n        entry.properties.translation    = this.properties.translation.Clone();\n\n        for(var [key, field] of this.descriptions){\n            entry.descriptions.set(key, field.Clone());\n        }\n\n        return entry;\n    }\n\n    ToString(){\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\n    }\n\n    /**\n     * @param {BoxEntry} entry \n     */\n    static Assert(entry){\n        return entry instanceof BoxEntry\n            && Dimensions.Assert(entry.dimensions)\n            && entry.properties\n            && entry.descriptions\n            && entry.weight !== undefined\n            && entry.quantity !== undefined\n                && typeof entry.weight === numberType\n                && typeof entry.quantity === numberType\n                && StackingProperty.Assert(entry.properties.stacking)\n                && RotationConstraint.Assert(entry.properties.rotation)\n                && TranslationConstraint.Assert(entry.properties.translation)\n        ;\n    }\n}\n\nBoxEntry.StackingProperty = StackingProperty;\nBoxEntry.RotationConstraint = RotationConstraint;\nBoxEntry.TranslationConstraint = TranslationConstraint;\n\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","import TextField from \"./TextField\";\nimport Logger from \"../../utils/cik/Logger\";\n\nconst _weight = Symbol('weight');\n\nclass CargoEntry {\n    constructor(){\n        this.type = 'CargoEntry';\n\n        this.quantity = 0;\n        this.properties = {};\n        this.uid = '';\n        this[_weight] = 0;\n\n        /**\n         * @type {Map<string, TextField>}\n         */\n        this.descriptions = new Map();\n    }\n\n    /** @returns {Number} */\n    get weight(){ return this[_weight]; }\n    set weight(value){ this[_weight] = value; }\n\n    /**\n     * @param {string} [uid] - You'll rarely need to provide this\n     */\n    SetUID(uid){\n        this.uid = uid || THREE.Math.generateUUID();\n        return this.uid;\n    }\n\n    /** @param {string} key @param {string} [value] ommit value param to get description content instead of setting it */\n    Description(key, value){\n        let d = this.descriptions.get(key);\n        if(d){\n            if(value === undefined) return d.content;\n\n            d.content = value;\n        }\n        else{\n            if(value === undefined) return false;\n\n            d = new TextField(key, value);\n            this.descriptions.set(key, d);\n        }\n    }\n\n    /** @param {string} key */\n    DeleteDescription(key){\n        if( this.descriptions.has(key) ) this.descriptions.delete(key);\n    }\n\n    Copy(entry){\n        Logger.Warn('CargoEntry.Copy is not implemented');\n    }\n\n    Clone(){\n        Logger.Warn('CargoEntry.Clone is not implemented');\n    }\n\n    ToString(){\n        \n    }\n}\n\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","import ContainingVolume from \"./ContainingVolume\";\nimport Logger from \"../../utils/cik/Logger\";\n\nconst type = 'Container';\n\nvar combinedVolume = new ContainingVolume();\n\nclass Container {\n    constructor(){\n        /**\n         * Containing volumes array\n         * @type {Array<ContainingVolume>}\n         */\n        this.volumes = [];\n\n        Logger.WarnOnce('Container.constructor', 'label not implemented');\n    }\n\n    /** @param {ContainingVolume} volume */\n    Add(volume){\n        this.volumes.push(volume);\n    }\n\n    /**\n     * @param {string} [uid] - You'll rarely need to provide this\n     */\n    SetUID(uid){\n        this.uid = uid || THREE.Math.generateUUID();\n        return this.uid;\n    }\n\n    get combinedVolume(){\n        let minX = Number.MAX_SAFE_INTEGER,\n            minY = Number.MAX_SAFE_INTEGER,\n            minZ = Number.MAX_SAFE_INTEGER;\n\n        let maxX = Number.MIN_SAFE_INTEGER,\n            maxY = Number.MIN_SAFE_INTEGER,\n            maxZ = Number.MIN_SAFE_INTEGER;\n\n        let combinedWeightCapacity = 0;\n        \n        this.volumes.forEach(volume => {\n            let pos = volume.position;\n            let dim = volume.dimensions;\n            if(pos.x < minX) minX = pos.x;\n            if(pos.y < minY) minY = pos.y;\n            if(pos.z < minZ) minZ = pos.z;\n            if(pos.x + dim.width > maxX) maxX = pos.x + dim.width;\n            if(pos.y + dim.height > maxY) maxY = pos.y + dim.height;\n            if(pos.z + dim.length > maxZ) maxZ = pos.z + dim.length;\n\n            combinedWeightCapacity += volume.weightCapacity;\n        });\n\n        combinedVolume.container = this;\n        combinedVolume.dimensions.Set(maxX - minX, maxZ - minZ, maxY - minY);\n        combinedVolume.position.set((maxX + minX) / 2, (maxZ + minZ) / 2, (maxY + minY) / 2);\n        combinedVolume.weightCapacity = combinedWeightCapacity;\n        \n        return combinedVolume;\n    }\n\n    toJSON(){\n        return {\n            type: type,\n            volumes: this.volumes\n        };\n    }\n\n    ToString(){\n        var result = type + '[';\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\n        }\n        return result;\n    }\n\n    static FromJSON(data){\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\n\n        var container = new Container();\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\n            containingVolume.container = container;\n            container.Add(containingVolume);\n        }\n\n        return container;\n    }\n\n    get volume(){\n        var index = this.volumes.length - 1;\n        return this.volumes[index];\n    }\n}\n\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","\n/** @typedef Vec2 @property {Number} x @property {Number} y */\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 */\n\nconst epsilon = Math.pow(2, -52);\nconst smallValue = .000001;\nconst smallValueSqrt = .001;\n\n// line intercept math by Paul Bourke http://paulbourke.net/geometry/pointlineplane/\n// Determine the intersection point of two line segments\n// Return FALSE if the lines don't intersect\nfunction segmentIntersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n\n    // Check if none of the lines are of length 0\n    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {\n        return false;\n    }\n  \n    var denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1));\n  \n    // Lines are parallel\n    if (Math.abs(denominator) < epsilon) {\n        return false;\n    }\n  \n    var ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator;\n    var ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\n  \n    // is the intersection along the segments\n    if (ua > 0 || ua < 1 || ub > 0 || ub < 1) return false;\n  \n    // Return a object with the x and y coordinates of the intersection\n    var x = x1 + ua * (x2 - x1);\n    var y = y1 + ua * (y2 - y1);\n\n    return {x, y};\n}\n\nfunction linesIntersect(ax, ay, bx, by, cx, cy, dx, dy){\n    // Line AB represented as a1x + b1y = c1\n    var a1 = by - ay,\n        b1 = ax - bx;\n    var c1 = a1 * ax + b1 * ay;\n  \n    // Line CD represented as a2x + b2y = c2\n    var a2 = dy - cy,\n        b2 = cx - dx;\n    var c2 = a2 * cx + b2 * cy;\n  \n    var determinant = a1 * b2 - a2 * b1;\n  \n    // The lines are parallel\n    if (Math.abs(determinant) < smallValue) return false;\n\n    var x = (b2 * c1 - b1 * c2) / determinant;\n    var y = (a1 * c2 - a2 * c1) / determinant;\n    return {x: x, y: y};\n}\n\nfunction rectangleContainsPoint(offset, rx, ry, rw, rh, px, py){\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\n    return px > x && px < x + w\n        && py > y && py < y + h;\n}\n\n/** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\nfunction rectangleContainsRectangle(offset, rx, ry, rw, rh, ox, oy, ow, oh){\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\n    return ox > x && ox + ow < x + w\n        && oy > y && oy + oh < y + h;\n}\n\n/**\n * @param {Array<Vec2>} points\n */\nfunction rectanglesFromPoints(points){\n    // Separate points in lists of 'y' coordinate, grouped by 'x' coordinate\n    const toInt = Math.round(1 / smallValue);\n    var xs = {};\n    points.forEach(point => {\n        let xCat = Math.floor(point.x * toInt);\n        if(xs[xCat] === undefined) xs[xCat] = {x: point.x, ys: []};\n        let ys = xs[xCat].ys;\n        let yCat = Math.floor(point.y * toInt);\n        let insert = true;\n        for(let iY = 0; iY < ys.length; iY++){\n            if(ys[iY].yCat === yCat) insert = false;\n        }\n        if(insert) ys.push({yCat: yCat, y: point.y});\n    });\n\n    //console.log('xs:', xs);\n\n    // Intersect lists\n    function sortYCat(a, b){\n        if(a.yCat < b.yCat) return -1;\n        if(a.yCat > b.yCat) return 1;\n        return 0;\n    }\n    var xsKeys = Object.keys(xs);\n    for(let iX = 0; iX < xsKeys.length; iX++){\n        let xCat = xs[xsKeys[iX]];\n        xCat.ys.sort(sortYCat);\n    }\n\n    /** @typedef IntersectedX @property {Number} x1 @property {Number} x2 @property {Array<Number>} ys */\n    /** @type {Array<IntersectedX>} */\n    var intersectedXs = [];\n    for(let iX = 0; iX < xsKeys.length; iX++){\n        let xCat1 = xs[xsKeys[iX]];\n        let ys1 = xCat1.ys;\n        for(let iX2 = iX + 1; iX2 < xsKeys.length; iX2++){\n            let xCat2 = xs[xsKeys[iX2]];\n            let ys2 = xCat2.ys;\n\n            let yIntersect = [];\n            let xIntersect = {x1: xCat1.x, x2: xCat2.x, ys: yIntersect};\n            for(let iY1 = 0; iY1 < ys1.length; iY1++){\n                for(let iY2 = 0; iY2 < ys2.length; iY2++){\n                    if(ys1[iY1].yCat === ys2[iY2].yCat){\n                        yIntersect.push(ys1[iY1].y);\n                        break;\n                    }\n                }\n            }\n\n            if(yIntersect.length > 1) intersectedXs.push(xIntersect);\n        }\n    }\n\n    //console.log(intersectedXs);\n\n    /** @type {Array<Rectangle>} */\n    var rectangles = [];\n    for(let iIX = 0; iIX < intersectedXs.length; iIX++){\n        let intersectedX = intersectedXs[iIX];\n        let ys = intersectedX.ys;\n        let x1 = intersectedX.x1, x2 = intersectedX.x2;\n        for(let iY1 = 0; iY1 < ys.length; iY1++){\n            for(let iY2 = iY1 + 1; iY2 < ys.length; iY2++){\n                let p1 = {x: x1, y: ys[iY1]},\n                    p2 = {x: x2, y: ys[iY1]},\n                    p3 = {x: x2, y: ys[iY2]},\n                    p4 = {x: x1, y: ys[iY2]};\n                \n                let rectangle = {p1: p1, p2: p2, p3: p3, p4: p4};\n                rectangles.push(rectangle);\n            }\n        }\n    }\n\n    return rectangles;\n}\n\n/**\n * @param {Array<Rectangle>} rectangles \n * @returns {Array<Rectangle>} the array is edited in-place\n */\nfunction reduceRectangles(rectangles){\n    for(let iRect = 0; iRect < rectangles.length; iRect++){\n        let ra = rectangles[iRect];\n        let ax = ra.p1.x, ay = ra.p1.y;\n        let aw = ra.p3.x - ax, ah = ra.p3.y - ay;\n        for(let jRect = 0; jRect < rectangles.length; jRect++){\n            if(iRect !== jRect){\n                let rb = rectangles[jRect];\n                let bx = rb.p1.x, by = rb.p1.y;\n                let bw = rb.p3.x - bx, bh = rb.p3.y - by;\n                if(rectangleContainsRectangle(smallValue, ax, ay, aw, ah, bx, by, bw, bh)){\n                    rectangles.splice(jRect, 1);\n                    jRect--;\n                    iRect = Math.max(0, jRect - 1);\n                    break;\n                }\n            }\n        }\n    }\n    return rectangles;\n}\n\n/** @param {Number} ax @param {Number} ay @param {Number} bx @param {Number} by @param {Number} x @param {Number} y */\nfunction segmentContainsPoint(ax, ay, bx, by, x, y){\n    var vx = bx - ax, vy = by - ay,\n        vxa = x - ax, vya = y - ay,\n        vxb = x - bx, vyb = y - by;\n    var d = Math.sqrt(vx * vx + vy * vy),\n        da = Math.sqrt(vxa * vxa + vya * vya),\n        db = Math.sqrt(vxb * vxb + vyb * vyb);\n    return Math.abs( d - (da + db) ) < smallValueSqrt;\n}\n\nexport {\n    epsilon,\n    smallValue,\n    smallValueSqrt,\n    linesIntersect,\n    rectangleContainsPoint,\n    rectangleContainsRectangle,\n    reduceRectangles,\n    rectanglesFromPoints\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/Math2D.js","\n/** SignalerCallback \n * @callback SignalerCallback\n * @param {Array<*>} args\n */\n\nconst _signals = Symbol('signals');\nconst _dispatches = Symbol('dispatches');\n\nclass LightDispatcher {\n    constructor(){\n        this[_signals] = {};\n        this[_dispatches] = {};\n    }\n\n    /** @param {string} event @param {SignalerCallback} callback */\n    On(event, callback){\n        if(this[_signals][event] === undefined){\n            this[_signals][event] = [];\n        }\n        this[_signals][event].push(callback);\n    }\n\n    /** @param {string} event @param {SignalerCallback} callback */\n    Off(event, callback){\n        var callbacks = this[_signals][event];\n        if(callbacks){\n            var index = callbacks.indexOf(callback);\n            if(index != -1){\n                callbacks.splice(index, 1);\n            }\n        }\n    }\n\n    /** @param {string} event @param {Array<*>} [args] */\n    Dispatch(event, ...args){\n        this[_dispatches][event] = args;\n        var callbacks = this[_signals][event];\n        if(callbacks){\n            for(var i = 0, len = callbacks.length; i < len; i++){\n                callbacks[i](...args);\n            }\n        }\n    }\n\n}\n\nexport default LightDispatcher;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/LightDispatcher.js","import Utils from \"../Utils\";\n\nconst serializeModes = {\n    none: 'none',\n    json: 'json'\n};\n\n/**\n * @typedef ConfigParams\n * @property {Boolean} debug\n * @property {Boolean} save\n * @property {serializeModes} serializeMode\n */\n\n\nclass Controller {\n    constructor(property, min, max, step, onChange){\n        this.property = property;\n        this.min = min;\n        this.max = max;\n        this.step = step;\n        this.onChange = onChange;\n    }\n\n    /**\n     * @returns {Array<Controller>}\n     */\n    static Multiple(properties, min, max, step, onChange){\n        var controllers = [];\n        properties.forEach(property => {\n            controllers.push(new Controller(property, min, max, step, onChange));\n        });\n        return controllers;\n    }\n}\n\nfunction createKeyInfo(obj, key){\n    var isFolderGrouped = key[0] == \"#\";\n    if(isFolderGrouped)\n        key = key.substr(1);\n    \n    var propertyPath = key;\n    \n    key = key.split('.');\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\n    while (key.length > 1) obj = obj[key.shift()];\n    return {\n        id: (folder ? folder + '.' : '') + key[0],\n        folder: folder,\n        owner: obj,\n        key: key[0],\n        propertyPath: propertyPath\n    };\n}\n\nfunction getKey(obj, key){\n    return key.split('.').reduce(function(a, b){\n        return a && a[b];\n    }, obj);\n}\n\nfunction setKey(obj, key, val){\n    key = key.split('.');\n    while (key.length > 1) obj = obj[key.shift()];\n    var endKey = key.shift();\n    if(obj[endKey].setHex){\n        obj[endKey].setHex(val);\n    }\n    else{\n        obj[endKey] = val;\n    }\n    return obj[endKey];\n}\n\nfunction download(data, filename, type) {\n    // https://stackoverflow.com/a/30832210/1712403\n    var file = new Blob([data], {type: (type || 'text/plain')});\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\n        window.navigator.msSaveOrOpenBlob(file, filename);\n    else { // Others\n        var a = document.createElement(\"a\"),\n                url = URL.createObjectURL(file);\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        setTimeout(function() {\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(url);  \n        }, 0); \n    }\n}\n\nconst defaultEditParams = {\n    save: true, debug: true\n};\n\n/** \n * @typedef GUI\n * @property {HTMLElement} domElement\n */\n\nclass Shortcut{\n    /**\n     * @param {string} label \n     */\n    constructor(label){\n        this.label = label;\n\n        ///** @type {Map<string, GUI>} */\n        //this.folders = new Map();\n\n        this.controller = {};\n    }\n\n    Add(label, target){\n        label = label.replace(new RegExp(' ', 'g'), '_');\n        this.controller[label] = target;\n        Config.shortcutsGUI.add(this.controller, label);\n        //console.log('added ' + label + ' shortcut to ' + this.label);\n    }\n}\n\n/** @type {GUI} */\nvar shortcutsGUI;\n\n/** @type {Map<string, Shortcut>} */\nvar shortcuts = new Map();\n\n/** @type {Map<Object, Config>} */\nvar instances = new Map();\n\n\nclass Config {\n    constructor(target){\n        if(!Config.debug) \n            Config.debug = instances;\n        instances.set(target, this);\n\n        this.target = target;\n        this.keys = [];\n    }\n\n    Track(...args){\n        var keys = this.keys;\n        args.forEach(key => {\n            keys.push(key);\n        });\n    }\n\n    Snapshot(ignoreKeys){\n        var data = {};\n        var target = this.target;\n        this.keys.forEach(key => {\n            var isController = key instanceof Controller;\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\n            var keyValue = keyInfo.owner[keyInfo.key];\n            if(typeof keyValue !== 'function'){\n                data[keyInfo.id] = keyValue;\n            }\n            else if(ignoreKeys !== undefined){\n                var warn = true;\n                ignoreKeys.forEach(ignoredKey => {\n                    if(ignoredKey === keyInfo.id){\n                        warn = false;\n                    }\n                });\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\n            }\n        });\n        return data;\n    }\n\n    Serialize(){\n        var data = {};\n        this.keys.forEach(key => {\n            let isController = key instanceof Controller;\n            let keyInfo = createKeyInfo(this.target, isController ? key.property : key);\n            let keyValue = keyInfo.owner[keyInfo.key];\n            if(typeof keyValue !== 'function'){\n                var saveValue = keyInfo.owner[keyInfo.key].isColor ? '0x' + Number.parseInt(keyValue.toJSON()).toString(16) : keyValue;\n                data[keyInfo.propertyPath] = saveValue;\n            }\n        });\n        return data;\n    }\n\n    Save(){\n        if(this.Update){\n            this.Update();\n            this.data = this.Snapshot();\n        }\n    }\n\n    /**\n     * \n     * @param {Function} guiChanged \n     * @param {string} label \n     * @param {string} gui - or a dat.GUI object\n     * @param {ConfigParams} params \n     */\n    Edit(guiChanged, label, gui, params){\n\n        params = Utils.AssignUndefined(params, defaultEditParams);\n\n        var controllers = [];\n        var target = this.target;\n        if(gui === undefined) {\n            \n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\n                autoPlace: true\n            });\n        }\n        else if(label){\n            gui = gui.addFolder(label);\n        }\n\n        if(this.editing === undefined){\n            this.editing = {};\n \n            this.Update = function(){\n                require(\"./datGUIExtensions\");\n                \n                gui.updateAll();\n                guiChanged();\n            };\n \n            gui.add(this, 'Update');\n        }\n\n        this.keys.forEach(key => {\n            var isController = key instanceof Controller;\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\n            if(this.editing[keyInfo.id] !== true){\n                var folder = gui;\n                if(keyInfo.folder){\n                    require(\"./datGUIExtensions\");\n\n                    if(gui.find)\n                        folder = gui.find(keyInfo.folder);\n                    else\n                        console.warn('gui extensions not found!');\n                        \n                    if(!folder)\n                        folder = gui.addFolder(keyInfo.folder);\n                }\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\n                controllers.push(\n                    ( isController && key.min !== undefined ? \n                        addFunction.call(folder, \n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\n                        ) :\n                        addFunction.call(folder, \n                            keyInfo.owner, keyInfo.key\n                        )\n                    ) .onChange(key.onChange === undefined ? guiChanged : \n                        (function(){\n                            key.onChange.call(keyInfo.owner);\n                            guiChanged();\n                        })\n                    )\n                );\n                this.editing[keyInfo.id] = true;\n            }\n        });\n\n        var scope = this;\n        var editor = {\n            Save: function(){\n                scope.Save();\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\n                download(scope.data, filename);\n            },\n\n            Debug: function(){\n                console.log(scope.target);\n            },\n\n            Serialize: function(){\n                if(scope.Update){\n                    scope.Update();\n                    var data = scope.Serialize();\n                    var json = JSON.stringify(data);\n                    console.log(data, json);\n                }\n            }\n        }\n        if(params.save){\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\n            if(this.editing['editor.Save'] !== true){\n                this.defaultsFolder.add(editor, 'Save');\n                this.editing['editor.Save'] = true;\n            }\n        }\n        if(params.debug){\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\n            if(this.editing['editor.Debug'] !== true){\n                this.defaultsFolder.add(editor, 'Debug');\n                this.editing['editor.Debug'] = true;\n            }\n        }\n\n        switch(params.serializeMode){\n            default: break;\n            case serializeModes.json:\n                if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\n                if(this.editing['editor.Serialize'] !== true){\n                    this.defaultsFolder.add(editor, 'Serialize');\n                    this.editing['editor.Serialize'] = true;\n                }\n                break;\n        }\n\n        this.gui = gui;\n    }\n\n    toJSON(){\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\n        return this.data;\n    }\n\n    static get serializeModes(){\n        return serializeModes;\n    }\n\n    static get shortcuts(){\n        return shortcuts;\n    }\n\n    static get shortcutsGUI(){\n        if(shortcutsGUI === undefined) shortcutsGUI = new (window.dat || require(\"./datGUIConsole\").default).GUI({\n            autoPlace: false\n        });\n        return shortcutsGUI;\n    }\n\n    /**\n     * \n     * @param {string} property - #property marks a folder\n     * @param {Array<string>} subProperties \n     * @returns returns the subProperties full paths\n     */\n    static Unroll(property, ...subProperties){\n        var unrolled = [];\n        subProperties.forEach(subProperty => {\n            unrolled.push(property + '.' + subProperty);\n        });\n        return unrolled;\n    }\n\n    /**\n     * @param {*} target \n     * @param {*} data \n     */\n    static Load(target, data){\n        var keys = Object.keys(data);\n        keys.forEach(key => {\n            setKey(target, key, data[key]);\n        });\n\n        if(instances.has(target) && instances.get(target).Update)\n            instances.get(target).Update();\n    }\n\n    /**\n     * @param {string} category\n     * @param {string} label \n     * @param {Function} target \n     */\n    static MakeShortcut(category, label, target){\n        if(shortcuts.has(category) === false) shortcuts.set(category, new Shortcut(category));\n        var shortcut = shortcuts.get(category);\n        shortcut.Add(label, target);\n    }\n}\n\nConfig.Controller = Controller;\n\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","import { epsilon, smallValue, smallValueSqrt, rectanglesFromPoints, linesIntersect, rectangleContainsPoint, reduceRectangles } from \"./Math2D\";\n\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 \n * @property {Number} weight @property {Number} weightCapacity @property {Number} stackingCapacity \n */\n\n/**\n * @param {Rectangle | Array<Rectangle>} rect \n * @param {Number} weight \n * @param {Number} weightCapacity \n * @param {Number} stackingCapacity \n */\nfunction setRectangleWeights(rect, weight, weightCapacity, stackingCapacity){\n    if(rect instanceof Array){\n        for(let i = 0; i < rect.length; i++){\n            rect[i].weight = weight;\n            rect[i].weightCapacity = weightCapacity;\n            rect[i].stackingCapacity = stackingCapacity;\n        }\n    }\n    else{\n        rect.weight = weight;\n        rect.weightCapacity = weightCapacity;\n        rect.stackingCapacity = stackingCapacity;\n    }\n}\n\nconst maxWeightValue = Number.MAX_SAFE_INTEGER;\n\nclass Region{\n    /**\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \n     */\n    constructor(x, y, z, width, height, length, preferredX){\n        this.Set(x, y, z, width, height, length, preferredX);\n        this.SetWeights(0, maxWeightValue, maxWeightValue);\n    }\n\n    /**\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \n     */\n    Set(x, y, z, width, height, length, preferredX){\n        this.x = x; this.y = y; this.z = z;\n        this.width = width; this.height = height; this.length = length;\n        this.preferredX = preferredX;\n        return this;\n    }\n    \n    /**\n     * @param {Number} weight \n     * @param {Number} weightCapacity \n     * @param {Number} stackingCapacity \n     */\n    SetWeights(weight, weightCapacity, stackingCapacity){\n        this.weight = weight;\n        this.weightCapacity = weightCapacity;\n        this.stackingCapacity = stackingCapacity;\n    }\n\n    /** @param {Region} region */\n    Copy(region){\n        this.Set(region.x, region.y, region.z, region.width, region.height, region.length, region.preferredX);\n        this.SetWeights(this.weight, this.weightCapacity, this.stackingCapacity);\n        return this;\n    }\n\n    get volume(){\n        return this.width * this.height * this.length;\n    }\n\n    /**\n     * @param {Number} offset offsets the region by this before calculating corners \n     * @returns {Array<Number>} 8 corners, length = 24 + center point [24, 25, 26]\n     */\n    GetCorners(offset){\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\n\n        tempCorners[0] = x;       tempCorners[1] = y;       tempCorners[2] = z;         // 0:\n        tempCorners[3] = x + w;   tempCorners[4] = y;       tempCorners[5] = z;         // 0:w\n        tempCorners[6] = x;       tempCorners[7] = y + h;   tempCorners[8] = z;         // 0:h\n        tempCorners[9] = x + w;   tempCorners[10] = y + h;  tempCorners[11] = z;        // 0:wh\n\n        tempCorners[12] = x;      tempCorners[13] = y;      tempCorners[14] = z + l;    // 1:\n        tempCorners[15] = x + w;  tempCorners[16] = y;      tempCorners[17] = z + l;    // 1:w\n        tempCorners[18] = x;      tempCorners[19] = y + h;  tempCorners[20] = z + l;    // 1:h\n        tempCorners[21] = x + w;  tempCorners[22] = y + h;  tempCorners[23] = z + l;    // 1:wh\n\n        tempCorners[24] = x + w/2;tempCorners[25] = y + h/2;tempCorners[26] = z + l/2;  // center\n\n        return tempCorners;\n    }\n\n    /**\n     * @param {Array} result\n     * @returns {Array<Number>} 4 corners, length = 12\n     */\n    GetFloorPoints(result){\n        if(result === undefined) result = tempPoints;\n        var x = this.x, y = this.y, z = this.z, w = this.width, l = this.length;\n\n        result[0] = x;         result[1] = y;     result[2] = z;\n        result[3] = x + w;     result[4] = y;     result[5] = z;\n        result[6] = x + w;     result[7] = y;     result[8] = z + l;\n        result[9] = x;         result[10] = y;    result[11] = z + l;\n\n        return result;\n    }\n\n    /**\n     * @param {Number} offset offsets the region by this before checking * @param {Number} px * @param {Number} py * @param {Number} pz \n     */\n    ContainsPoint(offset, px, py, pz){\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\n        return px > x && px < x + w\n            && py > y && py < y + h\n            && pz > z && pz < z + l;\n    }\n\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\n    ContainsRegion(offset, subRegion){\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\n        var rx = subRegion.x, ry = subRegion.y, rz = subRegion.z, rw = subRegion.width, rh = subRegion.height, rl = subRegion.length;\n        return rx > x && rx + rw < x + w\n            && ry > y && ry + rh < y + h\n            && rz > z && rz + rl < z + l;\n    }\n\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} other */\n    Intersects(offset, other){\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\n    \n        return x <= other.x + other.width && x + w >= other.x\n                && y <= other.y + other.height && y + h >= other.y \n                && z <= other.z + other.length && z + l >= other.z;\n    }\n\n    /** @param {Number} offset offsets the region by this before checking * @param {Number} width * @param {Number} height * @param {Number} length\n     * @param {Number} weight @param {Boolean} grounded\n     * @param {Region} [result]\n     */\n    FitTest(offset, width, height, length, weight, grounded, result){\n        if(!result) result = tempRegion;\n\n        if(grounded && this.y > smallValue) return false;\n\n        // Check that all dimensions fit\n        let fit = width < this.width + offset * 2 && height < this.height + offset * 2 && length < this.length + offset * 2;\n        if(fit){\n\n            let weightFit = weight <= this.weightCapacity;\n            if(weightFit){\n\n                // Calculate x based on preferred side\n                let x = this.preferredX !== 0 ? this.x + this.width - width : this.x;\n                result.Set(x, this.y, this.z, width, height, length, this.preferredX);\n                result.SetWeights(weight, 0, maxWeightValue);\n                return result;\n            }\n        }\n\n        return false;\n    }\n\n    /** @param {Region} region * @param {Number} minRegionAxis */\n    Subtract(region, minRegionAxis){\n        /** @type {Array<Region>} */\n        var newRegions;\n        \n        // Calculate a new east region\n        let axis = region.x + region.width;\n        let size = this.x + this.width - axis;\n        if(size > minRegionAxis){\n            let east = new Region(axis, this.y, this.z, size, this.height, this.length, 0);\n            east.SetWeights(0, this.weightCapacity, this.stackingCapacity);\n            if(newRegions === undefined) newRegions = [];\n            newRegions.push(east);\n        }\n\n        // Calculate a new west region\n        axis = this.x;\n        size = region.x - axis;\n        if(size > minRegionAxis){\n            let west = new Region(axis, this.y, this.z, size, this.height, this.length, 1);\n            west.SetWeights(0, this.weightCapacity, this.stackingCapacity);\n            if(newRegions === undefined) newRegions = [];\n            newRegions.push(west);\n        }\n\n        // Calculate a new over/up region\n        axis = region.y + region.height;\n        size = this.y + this.height - axis;\n        if(size > minRegionAxis){\n            let over = new Region(region.x, axis, region.z, region.width, size, region.length, 0); // todo: add overhang var? // togglePreferredX based on pre-packed weight distribution?\n            over.SetWeights(0, region.stackingCapacity, region.stackingCapacity);\n            if(newRegions === undefined) newRegions = [];\n            newRegions.push(over);\n        }\n\n        // Calculate a new south region\n        axis = this.z;\n        size = region.z - axis;\n        if(false && size > minRegionAxis){\n            let south = new Region(this.x, this.y, axis, this.width, this.height, size, 0); // todo togglePreferredX based on pre-packed weight distribution?\n            south.SetWeights(0, this.weightCapacity, this.stackingCapacity);\n            if(newRegions === undefined) newRegions = [];\n            newRegions.push(south);\n        }\n\n        // Set this as new north/front region\n        axis = region.z + region.length;\n        size = this.z + this.length - axis;\n        this.z = axis;\n        this.length = size;\n        this.SetWeights(0, this.weightCapacity, this.stackingCapacity);\n\n        return newRegions;\n    }\n\n    /** @param {Region} other */\n    ConnectFloorRects(other){\n        var ptsA = this.GetFloorPoints(tempPoints),\n            ptsB = other.GetFloorPoints(tempPoints2);\n\n        var adjacent = 0;\n        var intersections = [];\n        for(let iA = 0; iA < 12; iA += 3){\n            let nextA = iA + 3 === 12 ? 0 : iA + 3;\n            let ax = ptsA[iA], az = ptsA[iA + 2], nax = ptsA[nextA], naz = ptsA[nextA + 2];\n\n            for(let iB = 0; iB < 12; iB += 3){\n                let nextB = iB + 3 === 12 ? 0 : iB + 3;\n                let bx = ptsB[iB], bz = ptsB[iB + 2], nbx = ptsB[nextB], nbz = ptsB[nextB + 2];\n\n                if(\n                    rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], bx, bz)\n                    || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], ax, az)\n                ){\n                    adjacent++;\n                }\n\n                let intersection = linesIntersect(ax, az, nax, naz, bx, bz, nbx, nbz);\n                if(intersection &&\n                    (\n                        rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], intersection.x, intersection.y)\n                        || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], intersection.x, intersection.y)\n                    )\n                ){\n                    intersections.push(intersection);\n                }\n            }\n        }\n\n        if(adjacent > 1){\n            for(let i = 0; i < 12; i += 3) intersections.push({x: ptsA[i], y: ptsA[i + 2]}, {x: ptsB[i], y: ptsB[i + 2]});\n        }\n        else{\n            intersections.length = 0;\n        }\n\n        var rectangles = rectanglesFromPoints(intersections);\n\n        let rectA = { p1: {x: ptsA[0], y: ptsA[2]}, p2: {x: ptsA[3], y: ptsA[5]}, p3: {x: ptsA[6], y: ptsA[8]}, p4: {x: ptsA[9], y: ptsA[11]} };\n        let rectB = { p1: {x: ptsB[0], y: ptsB[2]}, p2: {x: ptsB[3], y: ptsB[5]}, p3: {x: ptsB[6], y: ptsB[8]}, p4: {x: ptsB[9], y: ptsB[11]} };\n        rectangles.push(rectA, rectB);\n\n        reduceRectangles(rectangles);\n\n        setRectangleWeights(rectangles, this.weight + other.weight, this.weightCapacity + other.weightCapacity, this.stackingCapacity + other.stackingCapacity);\n        \n        return rectangles;\n    }\n\n    ToString(){\n        return format('R(p:[@, @, @], d:[@, @, @], w:@, wCap:@, sCap:@)', {nf: function(n){\n                return numberFormat(n, 2);\n            }},\n            this.x, this.y, this.z,\n            this.width, this.height, this.length,\n            this.weight, this.weightCapacity, this.stackingCapacity\n        );\n    }\n    \n    /**\n     * Deepest to front, smallest to largest\n     * @param {Region} a * @param {Region} b \n     */\n    static SortDeepestSmallest(a, b){\n        if(a.z < b.z) return -1;\n        if(a.z > b.z)return 1;\n        if(a.volume < b.volume) return -1;\n        if(a.volume > b.volume) return 1;\n        return 0;\n    }\n}\n\nvar tempRegion = new Region();\nvar tempCorners = [0];\nvar tempPoints = [0];\nvar tempPoints2 = [0];\n\nexport default Region;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/Region.js","\nimport SceneSetup from './view/SceneSetup';\nimport Packer, { PackerParams } from './packer/Packer';\nimport View from './view/View';\nimport CargoInput from './components/CargoInput';\nimport PackingSpaceInput from './components/PackingSpaceInput';\nimport UX from './UX';\nimport Logger from './utils/cik/Logger';\nimport Signaler from './utils/cik/Signaler';\nimport PackerInterface, { SolverParams } from './components/PackerInterface';\nimport BoxEntry from './components/box/BoxEntry';\nimport Container from './packer/container/Container';\nimport Resources from './Resources';\nimport Asset from './components/assets/Asset';\nimport DomUI from './view/dom/DomUI';\n\nconst signals = {\n    start: 'start'\n};\n\n/**\n * @typedef AppParams\n * @property {UX} ux\n * @property {CargoInput} cargoInput\n * @property {PackingSpaceInput} packingSpaceInput\n * @property {PackerInterface} packerInterface\n * @property {Resources} resources\n */\n\nclass App extends Signaler{\n\n    /**\n     * \n     * @param {HTMLDivElement} containerDiv\n     * @param {AppParams} params\n     */\n    constructor(containerDiv, params) {\n\n        super();\n\n        let scope = this;\n\n        this.ux = params.ux;\n        this.cargoInput = params.cargoInput;\n        this.packingSpaceInput = params.packingSpaceInput;\n        this.packerInterface = params.packerInterface;\n        this.resources = params.resources;\n        Asset.resources = this.resources;\n\n        /** @type {PackerParams} */\n        let packerParams = this.packerInterface.params;\n        packerParams.ux = this.ux;\n        this.packer = new Packer(packerParams);\n        \n        this.cargoInput.On(CargoInput.signals.insert, \n            /** @param {BoxEntry} boxEntry */\n            function(boxEntry){\n                scope.packer.cargoList.Add(boxEntry);\n            });\n\n        this.cargoInput.On(CargoInput.signals.modify, \n            /** @param {BoxEntry} boxEntry */\n            function(boxEntry){\n                scope.packer.cargoList.Modify(boxEntry);\n                scope.SolveAgain();\n            });\n\n        this.cargoInput.On(CargoInput.signals.remove, \n            /** @param {BoxEntry} boxEntry */\n            function(boxEntry){\n                scope.packer.cargoList.Remove(boxEntry.uid);\n                scope.SolveAgain();\n            });\n        \n        this.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, \n            /** @param {Container} container */\n            function(container){\n                scope.packer.packingSpace.AddContainer(container);\n            });\n\n        this.packerInterface.On(PackerInterface.signals.solveRequest, \n            /** @param {SolverParams} solverParams */\n            function(solverParams){\n                scope.Solve(solverParams);\n            });\n\n        this.domUI = new DomUI(containerDiv, this.ux);\n        this.sceneSetup = new SceneSetup(this.domUI.domElement ? this.domUI.domElement : containerDiv, this.ux);\n        this.sceneSetup.Init().then(this.Start.bind(this));\n    }\n\n\n    Start(){\n        let scope = this;\n        let packerInterface = this.packerInterface;\n\n        /** @type {import('./view/View').ViewParams} */\n        let viewParams = { ux: this.ux };\n        this.view = new View(this.packer, this.sceneSetup, this.domUI, viewParams);\n        this.sceneSetup.Start();\n\n        this.ux._Bind(this);\n        this.cargoInput._Bind(this);\n        this.packingSpaceInput._Bind(this);\n\n        let resetColor = function(){};\n        this.cargoInput.On(CargoInput.signals.show, \n            /** @param {BoxEntry} boxEntry */\n            function(boxEntry){\n                let existingEntry = scope.cargoInput.GetEntry(boxEntry.uid);\n                if(existingEntry){\n                    resetColor();\n                    let previewColorBackup = boxEntry.Description('color');\n                    resetColor = function(){ boxEntry.Description('color', previewColorBackup); }\n                    boxEntry.Description('color', existingEntry.Description('color'));\n                }\n                scope.view.sceneSetup.hud.Preview(boxEntry);\n            });\n\n        function hideEntryPreview(){\n            resetColor();\n            scope.view.sceneSetup.hud.Preview(false);\n        }\n        this.cargoInput.On(CargoInput.signals.hide, hideEntryPreview);\n        this.cargoInput.On(CargoInput.signals.insert, hideEntryPreview);\n        this.cargoInput.On(CargoInput.signals.modify, hideEntryPreview);\n        this.cargoInput.On(CargoInput.signals.remove, hideEntryPreview);\n\n        /** @param {Packer.PackingResult} packingResult */\n        function onPackUpdate(packingResult){\n            packerInterface._Notify(PackerInterface.signals.solved, packingResult);\n        }\n        this.packer.On(Packer.signals.packUpdate, onPackUpdate);\n\n        /** @param {*} error */\n        function onPackFailed(error){\n            packerInterface._Notify(PackerInterface.signals.failed, error);\n        }\n        this.packer.On(Packer.signals.packFailed, onPackFailed);\n\n        this.Dispatch(signals.start);\n    }\n\n    SolveAgain(){\n        if(this.ux.params.autoUpdatePack && this.packer.solveAgain) this.Solve();\n    }\n\n    /** @param {SolverParams} [solverParams] */\n    Solve(solverParams){\n        this.view.ClearPackingResults();\n        this.packer.Solve(solverParams);\n    }\n\n    static get signals(){\n        return signals;\n    }\n  \n}\n\nexport default App;\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","import CargoList from \"./CargoList\";\nimport PackingSpace from \"./PackingSpace\";\nimport BoxEntry from \"../components/box/BoxEntry\";\nimport Utils from \"../utils/cik/Utils\";\nimport Signaler from \"../utils/cik/Signaler\";\nimport ContainingVolume from \"./container/ContainingVolume\";\n\nconst CUB = require('./cubX/CUB');\n\n/** @typedef CUBParams\n * @property {Number} score_minLength [0, 1] influence position of cargo in length\n * \n * (higher values means the algorithm will try to pack as tightly as possible in length)\n * \n * @property {Number} score_minWastedSpace [0, 1] influence orientation of cargo \n * \n * (higher values means the algorithm will try to minimize orientation that results in 'unuseable' unpacked volumes)\n */\n\nconst typeofHeuristicParams = CUB.heuristics.HeuParametric1.Params;\n\n/** @param {CUBParams} cubParams @param {typeofHeuristicParams} heuristicParams */\nfunction extractHeuristicParams(cubParams, heuristicParams){\n    if(heuristicParams === undefined) heuristicParams = new typeofHeuristicParams();\n\n    let scoringWeight = cubParams.score_minLength + cubParams.score_minWastedSpace;\n\n    heuristicParams.scoring.minZ = cubParams.score_minLength / scoringWeight;\n    heuristicParams.scoring.minWaste = cubParams.score_minWastedSpace / scoringWeight;\n    return heuristicParams;\n}\n\n/**\n * @typedef {Object} PackerParams\n * @property {import('../UX').default} ux\n * @property {Number} defaultStackingFactor\n */ \n\n/** @typedef SolverParams\n * @property {CUBParams} algorithmParams\n * @property {string} algorithm default = 'cub'\n */\n\nclass PackedCargo {\n    /**\n     * @param {BoxEntry} entry \n     * @param {ContainingVolume} containingVolume \n     * @param {THREE.Vector3} position \n     * @param {Number} orientation \n     */\n    constructor(entry, containingVolume, position, orientation){\n        this.entry = entry;\n        this.containingVolume = containingVolume;\n        this.position = position;\n        this.orientation = orientation;\n    }\n}\n\nclass UnpackedCargo {\n    /**\n     * @param {BoxEntry} entry \n     * @param {Number} unpackedQuantity\n     */\n    constructor(entry, unpackedQuantity){\n        this.entry = entry;\n        this.unpackedQuantity = unpackedQuantity;\n    }\n}\n\nclass PackingResult{\n    /** @param {Number} numTotalItem @param {Number} runtime */\n    constructor(numTotalItems, runtime){\n        /** @type {Array<PackedCargo>} */\n        this.packed = [];\n\n        /** @type {Array<UnpackedCargo>} */\n        this.unpacked = [];\n\n        this.numTotalItems = numTotalItems || 0;\n\n        this.runtime = runtime || -1;\n    }\n}\n\n/** @type {PackerParams} */\nconst defaultParams = {};\nconst signals = {\n    packUpdate: 'packUpdate',\n    packFailed: 'packFailed'\n};\n\nconst _solverParams = Symbol('solverParams');\n\nconst epsilon = Math.pow(2, -52);\n\nclass Packer extends Signaler {\n    /** @param {PackerParams} params */\n    constructor(params){\n        super();\n\n        /** Shared object with PackerInterface's params  */\n        this.params = params;\n\n        this.packingSpace = new PackingSpace();\n        this.cargoList = new CargoList();\n\n        this.solverExecutionsCount = 0;\n    }\n\n    /** @param {SolverParams} params */\n    Solve(params){\n        params = params || this[_solverParams];\n        this[_solverParams] = params;\n\n        this.solverExecutionsCount++;\n\n        let algorithm = params.algorithm;\n        let algorithmParams = params.algorithmParams;\n        if(algorithm === 'cub')\n            this.SolveCUB(algorithmParams);\n    }\n\n    /** @param {CUBParams} params */\n    async SolveCUB(params){\n\n        if(this.packingSpace.ready === false){\n            this.Dispatch(signals.packFailed, 'Packing space not ready');\n            return;\n        }\n\n        if(this.cargoList.ready === false){\n            this.Dispatch(signals.packFailed, 'Cargo list not ready');\n            return;\n        }\n\n        const Container = CUB.Container;\n        const Item = CUB.Item;\n\n        var containingVolume = this.packingSpace.current.volume;\n        var d = containingVolume.dimensions;\n        var container = new Container(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\n\n        var numTotalItems = 0;\n\n         /** @type {Array<Item>} */\n         var items = [];\n         var entries = {};\n         for(let group of this.cargoList.groups.values()){\n            /** @type {BoxEntry} */\n            let entry = group.entry;\n            entries[entry.uid] = entry;\n            d = entry.dimensions;\n            let validOrientations = entry.properties.rotation.enabled ? entry.properties.rotation.allowedOrientations : undefined;\n            let stackingCapacity = entry.properties.stacking.enabled ? entry.properties.stacking.capacity : (entry.weight > epsilon ? entry.weight * this.params.defaultStackingFactor : Number.MAX_SAFE_INTEGER - 10);\n            let grounded = entry.properties.translation.enabled ? entry.properties.translation.grounded : false;\n            let item = new Item(entry.uid, d.width, d.height, d.length, entry.weight, entry.quantity, validOrientations, stackingCapacity, grounded);\n            items.push(item);\n            numTotalItems += entry.quantity;\n        }\n\n        var startTime = performance.now();\n        let heuristicParams = extractHeuristicParams(params);\n        let heuristic = new CUB.heuristics.HeuParametric1(heuristicParams);\n        var result = await CUB.pack(container, items, heuristic);\n        var cubRuntime = performance.now() - startTime;\n\n        var cubRuntime2Dec = Math.round(cubRuntime / 1000 * 100) / 100;\n        var packingResult = new PackingResult(numTotalItems, cubRuntime2Dec);\n        result.packedItems.forEach(packedItem => {\n            let entry = entries[packedItem.ref.id];\n            let position = new THREE.Vector3(\n                packedItem.x + packedItem.packedWidth / 2,\n                packedItem.y + packedItem.packedHeight / 2,\n                packedItem.z + packedItem.packedLength / 2\n            );\n            let orientation = Item.ResolveOrientation(packedItem.orientation);\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\n            packingResult.packed.push(packedCargo);\n        });\n\n        result.unpackedItems.forEach(unpackedItem => {\n            let entry = entries[unpackedItem.id];\n            let unpackedQuantity = unpackedItem.quantity;\n            let unpackedCargo = new UnpackedCargo(entry, unpackedQuantity);\n            packingResult.unpacked.push(unpackedCargo);\n        });\n\n        this.Dispatch(signals.packUpdate, packingResult);\n    }\n\n    get solveAgain(){\n        return this.solverExecutionsCount > 0;\n    }\n\n    static get signals(){\n        return signals;\n    }\n\n}\n\nPacker.PackingResult = PackingResult;\nPacker.PackedCargo = PackedCargo;\nPacker.UnpackedCargo = UnpackedCargo;\n\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Volume from \"./Volume\";\nimport Container from \"./Container\";\n\nconst _weightCapacity = Symbol('weightCapacity');\nconst type = 'ContainingVolume';\n\nclass ContainingVolume extends Volume {\n    /** @param {Container} container */\n    constructor(container){\n        super();\n        \n        this.container = container;\n        this.weightCapacity = 0;\n\n        this.SetUID();\n    }\n\n    set weightCapacity(value){ this[_weightCapacity] = value; }\n    get weightCapacity(){ return this[_weightCapacity]; }\n\n    /**\n     * @param {string} [uid] - You'll rarely need to provide this\n     */\n    SetUID(uid){\n        this.uid = uid || THREE.Math.generateUUID();\n        return this.uid;\n    }\n\n    toJSON(){\n        var json = super.toJSON();\n        json.type = type;\n        json.weightCapacity = this.weightCapacity;\n        return json;\n    }\n\n    ToString(){\n        return super.ToString();\n    }\n\n    static FromJSON(data){\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\n\n        var containingVolume = new ContainingVolume();\n        containingVolume.weightCapacity = data.weightCapacity;\n        Volume.FromJSON(data, containingVolume);\n\n        return containingVolume;\n    }\n}\n\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\nconst typeofNumber = 'number';\n\nconst _maxHeight = Symbol('maxHeight');\nconst _validOrientations = Symbol('validOrientations');\n\nconst orientations = [ 'xyz', 'zyx', 'yxz', 'yzx', 'zxy', 'xzy' ];\nvar dimensions = [0, 0, 0];\n\nclass Item{\n    /**\n     * @param {string} id \n     * @param {Number} width \n     * @param {Number} height \n     * @param {Number} length \n     * @param {Number} weight \n     * @param {Number} quantity \n     * @param {Array<Number|string>} validOrientations\n     * @param {Number} stackingCapacity \n     * @param {Boolean} grounded \n     */\n    constructor(id, width, height, length, weight, quantity, validOrientations, stackingCapacity, grounded){\n        this.id = id;\n        this.width = width;\n        this.height = height;\n        this.length = length;\n        this.weight = weight;\n        /** @type {Number} */\n        this.volume = width * height * length;\n        this.quantity = quantity;\n\n        this.validOrientations = validOrientations;\n\n        this.stackingCapacity = stackingCapacity;\n        this.grounded = grounded;\n    }\n\n    /** @returns {Array<Number>} */\n    get validOrientations(){ return this[_validOrientations]; }\n    set validOrientations(value){\n        if(!value) value = orientations;\n\n        let validOrientations = [];\n        for(let i = 0; i < value.length; i++){\n            let vo = value[i];\n            let orientation = (typeof vo === typeofNumber) ? vo : orientations.indexOf(vo.toLowerCase());\n            if(orientation !== -1) validOrientations.push(orientation);\n        }\n\n        if(validOrientations.length === 0) validOrientations[0] = 'xyz' || orientations[0];\n\n        this[_validOrientations] = validOrientations;\n        this[_maxHeight] = undefined;\n    }\n\n    get xyz(){ dimensions[0] = this.width; dimensions[1] = this.height; dimensions[2] = this.length; return dimensions; }\n    get zyx(){ dimensions[0] = this.length; dimensions[1] = this.height; dimensions[2] = this.width; return dimensions; }\n    get yxz(){ dimensions[0] = this.height; dimensions[1] = this.width; dimensions[2] = this.length; return dimensions; }\n    get yzx(){ dimensions[0] = this.height; dimensions[1] = this.length; dimensions[2] = this.width; return dimensions; }\n    get zxy(){ dimensions[0] = this.length; dimensions[1] = this.width; dimensions[2] = this.height; return dimensions; }\n    get xzy(){ dimensions[0] = this.width; dimensions[1] = this.length; dimensions[2] = this.height; return dimensions; }\n\n    /** @returns {Number} */\n    get maxHeight(){\n        if(this[_maxHeight] === undefined){\n            let maxHeight = 0;\n            for(let i = 0; i < this.validOrientations.length; i++){\n                let dimensions = this.GetOrientedDimensions(this.validOrientations[i]);\n                if(dimensions[1] > maxHeight) maxHeight = dimensions[1];\n            }\n            this[_maxHeight] = maxHeight;\n        }\n        \n        return this[_maxHeight];\n    }\n\n    /** @param {Number} orientation */\n    GetOrientedDimensions(orientation){\n        switch(orientation){\n            case 0: return this.xyz;\n            case 1: return this.zyx;\n            case 2: return this.yxz;\n            case 3: return this.yzx;\n            case 4: return this.zxy;\n            case 5: return this.xzy;\n        }\n    }\n\n    ToString(){\n        let q = this.quantity, \n            d = this.width.toFixed(2) + 'x' + this.height.toFixed(2) + 'x' + this.length.toFixed(2),\n            id = this.id;\n        return q + 'x (' + d + ') - ' + id;\n    }\n\n    /** @param {Number} orientation */\n    static ResolveOrientation(orientation){\n        return orientations[orientation];\n    }\n\n    /** @param {Array<Item>} items */\n    static GetMinDimensions(items){\n        var minDimensions = [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\n\n        for(let iItem = 0, numItems = items.length; iItem < numItems; iItem++){\n            let item = items[iItem];\n            var validOrientations = item.validOrientations;\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\n                let orientation = validOrientations[iOrient];\n                let dimensions = item.GetOrientedDimensions(orientation);\n                if(dimensions[0] < minDimensions[0]) minDimensions[0] = dimensions[0];\n                if(dimensions[1] < minDimensions[1]) minDimensions[1] = dimensions[1];\n                if(dimensions[2] < minDimensions[2]) minDimensions[2] = dimensions[2];\n            }\n        }\n\n        return minDimensions;\n    }\n\n    /**\n     * @param {Item} a \n     * @param {Item} b \n     */\n    static VolumeSort(a, b){\n        if(a.volume < b.volume) return -1;\n        if(a.volume > b.volume) return 1;\n        return 0;\n    }\n\n    /**\n     * @param {Item} a \n     * @param {Item} b \n     */\n    static HeightSort(a, b){\n        if(a.maxHeight < b.maxHeight) return -1;\n        if(a.maxHeight > b.maxHeight) return 1;\n        if(a.volume < b.volume) return -1;\n        if(a.volume > b.volume) return 1;\n        return 0;\n    }\n}\n\nclass Container{\n    /**\n     * @param {string} id \n     * @param {Number} width \n     * @param {Number} height \n     * @param {Number} length \n     * @param {Number} weightCapacity \n     */\n    constructor(id, width, height, length, weightCapacity){\n        this.id = id;\n        this.width = width;\n        this.height = height;\n        this.length = length;\n        this.weightCapacity = weightCapacity;\n    }\n}\n\nexport {\n    Item,\n    Container\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/Components.js","\nimport Input from '../utils/cik/input/Input';\nimport Quality from '../utils/cik/Quality';\nimport Controller from '../scene/Controller';\nimport Renderer from '../scene/Renderer';\nimport Camera from '../scene/Camera';\nimport HUDView from './HUDView';\nimport UX from '../UX';\nimport Utils from '../utils/cik/Utils';\nimport Signaler from '../utils/cik/Signaler';\n\nconst signals = {\n    init: 'init',\n    started: 'started',\n    paused: 'paused',\n    stopped: 'stopped'\n};\n\nclass SceneSetup extends Signaler {\n    /**\n     * \n     * @param {HTMLDivElement} containerDiv \n     * @param {UX} ux \n     */\n    constructor(containerDiv, ux){\n        super();\n        \n        this.domElement = containerDiv;\n        this.ux = ux;\n    }\n\n    Init(){\n        \n        var quality = new Quality().Common(2);\n\n        var units = this.ux.params.units;\n        var controllerParams = {};\n        this.sceneController = new Controller(controllerParams);\n\n        /** @type {import('../scene/Renderer').RendererParams} */\n        var rendererParams = {clearColor: this.ux.params.backgroundColor};\n        Object.assign(rendererParams, quality);\n        this.sceneRenderer = new Renderer(rendererParams);\n        this.sceneRenderer.renderer.toneMappingExposure = 1.6;\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\n\n        /** @type {import('./Camera').CameraParams} */\n        var cameraParams = {fov: this.ux.params.fov, aspect: 1, near: 1 * units, far: 6000 * units};\n        this.cameraController = new Camera(cameraParams);\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\n\n        this.input = new Input(this.domElement);\n        this.input.camera = this.cameraController.camera;\n\n        var sceneRendererRef = this.sceneRenderer;\n        var appCameraRef = this.cameraController.camera;\n        this.input.onResize.push(function(screen){\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\n        });\n\n        // hud\n        if(this.ux.params.hud){\n            /** @type {import('../view/HUDView').HUDViewParams} */\n            var hudParams = {ux: this.ux, sceneSetup: this, container: this.sceneRenderer.renderer.domElement};\n            /** @type {import('./Camera').CameraParams} */\n            var hudCameraParams = Utils.AssignUndefined({fov: 15}, cameraParams);\n            this.hud = new HUDView(hudParams, hudCameraParams);\n            var hudCameraRef = this.hud.cameraController.camera;\n            this.input.onResize.push(function(screen){\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\n            });\n\n            this.sceneRenderer.renderer.autoClear = false;\n        }\n        // /hud\n\n        // Comeplete setup\n        var setupParams = {\n            gridHelper: false,\n        }\n\n        // Initial camera move\n\t\tthis.cameraController.position.x = 100 * units;\n\t\tthis.cameraController.position.y = 100 * units;\n        this.cameraController.position.z = 100 * units;\n        this.cameraController.SetTarget(new THREE.Vector3());\n\n        // Env\n        if(setupParams.gridHelper){\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\n            this.sceneController.AddDefault(gridHelper);\n        }\n\n        if(this.ux.params.configure){\n            this.Configure();\n        }\n\n        var scope = this;\n        return new Promise((resolve, reject) => {\n            scope.Dispatch(signals.init);\n            resolve();\n        });\n    }\n\n    Start(){\n        if(this.Update === undefined){\n            let scope = this;\n            let sceneRenderer = this.sceneRenderer;\n            let scene1 = this.sceneController.scene,\n                camera1 = this.cameraController.camera;\n                \n            if(this.ux.params.hud){\n                let hud = this.hud;\n                let scene2 = hud.scene,\n                    camera2 = hud.cameraController.camera;\n            \n                this.Update = function(timestamp){\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\n\n                    scope.input.Update();\n                    scope.cameraController.Update();\n                    hud.Update(timestamp);\n\n                    sceneRenderer.renderer.clear();\n                    sceneRenderer.Render(scene1, camera1);\n                    sceneRenderer.renderer.clearDepth();\n                    sceneRenderer.Render(scene2, camera2);\n                };\n            }\n            else{\n                this.Update = function(timestamp){\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\n\n                    scope.input.Update();\n                    scope.cameraController.Update();\n\n                    sceneRenderer.Render(scene1, camera1);\n                };\n            }\n        }\n\n        this.Update();\n        this.input.screenNeedsUpdate = true;\n        this.input.cameraNeedsUpdate = true;\n\n        this.Dispatch(signals.started);\n    }\n\n    Pause(){\n        if(this.animationFrameID){\n            cancelAnimationFrame(this.animationFrameID);\n        }\n\n        this.Dispatch(signals.paused);\n    }\n\n    Stop(){\n        if(this.animationFrameID){\n            cancelAnimationFrame(this.animationFrameID);\n        }\n        this.input.Dispose();\n        this.sceneRenderer.Dispose();\n\n        this.Dispatch(signals.stopped);\n    }\n\n    static get signals(){\n        return signals;\n    }\n\n    DefaultLights(controller, configure, helpers){\n\n        var units = this.ux.params.units;\n\n        var ambientLight = new THREE.AmbientLight( 0x404040 );\n\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\n        directionalLight.position.set(300 * units, 300 * units, 125 * units);\n        \n        controller.ambientContainer.add(ambientLight);\n        controller.ambientContainer.add(directionalLight);\n\n        var directionalLightComplem = new THREE.DirectionalLight(0xfeeedd);\n        directionalLightComplem.position.set(-200 * units, 175 * units, 125 * units);\n        \n        controller.ambientContainer.add(directionalLightComplem);\n\n        if(this.ux.params.configure && configure){\n            let Smart = require('../utils/cik/config/Smart').default;\n            let Config = require('../utils/cik/config/Config').default;\n            let Control3D = require('../utils/cik/config/Control3D').default;\n\n            let dl = directionalLight;\n            let smart = new Smart(dl, 'Directional light');\n            smart.MakeShortcut('Configure');\n            \n            let lightController = ['color', 'intensity', 'castShadow'];\n            let shadowControllers = ['shadow.bias', 'shadow.radius', 'shadow.mapSize.x', 'shadow.mapSize.y'];\n            //let sc = dl.shadow.camera as THREE.OrthographicCamera;\n            let shadowCameraControllers = Config.Unroll('#shadow.camera', 'left', 'top', 'right', 'bottom', 'near', 'far');\n\n            let dlHelper, dlCameraHelper;\n            if(helpers){\n                dlHelper = new THREE.DirectionalLightHelper(dl, 5);\n                this.sceneController.AddDefault(dlHelper);\n                dlCameraHelper = new THREE.CameraHelper(dl.shadow.camera);\n                this.sceneController.AddDefault(dlCameraHelper);\n            }\n\n            let sceneRenderer = this.sceneRenderer;\n            global.sceneRenderer = sceneRenderer;\n            let mapSize = dl.shadow.mapSize.clone();\n            function onGUIChanged(){\n                dl.shadow.camera.updateProjectionMatrix();\n                sceneRenderer.UpdateShadowMaps();\n                if(dl.shadow.map){\n                    if(dl.shadow.mapSize.manhattanDistanceTo(mapSize) > 0.0001){\n                        mapSize.copy(dl.shadow.mapSize);\n                        dl.shadow.map.dispose();\n                        dl.shadow.map = null;\n                    }\n                }\n\n                if(helpers){\n                    dlHelper.update();\n                    dlCameraHelper.update();\n                }\n            }\n\n            smart.Config('Directional light + shadow', dl, onGUIChanged, Smart.serializeModes.json,\n                ...lightController,\n                ...shadowControllers,\n                ...shadowCameraControllers\n            );\n        }\n\n        return [ambientLight, directionalLight, directionalLightComplem];\n    }\n\n    Configure(){\n\n        var Smart = require('../utils/cik/config/Smart').default;\n        var Config = require('../utils/cik/config/Config').default;\n        var Control3D = require('../utils/cik/config/Control3D').default;\n\n        var scope = this;\n\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\n        this.sceneController.AddDefault(appControl3D.control);\n\n        if(this.ux.params.hud){\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\n            this.hud.AddDefault(hudControl3D.control);\n\n            var hud = this.hud;\n            function onGUIChanged(){\n                console.log('Camera changed');\n            }\n\n            var toggle = false;\n            var control = {\n                toggleOrbitOwner: function(){\n                    if(toggle){\n                        if(!hud.cameraController.orbitControls){\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\n                        }\n                        scope.cameraController.Hold();\n                        hud.cameraController.Release();\n                    }\n                    else{\n                        scope.cameraController.Release();\n                        hud.cameraController.Hold();\n                    }\n                    toggle = !toggle;\n                },\n                hudCam: hud.cameraController,\n                print: function(){\n                    smart.config.Update();\n                    console.group('hudCam properties');\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\n                    console.groupEnd();\n                }\n            };\n\n            control.toggleOrbitOwner();\n            \n            var smart = new Smart(this, 'HUDView');\n            smart.MakeShortcut('Configure');\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\n            smart.Config(null, control, onGUIChanged, Smart.serializeModes.none,\n                'toggleOrbitOwner',\n                'print',\n                'hudCam.camera.fov', \n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \n                ...rotationControllers\n            );\n\n            console.log('HUDView config', smart.config.gui.list || smart);\n        }\n    }\n}\n\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","import Tween from \"../utils/cik/Tween\";\nimport Signaler from \"../utils/cik/Signaler\";\n\nrequire('../../min-dependencies/lib/three/controls/OrbitControls');\n\nconst epsilon = Math.pow(2, -52);\n\n/**\n * @typedef {Object} CameraParams\n * @property {Number} fov\n * @property {Number} aspect\n * @property {Number} near\n * @property {Number} far\n */\n\n/** @typedef FrameCoords @property {THREE.Vector3} position @property {THREE.Vector3} center */\n\n/** @type {FrameCoords} */\nvar tempCoords = {};\n/** @type {FrameCoords} */\nvar ownCoords = {position: new THREE.Vector3(), center: new THREE.Vector3()};\n\nvar tempVec3 = new THREE.Vector3(),\n    tempVec3_b = new THREE.Vector3();\n\nconst signals = {\n    change: 'change',\n    userChange: 'userChange'\n};\n\nclass Camera extends Signaler {\n    /**\n     * @param {CameraParams} params \n     */\n    constructor(params){\n        super();\n\n        this.params = params;\n\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\n        this.camera.name = 'UserCamera';\n\n        this.changed = false;\n\n        this.dollyAnimation = {\n            enabled: false,\n            position: Tween.Combo.RequestN(Tween.functions.ease.easeInOutQuad, .5, 0, 0, 0, 0, 0, 0),\n            lookAt: Tween.Combo.RequestN(Tween.functions.ease.easeInOutQuad, .5, 0, 0, 0, 0, 0, 0)\n        };\n\n        let scope = this;\n        function onDollyAnimationComplete(){\n            scope.dollyAnimation.enabled = false;\n        }\n        this.dollyAnimation.position.onComplete = onDollyAnimationComplete;\n        this.dollyAnimation.lookAt.onComplete = onDollyAnimationComplete;\n\n        this.dollyAnimation.position.Hook(this.position, 'x', 'y', 'z');\n\n        this.fovAnimation = {\n            enabled: false,\n            fov: new Tween(Tween.functions.ease.easeInOutQuad, 0, 0, 0)\n        };\n\n        function onFOVAnimationComplete(){\n            scope.fovAnimation.enabled = false;\n        }\n        this.fovAnimation.fov.onComplete = onFOVAnimationComplete;\n        this.fovAnimation.fov.Hook(this.camera, 'fov');\n    }\n\n    get position(){ return this.camera.position; }\n    set position(value){ this.camera.position.copy(value); this.changed = true; }\n    get rotation(){ return this.camera.rotation; }\n    set rotation(value){ this.camera.rotation.copy(value); this.changed = true; }\n\n    FirstPersonControls(container, params){\n        if(this.fpsControls === undefined && container !== undefined){\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\n\n            this.fpsControls.Hold = function(){\n                this.enabled = false;\n            };\n            this.fpsControls.Release = function(){\n                this.enabled = true;\n            };\n        }\n        \n        if(this.fpsControls !== undefined){\n            if(params !== undefined){\n                this.fpsControls.speed.set(params.speedX, params.speedY);\n                this.fpsControls.damping = params.damping;\n                this.fpsControls.momentum = params.momentum;\n                this.fpsControls.limitPhi = params.limitPhi;\n                this.fpsControls.moveSpeed = params.moveSpeed;\n                this.fpsControls.keyControls = true;\n            }\n\n            this.controls = this.fpsControls;\n        }\n    }\n\n    OrbitControls(container, params){\n        if(this.orbitControls === undefined && container !== undefined){\n\n            var lookTarget = new THREE.Vector3();\n            this.camera.getWorldDirection(lookTarget);\n            lookTarget.multiplyScalar(200).add(this.camera.position);\n\n            /** @type {THREE.EventDispatcher} */\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\n            this.orbitControls.target.copy(lookTarget);\n\n            this.dollyAnimation.lookAt.Hook(this.orbitControls.target, 'x', 'y', 'z');\n\n            let scope = this;\n            this.orbitControls.addEventListener('change', function(e){\n                scope.changed = true;\n            });\n            this.orbitControls.addEventListener('start', function(e){\n                scope.Dispatch(signals.userChange);\n            });\n            \n            this.orbitControls.Update = function(){\n                if(this.enabled){\n                    if(this.object.position.distanceTo(this.target) < 50){\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\n                        this.target.add(v);\n                    }\n                    this.update();\n                }\n            };\n            this.orbitControls.Hold = function(){\n                this.saveState();\n                this.enabled = false;\n            };\n            this.orbitControls.Release = function(){\n                this.reset();\n                this.enabled = true;\n            };\n        }\n\n        \n        params = params || {\n            maxDistance: 9000.0 * /*units*/1,\n            maxPolarAngle: Math.PI * 0.895\n        }\n        if(params !== undefined){\n            this.orbitControls.maxDistance = params.maxDistance;\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\n            this.orbitControls.autoRotate = false;\n        }\n\n        this.controls = this.orbitControls;\n    }\n\n    ToggleControls(){\n        this.Hold();\n\n        if(this.controls === this.orbitControls){\n            if(this.fpsControls){\n                this.fpsControls.LerpRotation(this.camera, 1);\n                this.FirstPersonControls();\n            }\n        }\n        else{\n            if(this.orbitControls){\n                this.OrbitControls();\n\n                // target\n                var maxDistance = 100;\n\n                var point = new THREE.Vector3(0, 0, -1);\n                var quat = new THREE.Quaternion();\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\n\n                this.SetTarget(point);\n            }\n        }\n\n        this.Release();\n    }\n\n    /** @param {THREE.Vector3} position */\n    SetTarget(position){\n        if(this.controls instanceof THREE.OrbitControls){\n            this.controls.target.copy(position);\n            this.changed = true;\n        }\n        else {\n            console.warn('SetTarget not implemented for control type:', this.controls);\n        }\n    }\n\n    /** @returns {THREE.Vector3} */\n    GetTarget(){\n        if(this.controls instanceof THREE.OrbitControls){\n            return this.controls.target;\n        }\n        else {\n            console.warn('GetTarget not implemented for control type:', this.controls);\n        }\n    }\n\n    Update(){\n        if(this.dollyAnimation.enabled){\n            this.dollyAnimation.position.Update();\n            this.dollyAnimation.lookAt.Update();\n            this.changed = true;\n        }\n\n        if(this.fovAnimation.enabled){\n            this.fovAnimation.fov.Update();\n            this.camera.updateProjectionMatrix();\n            this.changed = true;\n        }\n\n        if(this.controls !== undefined){\n            this.controls.Update();\n        }\n    }\n\n    Hold(){\n        if(this.enabled && this.controls !== undefined && this.controls.Hold){\n            this.controls.Hold();\n        }\n    }\n\n    Release(){\n        if(!this.enabled && this.controls !== undefined && this.controls.Release){\n            this.controls.Release();\n        }\n    }\n\n    /**\n     * @param {THREE.Box3} box3 \n     * @param {Number} [distanceMultiplier]\n     * @param {THREE.Vector3} [orientation]\n     * @param {Number} [fov] fov in degrees\n     * @returns {FrameCoords}\n     */\n    CalcFrameCoords(box3, distanceMultiplier, orientation, fov){\n       if(distanceMultiplier === undefined) distanceMultiplier = .75;\n\n       fov = (fov || this.camera.fov) * (Math.PI / 180);\n\n       let extent = tempVec3;\n       box3.getSize(extent);\n       let frameSize = Math.max(extent.x, extent.y, extent.z, 1);\n       let distance = Math.abs(frameSize / Math.sin(fov / 2)) * distanceMultiplier;\n       \n       let center = tempVec3_b;\n       box3.getCenter(center);\n       \n       let position = tempVec3;\n       orientation = orientation ? orientation : position.subVectors(this.camera.position, center); \n       position.copy(orientation).normalize().multiplyScalar(distance).add(center);\n       position.y = Math.abs(position.y);\n\n       tempCoords.position = position;\n       tempCoords.center = center;\n       return tempCoords;\n    }\n\n    /**\n     * @param {THREE.Box3} box3 \n     * @param {Number} [distanceMultiplier]\n     */\n    Frame(box3, distanceMultiplier){\n        let coords = this.CalcFrameCoords(box3, distanceMultiplier);\n\n        this.camera.position.copy(coords.position);\n        this.SetTarget(coords.center);\n    }\n\n    /**\n     * @param {Number} duration\n     * @param {THREE.Box3} box3 \n     * @param {Number} [distanceMultiplier]\n     */\n    TransitionToFrame(duration, box3, distanceMultiplier){\n        let endCoords = this.CalcFrameCoords(box3, distanceMultiplier);\n        this.TransitionFromToCoords(duration, undefined, endCoords);\n    }\n\n    /**\n     * @param {Number} duration\n     * @param {FrameCoords} startCoords \n     * @param {FrameCoords} endCoords \n     */\n    TransitionFromToCoords(duration, startCoords, endCoords){\n\n        if(!startCoords){\n            startCoords = ownCoords;\n            startCoords.position.copy(this.position);\n            startCoords.center.copy(this.orbitControls.target);\n        }\n\n        this.dollyAnimation.position.SetDurations(duration, duration, duration);\n        this.dollyAnimation.lookAt.SetDurations(duration, duration, duration);\n\n        let p = startCoords.position;\n        this.dollyAnimation.position.SetStartValues(p.x, p.y, p.z);\n        let tp = endCoords.position;\n        this.dollyAnimation.position.SetDeltas(tp.x - p.x, tp.y - p.y, tp.z - p.z);\n\n        p = startCoords.center;\n        this.dollyAnimation.lookAt.SetStartValues(p.x, p.y, p.z);\n        tp = endCoords.center;\n        this.dollyAnimation.lookAt.SetDeltas(tp.x - p.x, tp.y - p.y, tp.z - p.z);\n\n        this.dollyAnimation.position.Restart();\n        this.dollyAnimation.lookAt.Restart();\n        this.dollyAnimation.enabled = true;\n    }\n\n    /** @param {Number} duration @param {Number} fov */\n    TransitionToFOV(duration, fov){\n        let deltaFOV = fov - this.camera.fov;\n        if(Math.abs(deltaFOV) < epsilon) return;\n\n        this.fovAnimation.fov.duration = duration;\n        this.fovAnimation.fov.startValue = this.camera.fov;\n        this.fovAnimation.fov.delta = deltaFOV;\n        this.fovAnimation.fov.Restart();\n        this.fovAnimation.enabled = true;\n    }\n\n    /**\n     * @returns {Boolean}\n     */\n    get enabled(){\n        return this.controls && this.controls.enabled;\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","import Pool from \"./Pool\";\n\n/** \n * Tween update function\n * @param {Number} time \n * @param {Number} startValue \n * @param {Number} delta \n * @param {Number} duration\n * @returns {Number} value\n */\nfunction TweenCallback(time, startValue, delta, duration){}\n\n/**\n * On completed callback\n * @param {Tween} target\n */\nfunction TweenCompletedCallback(target){}\n\nvar clock = new THREE.Clock();\n\nfunction poolNewFN(){\n    return new Tween();\n}\n/** @param {Tween} tween */\nfunction poolResetFN(tween){\n    return tween;\n}\nvar pool = new Pool(poolNewFN, poolResetFN);\n\nconst functions = {\n    /** @type {TweenCallback} */\n    linear: function(t, b, c, d){\n        return b + c * (t / d);\n    },\n\n    ease: {\n        /** @type {TweenCallback} */\n        easeOutElastic: function(t, b, c, d) {\n            var ts=(t/=d)*t;\n            var tc=ts*t;\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\n        },\n\n        /** @type {TweenCallback} */\n        easeOutQuad: function (t, b, c, d) {\n            return -c *(t/=d)*(t-2) + b;\n        },\n\n        /** @type {TweenCallback} */\n        easeOutCubic: function (t, b, c, d) {\n            return c*((t=t/d-1)*t*t + 1) + b;\n        },\n\n        easeInOutQuad: function (t, b, c, d) {\n            if ((t/=d/2) < 1) return c/2*t*t + b;\n            return -c/2 * ((--t)*(t-2) - 1) + b;\n        }\n    },\n\n    special: {\n        /** @type {TweenCallback} */\n        pingPong: function (t, b, c, d) {\n            return Math.sin(t / d * Math.PI) * c + b;\n        }\n    }\n};\n\n/**\n * On completed callback\n * @param {TweenCombo} target\n */\nfunction TweenComboCompletedCallback(target){}\n\nclass TweenCombo{\n    /**\n     * \n     * @param {Array<Tween>} tweens \n     */\n    constructor(...tweens){\n        this.tweens = tweens;\n\n        /** @type {TweenComboCompletedCallback} */\n        this.onComplete;\n        this.completed = false;\n    }\n\n    /** @param {Array<Number>} args */\n    SetDurations(...args){ for(var i = 0; i < this.tweens.length; i++) this.tweens[i].duration = args[i]; }\n\n    /** @param {Array<Number>} args */\n    SetDeltas(...args){ for(var i = 0; i < this.tweens.length; i++) this.tweens[i].delta = args[i]; }\n\n    /** @param {Array<Number>} args */\n    SetStartValues(...args){ for(var i = 0; i < this.tweens.length; i++) this.tweens[i].startValue = args[i]; }\n\n    /**\n     * @param {Object} object \n     * @param {Array<string>} properties \n     */\n    Hook(object, ...properties){\n        for(var i = 0; i < this.tweens.length; i++){\n            this.tweens[i].Hook(object, properties[i]);\n        };\n    }\n\n    Unhook(){\n        this.tweens.forEach(tween => tween.Unhook());\n    }\n\n    /** Restarts time */\n    Restart(){\n        this.tweens.forEach(tween => tween.Restart());\n    }\n\n    /**\n     * Update tween\n     * @param {Number} [t] [0, duration]\n     */\n    Update(t){\n        var completed = true;\n        this.tweens.forEach(tween => {\n            if(tween.completed === false)\n                tween.Update(t);\n\n            completed = completed && tween.completed;\n        });\n\n        this.completed = completed;\n        if(this.completed && this.onComplete)\n            this.onComplete(this);\n    }\n\n    /**\n     * Returns tweens to pool\n     */\n    Return(){\n        this.tweens.forEach(tween => {\n            pool.Return(tween);\n        });\n    }\n\n    /**\n     * @param {TweenCallback} callback \n     * @param {Number} startValue0\n     * @param {Number} startValue1\n     * @param {Number} startValue2\n     * @param {Number} delta0\n     * @param {Number} delta1\n     * @param {Number} delta2\n     * @param {Number} duration\n     */\n    static Request3(callback, duration, startValue0, delta0, startValue1, delta1, startValue2, delta2){\n        var tween0 = pool.Request();\n        tween0.Reset(callback, startValue0, delta0, duration);\n\n        var tween1 = pool.Request();\n        tween1.Reset(callback, startValue1, delta1, duration);\n\n        var tween2 = pool.Request();\n        tween2.Reset(callback, startValue2, delta2, duration);\n\n        var combo = new TweenCombo(tween0, tween1, tween2);\n        return combo;\n    }\n\n    /**\n     * @param {TweenCallback} callback \n     * @param {Number} duration \n     * @param {Array<Number>} args startValueN, deltaN\n     */\n    static RequestN(callback, duration, ...args){\n\n        let tweens = [];\n        for(let i = 0; i < args.length; i += 2){\n            let tween = pool.Request();\n            tween.Reset(callback, args[i], args[i + 1], duration);\n            tweens.push(tween);\n        }\n\n        let combo = new TweenCombo(...tweens);\n        return combo;\n    }\n}\n\nclass Tween{\n    /**\n     * @param {TweenCallback} callback \n     * @param {Number} [startValue] \n     * @param {Number} delta \n     * @param {Number} duration \n     */\n    constructor(callback, startValue, delta, duration){\n        this.Reset(callback, startValue, delta, duration);\n        \n        /** @type {TweenCompletedCallback} */\n        this.onComplete;\n    }\n\n    /**\n     * @param {TweenCallback} callback \n     * @param {Number} [startValue]\n     * @param {Number} delta \n     * @param {Number} duration \n     */\n    Reset(callback, startValue, delta, duration){\n        this.callback = callback;\n        this.startValue = startValue;\n        this.delta = delta;\n        this.duration = duration;\n\n        if(this.startValue === undefined && this.object && this.property){\n            this.startValue = this.object[this.property];\n        }\n\n        this.Restart();\n    }\n\n    /** Restarts time */\n    Restart(){\n        this.completed = false;\n        this.startTime = clock.getElapsedTime();\n    }\n\n    /**\n     * @param {Object} object \n     * @param {string} property \n     */\n    Hook(object, property){\n        this.object = object;\n        this.property = property;\n\n        if(this.startValue === undefined){\n            this.startValue = this.object[this.property];\n        }\n    }\n\n    Unhook(){\n        this.object = this.property = undefined;\n    }\n\n    /**\n     * Update tween\n     * @param {Number} [t] [0, duration]\n     */\n    Update(t){\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\n\n        if(t >= this.duration){\n            this.completed = true;\n            let endValue = this.startValue + this.delta;\n        \n            if(this.object)\n                this.object[this.property] = endValue;\n            \n            if(this.onComplete)\n                this.onComplete(this);\n            \n            return endValue;\n        }\n\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\n        if(this.object)\n            this.object[this.property] = x;\n        \n        return x;\n    }\n\n    Return(){\n        pool.Return(this);\n    }\n\n    /**\n     * @param {TweenCallback} callback \n     * @param {Number} [startValue]\n     * @param {Number} delta \n     * @param {Number} duration \n     */\n    static Request(callback, startValue, delta, duration){\n        var tween = pool.Request();\n        tween.Reset(callback, startValue, delta, duration);\n\n        return tween;\n    }\n\n    static get functions(){\n        return functions;\n    }\n}\n\nTween.Combo = TweenCombo;\n\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js","\nconst _new = Symbol('new'),\n    _reset = Symbol('reset');\n\n/**\n * @template {T}\n */\nclass Pool{\n    /**\n     * @param {function(...args)=>T} fnNew \n     * @param {function(T, ...args)=>T} [fnReset]\n     */\n    constructor(fnNew, fnReset){\n        this.objects = [];\n\n        this[_new] = fnNew;\n        this[_reset] = fnReset;\n    }\n\n    /** Get a clean object (fnNew & fnReset) from the pool\n     * @returns {T}\n     */\n    Request(...args){\n        var object;\n\n        if(this.objects.length === 0){\n            object = this[_new](...args);\n        }\n        else{\n            object = this.objects[this.objects.length - 1];\n            --this.objects.length;\n        }\n\n        return this[_reset](object, ...args);\n    }\n\n    /** Make object available again\n     * @param {T} object \n     */\n    Return(object){\n        this.objects[this.objects.length] = object;\n    }\n}\n\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","import CargoView from \"./CargoView\";\nimport Utils from \"../utils/cik/Utils\";\nimport BoxEntry from \"../components/box/BoxEntry\";\nimport Asset from \"../components/assets/Asset\";\n\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\nconst materialTemplate = new Asset.SolidMaterialType({roughness: 1, metalness: 0, flatShading: true});\n\nconst brightnessRange = [.45, .55];\nvar hueBase = Math.random();\nfunction nextColor(){\n    let color = new THREE.Color();\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\n    hueBase = Utils.GoldenSeries(hueBase);\n    return color;\n}\n\nconst _materialSettings = Symbol('matSet');\nconst _color = Symbol('color');\n\nconst typeofNumber = 'number',\n    typeofString = 'string';\n\nclass CargoBoxView extends CargoView {\n    /**\n     * \n     * @param {BoxEntry} boxEntry \n     */\n    constructor(boxEntry){\n        super(boxEntry);\n\n        var material = materialTemplate.clone();\n\n        let colorHex = boxEntry.Description('color');\n        this[_color] = colorHex ? new THREE.Color(colorHex) : nextColor();\n        boxEntry.Description('color', this.color.getHex());\n\n        material.color = this.color;\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\n\n        this.view.add(this.mesh);\n    }\n\n    /** @returns {BoxEntry} */\n    get entry(){ return super.entry; }\n    set entry(value){\n        super.entry = value;\n        var s = value.dimensions.vec3;\n        this.SetScale(s.x, s.y, s.z);\n\n        let colorHex = value.Description('color');\n        if(colorHex) this.color = colorHex;\n    }\n\n    /** @param {Number} value */\n    set focus(value){\n        super.focus = value;\n\n        if(this[_materialSettings]) Asset.RestoreMaterial(this.mesh.material, this[_materialSettings]);\n\n        if(Math.abs(1 - value) > .0001){\n            if(this[_materialSettings] === undefined){\n                this.mesh.material = this.mesh.material.clone();\n                this[_materialSettings] = {};\n                Asset.SetMaterialFocus(this.mesh.material, value, this[_materialSettings]);\n            }\n            else{\n                Asset.SetMaterialFocus(this.mesh.material, value);\n            }\n        }\n    }\n\n    get focus(){ return super.focus; }\n\n    /** @returns {THREE.Color} */\n    get color(){ return this[_color]; }\n\n    /** @param {Number} value hex */\n    set color(value){\n        /** @type {THREE.Color} */\n        let c = this[_color];\n        if(typeof value === typeofNumber) c.setHex(value);\n        else if(typeof value === typeofString) c.setHex(Number.parseInt(value));\n        else c.copy(value);\n        if(this[_materialSettings]) this[_materialSettings].color = c.getHex();\n        else this.mesh.material.color = c;\n        this.focus = super.focus;\n    }\n\n    /**\n     * @param {Number} x \n     * @param {Number} y \n     * @param {Number} z \n     */\n    SetScale(x, y, z){\n        this.mesh.scale.set(x, y, z);\n\n        if(this.labelView) this.labelView.view.position.z = params.width / 2 + this.entry.dimensions.length / 2;\n    }\n\n    ReflectEntry(){\n        this.entry = this.entry;\n    }\n\n    /** \n     * @param {string} value \n     * @param {import('./CargoView').CargoViewLabelParams} params */\n    SetLabel(value, params){\n        super.SetLabel(value, params);\n\n        this.labelView.view.scale.y = params.height;\n        this.labelView.view.scale.x = params.width;\n        this.labelView.view.position.z = params.width / 2 + this.entry.dimensions.length / 2;\n        this.labelView.view.position.y = .001;\n    }\n\n    /**\n     * @param {Number} x in radians\n     * @param {Number} y in radians\n     * @param {Number} z in radians\n     */\n    SetRotationAngles(x, y, z){\n        this.mesh.rotation.set(x, y, z);\n    }\n\n    static GetNextColor(){\n        return nextColor();\n    }\n}\n\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","import CargoEntry from \"../components/common/CargoEntry\";\nimport Asset from \"../components/assets/Asset\";\nimport TextLabelView from \"./components/TextLabelView\";\n\n/**\n * @typedef CargoViewLabelParams\n * @property {Number} width\n * @property {Number} height\n */\n\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\nconst dummyMaterial = new Asset.TransparentMaterialType({color: 0xff0000, transparent: true, opacity: .5});\n\nconst _entry = Symbol('entry');\nconst _focus = Symbol('focus');\n\nclass CargoView {\n    /**\n     * @param {CargoEntry} entry \n     */\n    constructor(entry){\n\n        this[_entry] = entry;\n\n        /** @type {THREE.Mesh} */\n        this.mesh;\n\n        this.view = new THREE.Object3D();\n\n        this[_focus] = 1;\n    }\n\n    /** @returns {CargoEntry} */\n    get entry(){ return this[_entry]; }\n    set entry(value){\n        this[_entry] = value;\n    }\n\n    get position(){\n        return this.view.position;\n    }\n\n    set position(value){\n        this.view.position.copy(value);\n    }\n\n    /** @param {Number} value */\n    set focus(value){\n        this[_focus] = value;\n    }\n\n    get focus(){ return this[_focus]; }\n\n    ReflectEntry(){\n        \n    }\n\n    /** @param {string} value @param {CargoViewLabelParams} params */\n    SetLabel(value, params){\n        const height = 64;\n        let width = Math.floor( params.width / params.height * height );\n        if(this.labelView === undefined){\n            /** @type {import('./TextLabelView').TLVParams} */\n            let tlvParams = { font: '32px sans serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \n                textAlign: 'right', sidePadding: 16, width: width, height: height\n            };\n            let ratioToX = 64\n\n            this.labelView = new TextLabelView(tlvParams);\n            this.labelView.view.rotateY( 90 * Math.PI / 180 );\n            this.labelView.view.rotateX( -90 * Math.PI / 180 );\n            this.view.add(this.labelView.view);\n        }\n\n        this.labelView.UpdateText(value);\n    }\n\n    /**\n     * @param {CargoEntry} entry \n     */\n    static Dummy(entry){\n        var cargoView = new CargoView(entry);\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\n        return cargoView;\n    }\n\n}\n\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","import Utils from \"./utils/cik/Utils\";\nimport Visualization from \"./components/Visualization\";\nimport User from \"./components/User\";\nimport App from \"./App\";\nimport Constants from \"./Constants\";\n\n/**\n * @typedef UXParams\n * @property {Boolean} hud default = true, create hud (hud currently disabled in api)\n * @property {Boolean} configure default = false, execute helpers that allow configuration\n * @property {Number} units default = 1, conversion to unit employed, default=1 for inches, for meters: units=0.0254\n * @property {Boolean} autoUpdatePack default = true, will auto-update the packing if entries are modified or deleted\n * @property {Number} backgroundColor default = 0xfefefe\n * @property {Constants.scaleRefFigure} scaleRefFigure default = man, human figure to show as scale reference\n * @property {Number} fov camera perspective fov\n */\nconst defaultParams = {\n    hud: true,\n    configure: false,\n    units: 1,\n    autoUpdatePack: true,\n    backgroundColor: 0xfefefe,\n    scaleRefFigure: Constants.scaleRefFigure.man,\n    fov: 15\n};\n\nclass UX{\n    /**\n     * \n     * @param {UXParams} params \n     */\n    constructor(params){\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n    }\n\n    /** @ignore ignore */\n    _Bind(value){\n        /** @type {App} */\n        let app = value;\n    \n        /** Interface with visual elements */\n\t\tthis.visualization = new Visualization(app);\n\n\t\t/** Interface with user input/output */\n        this.user = new User(app);\n    }\n\n}\n\nUX.User = User;\nUX.Visualization = Visualization;\n\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import Logger from \"../utils/cik/Logger\";\nimport CargoBoxView from \"./CargoBoxView\";\nimport CargoView from \"./CargoView\";\nimport Signaler from \"../utils/cik/Signaler\";\nimport CargoGroup from \"../packer/CargoGroup\";\nimport Utils from \"../utils/cik/Utils\";\nimport CargoEntry from \"../components/common/CargoEntry\";\nimport FloatingShelf from \"./components/FloatingShelf\";\nimport Asset from \"../components/assets/Asset\";\nimport BoxEntry from \"../components/box/BoxEntry\";\nimport TextLabelView from \"./components/TextLabelView\";\nimport RaycastGroup, { RaycastCallback } from \"../utils/cik/input/RaycastGroup\";\nimport Outline from \"./components/Outline\";\nimport Tween from \"../utils/cik/Tween\";\n\n/**\n * @typedef {Object} CargoListViewParams\n * @property {import('../UX').default} ux\n * @property {Number} outlineOffset\n */\n\n/**\n * @typedef SortResult\n * @property {Number} min\n * @property {Number} max\n * @property {Number} cargoes\n */\n\nconst typeofString = 'string';\nconst epsilon = Math.pow(2, -52);\n\nconst _selectedEntryUID = Symbol('seUID');\n\n/** @type {Map<CargoView, TextLabelView>} */\nvar labels = new Map();\n\nvar tempBox = new THREE.Box3();\nvar tempVec = new THREE.Vector3();\n\nconst signals = {\n    sort: 'sort',\n    select: 'select',\n    deselect: 'deselect',\n    interact: 'interact'\n};\n\n/** @type {CargoListViewParams} */\nconst defaultParams = {\n    outlineOffset: 4\n};\n\nclass CargoListView extends Signaler {\n    /**\n     * @param {CargoListViewParams} params \n     */\n    constructor(params){\n        super();\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        this.view = new THREE.Object3D();\n        this.templatesView = new THREE.Object3D();\n        this.view.add(this.templatesView);\n\n        /** @type {Map<CargoGroup, CargoView>} */\n        this.cargoTemplateViews = new Map();\n\n        let units = this.params.ux.params.units;\n\n        // Shelf\n        /** @type {import('./components/FloatingShelf').FloatingShelfParams} */\n        let fsParams = {padding: new THREE.Vector3(10 * units, (this.params.outlineOffset + 1) * units, 10 * units), colorHex: Asset.ColorTemplates('Containers').Apply(0x000000)};\n        this.floatingShelf = new FloatingShelf(this.templatesView, fsParams);\n        this.view.add(this.floatingShelf.view);\n\n        // Interaction\n        this.raycastGroupItems = [];\n        this.raycastGroup = new RaycastGroup(this.raycastGroupItems, this.OnInteract.bind(this), \n            /** @param {CargoView} item */\n            function(item){\n                return item.view;\n            },\n            false,\n            true);\n\n        this.outline = new Outline({color: 0xffffff, opacity: 1, offsetFactor: this.params.outlineOffset * units});\n        this.view.add(this.outline.view);\n\n        // Transition\n        this.slidingAnimation = {\n            enabled: false,\n            position: Tween.Combo.RequestN(Tween.functions.ease.easeOutCubic, .5, 0, 0),\n            originalPosition: new THREE.Vector3(0, 0, 0)\n        };\n\n        let scope = this;\n        function onAnimationComplete(){\n            scope.slidingAnimation.enabled = false;\n        }\n        this.slidingAnimation.position.onComplete = onAnimationComplete;\n\n        this.slidingAnimation.position.Hook(this.view.position, 'y');\n    }\n\n    /**\n     * @param {CargoGroup} group \n     */\n    Add(group){\n        let units = this.params.ux.params.units;\n\n        let templateCargoView;\n        switch(group.entry.type){\n            case 'BoxEntry': {\n                templateCargoView = new CargoBoxView(group.entry);\n\n                let ticketParams = { width: 50 * units, height: 20 * units };\n\n                const height = 96;\n                let width = Math.floor( ticketParams.width / ticketParams.height * height );\n                /** @type {import('./TextLabelView').TLVParams} */\n                let tlvParams = { font: '64px sans-serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \n                    textAlign: 'left', sidePadding: 30, width: width, height: height\n                };\n\n                let labelView = new TextLabelView(tlvParams);\n                labelView.view.rotateY( 90 * Math.PI / 180 );\n                labelView.view.rotateX( -90 * Math.PI / 180 );\n                labelView.view.scale.y = ticketParams.height;\n                labelView.view.scale.x = ticketParams.width;\n                /** @type {BoxEntry} */\n                let boxEntry = group.entry;\n                labelView.view.position.z = ticketParams.width / 2;\n                this.view.add(labelView.view);\n\n                labelView.UpdateText(boxEntry.quantity);\n\n                labels.set(templateCargoView, labelView);\n                \n                break;\n            }\n\n            default :\n                templateCargoView = CargoView.Dummy(group.entry);\n                Logger.Warn('group.entry.type not supported by viewer,', group);\n                break;\n        }\n\n        this.cargoTemplateViews.set(group, templateCargoView);\n        this.templatesView.add(templateCargoView.view);\n\n        this.raycastGroupItems.push(templateCargoView);\n        this.raycastGroup.UpdateItems(this.raycastGroupItems);\n\n        this.Sort();\n        this.floatingShelf.Update();\n    }\n\n    /**\n     * @param {CargoGroup} group \n     */\n    UpdateGroup(group){\n        let templateCargoView = this.cargoTemplateViews.get(group);\n        templateCargoView.ReflectEntry();\n\n        this.Sort();\n        this.floatingShelf.Update();\n\n        if(this[_selectedEntryUID] === group.entry.uid) this.SetOutline(templateCargoView);\n    }\n\n    /**\n     * @param {CargoGroup} group \n     */\n    Remove(group){\n        var templateCargoView = this.cargoTemplateViews.get(group);\n        if(templateCargoView){\n\n            let raycastGroupIndex = this.raycastGroupItems.indexOf(templateCargoView);\n            if(raycastGroupIndex !== -1) this.raycastGroupItems.splice(raycastGroupIndex, 1);\n            this.raycastGroup.UpdateItems(this.raycastGroupItems);\n\n            this.cargoTemplateViews.delete(group);\n            this.templatesView.remove(templateCargoView.view);\n\n            if(this[_selectedEntryUID] === group.entry.uid) this.outline.box = false;\n\n            this.Sort();\n        }\n    }\n\n    /**\n     * RaycastCallback\n     * @param {CargoView} cargoView\n     * @param {THREE.Intersection} intersection\n     */\n    OnInteract(cargoView, intersection){\n        this.Dispatch(signals.interact, cargoView.entry);\n    }\n\n    /** @param {CargoView} cargoView */\n    Select(entryUID){\n\n        this[_selectedEntryUID] = entryUID;\n\n        if(!entryUID){\n            this.outline.box = false;\n            this.Dispatch(signals.deselect);\n        }\n        else{\n            let cargoView = this.GetTemplate(entryUID);\n            this.SetOutline(cargoView);\n            this.Dispatch(signals.select, cargoView.entry);\n        }\n    }\n\n    /** @param {CargoView} target */\n    SetOutline(target){\n        this.outline.box = target instanceof CargoBoxView ? target.mesh : target.view;\n    }\n\n    SlideUp(targetY, duration){\n        let deltaY = targetY - this.view.position.y;\n        if(Math.abs(deltaY) < epsilon) return;\n\n        this.slidingAnimation.position.SetDurations(duration);\n        this.slidingAnimation.position.SetStartValues(this.view.position.y);\n        this.slidingAnimation.position.SetDeltas(deltaY);\n        this.slidingAnimation.position.Restart();\n        this.slidingAnimation.enabled = true;\n    }\n\n    SlideDown(duration){\n        let deltaY = this.slidingAnimation.originalPosition.y - this.view.position.y;\n        if(Math.abs(deltaY) < epsilon) return;\n\n        this.slidingAnimation.position.SetDurations(duration);\n        this.slidingAnimation.position.SetStartValues(this.view.position.y);\n        this.slidingAnimation.position.SetDeltas(deltaY);\n        this.slidingAnimation.position.Restart();\n        this.slidingAnimation.enabled = true;\n    }\n\n    Update(){\n        if(this.slidingAnimation.enabled){\n            this.slidingAnimation.position.Update();\n        }\n    }\n\n    /**\n     * \n     * @param {CargoGroup|CargoEntry|string|Number} id \n     */\n    GetTemplate(id){\n        var group;\n        if(id instanceof CargoGroup){\n            group = id;\n        }\n        else if(id instanceof CargoEntry){\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\n                if(cargoGroup.entry === id) group = cargoGroup;\n            }\n        }\n        else{\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\n            }\n        }\n\n        return this.cargoTemplateViews.get(group);\n    }\n\n    /**\n     * @param {CargoView} cargoView \n     * @param {string} value \n     * @param {string} textColor css\n     */\n    UpdateLabel(cargoView, value, textColor){\n        let textLabelView = labels.get(cargoView);\n        if(textLabelView){\n            if(textColor) textLabelView.params.fontColor = textColor;\n            textLabelView.UpdateText(value);\n        }\n    }\n\n    /**\n     * @param {Map<CargoGroup, CargoView>} cargoViews \n     * @returns {Number}\n     */\n    Sort(){\n\n        this.SortMapBySize();\n\n        var units = this.params.ux.params.units;\n\n        this.view.updateMatrixWorld(true);\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\n        const padding = 5 * units,\n            start = 0;\n\n        var i = 0,\n            offset = 0;\n            \n        /**\n         * @type {SortResult}\n         */\n        var result = {min: start, max: start, cargoes: 0};\n        \n        var list = this.cargoTemplateViews.values(),\n            cargoView;\n        while( ( cargoView = list.next() ).done === false ){\n\n            cargoView.value.position.set(start, 0, 0);\n\n            tempBox.setFromObject(cargoView.value.view);\n            tempBox.applyMatrix4(worldToLocal);\n\n            tempBox.getSize(tempVec);\n            var halfSize = tempVec.x / 2;\n            if(i > 0)\n                offset += halfSize;\n\n            cargoView.value.position.set(start + offset, tempVec.y / 2 + padding, -tempVec.z / 2);\n\n            let labelView = labels.get(cargoView.value);\n            labelView.view.position.x = cargoView.value.position.x;\n            labelView.view.position.y = padding + 1 * units;\n\n            offset += halfSize + padding;\n\n            i++;\n        }\n\n        result.min = start;\n        result.max = offset;\n        result.cargoes = i;\n        this.Dispatch(signals.sort, result);\n    }\n\n    SortMapBySize(){\n        /**\n         * \n         * @param {[CargoGroup, CargoListView]} a \n         * @param {[CargoGroup, CargoListView]} b \n         */\n        function sort(a, b){\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\n        }\n\n        var list = [...this.cargoTemplateViews.entries()];\n        list.sort(sort);\n        this.cargoTemplateViews = new Map(list);\n        return;\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import { styles, Element, Draggable } from \"./UIUtils\";\nimport Config from \"./Config\";\n//import dat from \"./datGUIConsole\";\n\nconst serializeModes = Config.serializeModes;\n\nvar current = undefined,\n    onFocus = [],\n    onFocusLost = [];\n\nclass Smart {\n    /**\n     * @param {*} target \n     * @param {string} label \n     */\n    constructor(target, label){\n        this.target = target;\n        this.label = label;\n\n        var scope = this;\n        \n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\n        this.draggable = new Draggable(this.label, 250);\n        this.draggable.Add(this.gui.domElement);\n        this.draggable.closeBtn.onclick = function(){\n            scope.Hide();\n        };\n\n        var ui = Element.Add(this.draggable);\n        this.draggable.Hide();\n\n        this.onFocus = [];\n        this.onFocusLost = [];\n    }\n\n    Delete(){\n        this.Hide();\n        this.draggable.Delete();\n        this.gui.destroy();\n        this.onFocus.length = this.onFocusLost.length = 0;\n    }\n\n    UpdateGUI(){\n        Smart.UpdateGUI(this.gui);\n    }\n\n    Hide(){\n        this.visible = false;\n        this.draggable.Hide();\n        Smart.SetCurrent(undefined);\n    }\n\n    Show(){\n        if(current !== undefined){\n            if(current === this) return;\n\n            var oldPos = current.draggable.GetPosition();\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\n\n            current.Hide();\n        }\n        this.visible = true;\n        this.draggable.Show();\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\n        Smart.SetCurrent(this);\n\n        this.UpdateGUI();\n    }\n    \n    /**\n     * \n     * @param {string} folderName \n     * @param {*} target \n     * @param {Function} guiChanged \n     * @param {serializeModes} serializeMode\n     * @param {Array<string|Config.Controller>} args \n     */\n    Config(folderName, target, guiChanged, serializeMode, ...args){\n        this.config = new Config(target);\n        this.config.Track(...args);\n        this.config.Edit(guiChanged, folderName, this.gui, {serializeMode: serializeMode, save: false});\n        return this.config.gui;\n    }\n\n    /**\n     * @param {string} category \n     */\n    MakeShortcut(category){\n        Smart.MakeShortcut(category, this);\n    }\n\n    static get serializeModes(){\n        return serializeModes;\n    }\n\n    /**\n     * @param {string} category \n     * @param {Smart} target \n     */\n    static MakeShortcut(category, target){\n        Config.MakeShortcut(category, target.label, function(){\n            if(target.visible){\n                target.Hide();\n            }\n            else{\n                target.Show();\n            }\n        });\n    }\n\n    static SetCurrent(current){\n        var iFocus;\n        if(current !== undefined){\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\n                onFocusLost[iFocus](current);\n            }\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\n                current.onFocusLost[iFocus]();\n            }\n        }\n\n        current = current;\n\n        if(current !== undefined){\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\n                onFocus[iFocus](current);\n            }\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\n                current.onFocus[iFocus]();\n            }\n        }\n    }\n\n    static UpdateGUI(gui){\n        for (var i in gui.__controllers) {\n            gui.__controllers[i].updateDisplay();\n        }\n\n        var folders = Object.values(gui.__folders);\n        for(i = 0; i < folders.length; i++){\n            this.UpdateGUI(folders[i]);\n        }\n    }\n}\n\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","import RuntimeTester from \"../../debug/RuntimeTester\";\n\nconst type = 'Dimensions';\nconst _vec3 = Symbol('vec3');\n\nconst epsilon = Math.pow(2, -52);\nconst numberType = 'number';\n\nRuntimeTester.Notify('Dimensions.FromJSON', 3);\n\nclass Dimensions {\n    /**\n     * @param {Number} width \n     * @param {Number} length \n     * @param {Number} height \n     */\n    constructor(width, length, height){\n        if(width === undefined) width = 0;\n        if(length === undefined) length = 0;\n        if(height === undefined) height = 0;\n        \n        this.Set(width, length, height);\n        this[_vec3] = new THREE.Vector3();\n    }\n\n    /**\n     * @param {Number} width \n     * @param {Number} length \n     * @param {Number} height \n     */\n    Set(width, length, height){\n        /** @type {Number} */\n        this.width = width;\n        /** @type {Number} */\n        this.length = length;\n        /** @type {Number} */\n        this.height = height;\n    }\n\n    /**\n     * Returns a THREE.Vector3 representation of the dimensions\n     * Beware of ordering: x=width, y=height and z=length\n     * @returns {THREE.Vector3}\n     */\n\n    \n\n    get vec3(){\n        return this[_vec3].set(this.width, this.height, this.length);\n    }\n\n    get volume(){\n        return this.width * this.height * this.length;\n    }\n\n    Abs(){\n        if(this.width < 0) this.width = -this.width;\n        if(this.length < 0) this.length = -this.length;\n        if(this.height < 0) this.height = -this.height;\n        return this;\n    }\n\n    Compare(dimensions){\n        var d = this.volume - dimensions.volume;\n        if(d < -epsilon) return -1;\n        if(d > epsilon) return 1;\n        return 0;\n    }\n\n    Copy(dimensions){\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\n    }\n\n    Clone(){\n        var dimensions = new Dimensions(this.width, this.length, this.height);\n        return dimensions;\n    }\n\n    ToString(){\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\n    }\n\n    toJSON(){\n        return {\n            type: type,\n            width: this.width,\n            length: this.length,\n            height: this.height\n        };\n    }\n\n    static IsVolume(dimensions){\n        return Dimensions.Assert(dimensions) \n            && dimensions.width > epsilon\n            && dimensions.length > epsilon\n            && dimensions.height > epsilon\n        ;\n    }\n\n    static FromJSON(data){\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\n\n        var dimensions = new Dimensions(data.width, data.length, data.height).Abs();\n        return dimensions;\n    }\n\n    static Assert(dimensions){\n        return dimensions instanceof Dimensions\n            && typeof dimensions.width === numberType\n            && typeof dimensions.length === numberType\n            && typeof dimensions.height === numberType\n        ;\n    }\n}\n\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","\nconst active = true;\nvar RuntimeTester = {\n    Notify: function(){},\n    Test: function(){},\n    Log: function(){\n        return 'RuntimeTester is not active';\n    }\n};\n\nif(active){\n\n    /** @type {Map<string, Test>} */\n    var tests = new Map();\n\n    class TestLog{\n        constructor(){\n            this.successes = [];\n            this.failures = [];\n        }\n\n        /** @param {Trial} trial */\n        Succeeded(trial){\n            this.successes.push(trial);\n        }\n\n        /** @param {Trial} trial */\n        Failed(trial){\n            this.failures.push(trial);\n        }\n    }\n\n    class Test{\n        constructor(title, maximumRuns){\n            this.title = title;\n            this.maximumRuns = isNaN(maximumRuns) ? Number.MAX_SAFE_INTEGER : maximumRuns;\n\n            /** @type {Array<Trial>} */\n            this.trials = [];\n            this.runsCount = 0;\n\n            this.log = new TestLog();\n        }\n\n        TryInstance(testFunction, expectedResult){\n            if(this.runsCount < this.maximumRuns){\n                let trial = new Trial(testFunction, expectedResult).BindTo(this);\n                this.trials.push(trial);\n                trial.Execute();\n\n                if(trial.success) this.log.Succeeded(trial);\n                else this.log.Failed(trial);\n\n                this.runsCount++;\n            }\n        }\n\n        Log(){\n            let log = {\n                succeeded: this.log.failures.length === 0,\n                failures: null\n            };\n\n            if(this.log.failures.length > 0){\n                log.failures = this.log.failures\n            }\n\n            return log;\n        }\n    }\n\n    class TrialLog{\n        constructor(){\n            this.result = undefined;\n            this.error = undefined;\n        }\n    }\n\n    class Trial{\n        /**\n         * @param {Function} testFunction \n         * @param {*} expectedResult \n         */\n        constructor(testFunction, expectedResult){\n            this.testFunction = testFunction;\n            this.expectedResult = expectedResult;\n\n            this.log = new TrialLog();\n        }\n\n        /** @param {Test} test */\n        BindTo(test){\n            this.test = test;\n            return this;\n        }\n\n        Execute(){\n            let result = null;\n            try{\n                result = this.testFunction();\n            }\n            catch(error){\n                this.log.error = error;\n                console.warn('RuntimeTester.error:', error);\n            }\n\n            this.log.result = result;\n        }\n\n        get success(){\n            let success = this.log.result === this.expectedResult;\n            return success;\n        }\n    }\n\n    RuntimeTester = class RuntimeTester{\n\n        /**\n         * @param {string} title - also a unique id\n         * @param {Number} [maximumRuns] Number.MAX_SAFE_INTEGER\n         */\n        static Notify(title, maximumRuns){\n            if(active === false) return false;\n\n            let test = new Test(title, maximumRuns);\n            tests.set(title, test);\n            return test;\n        }\n\n        /**\n         * @param {string} title - also a unique id\n         * @param {Function} testFunction \n         * @param {*} expectedResult \n         */\n        static Test(title, testFunction, expectedResult){\n            if(active === false) return false;\n\n            let test = tests.get(title);\n            if(!test){\n                console.warn('RuntimeTester was not notified of :' + title);\n                test = RuntimeTester.Notify(title, maximumRuns);\n            }\n\n            test.TryInstance(testFunction, expectedResult);\n            return test;\n        }\n\n        static Log(){\n            if(active === false) return 'RuntimeTester is not active';\n\n            let log = {\n                pass: true,\n                successful: [],\n                failed: [],\n                skipped: []\n            };\n\n            let testValues = tests.values();\n\n            for(let test of testValues){\n                let testRuns = test.runsCount;\n                if(testRuns === 0){\n                    log.skipped.push(test);\n                }\n                else{\n                    let testSuccessful = test.log.failures.length === 0;\n                    if(testSuccessful){\n                        log.successful.push(test);\n                    }\n                    else{\n                        log.pass = false;\n                        log.failed.push(test);\n                    }\n                }\n            }\n\n            return log;\n        }\n    };\n}\n\nexport default RuntimeTester;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/RuntimeTester.js","\nclass Resources{\n    constructor(){\n        this.texturesPath = '';\n    }\n}\n\nexport default Resources;\n\n\n// WEBPACK FOOTER //\n// ./src/api/Resources.js","import CargoEntry from \"../components/common/CargoEntry\";\nimport Cargo from \"./Cargo\";\n\n\nclass CargoGroup {\n    /**\n     * \n     * @param {CargoEntry} entry\n     */\n    constructor(entry){\n        this.entry = entry;\n\n        /** @type {Array<Cargo>} */\n        this.cargoes = [];\n\n        this.template = new Cargo(this);\n        this.quantity = this.entry.quantity;\n    }\n\n    get quantity(){\n        return this.cargoes.length;\n    }\n\n    set quantity(value){\n        var currentQuantity = this.cargoes.length;\n        if(value < currentQuantity){\n            this.cargoes.length = value;\n            this.entry.quantity = value;\n        }\n        else if(value > currentQuantity){\n            for(var i = currentQuantity; i < value; i++){\n                this.cargoes[i] = this.template.Clone();\n            }\n        }\n    }\n\n    ToString(){\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\n\n        return output;\n    }\n\n}\n\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","\nfunction stopPropagation(e){\n    e.stopPropagation();\n}\n\nvar stylesheet;\n\n/** @param {string|Array<string>} css */\nfunction createCSS(css){\n    if(stylesheet === undefined){\n        stylesheet = document.createElement('style');\n        stylesheet.type = 'text/css';\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\n    }\n    if(css instanceof Array)\n        css = css.join('\\n');\n    \n    if(css.length > 1) stylesheet.innerHTML += css + '\\n';\n}\n\ncreateCSS([\n    '@keyframes wiggle {',\n    '    20% { transform: rotate(5deg); }',\n    '    50% { transform: rotate(0deg); }',\n    '    75% { transform: rotate(-5deg); }',\n    '   100% { transform: rotate(0deg); }',\n    '}'\n]);\n\nconst styles = {\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\n    UIHideMenu: 'display: none !important;',\n\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\n    \n}\n\nclass Element {\n\n    /**\n     * @property {HTMLElement} domElement\n     */\n\n    constructor(){\n        /**\n         * @type {HTMLElement}\n         */\n        this._domElement;\n    }\n\n    set domElement(value){\n        if(this._domElement){\n            this._domElement.removeEventListener('mousedown', stopPropagation);\n            this._domElement.removeEventListener('mouseup', stopPropagation);\n        }\n\n        this._domElement = value;\n\n        this._domElement.addEventListener('mousedown', stopPropagation);\n        this._domElement.addEventListener('mouseup', stopPropagation);\n    }\n\n    get domElement(){\n        return this._domElement;\n    }\n\n    EnableChildInput(){\n        if(this._domElement){\n            this._domElement.removeEventListener('mousedown', stopPropagation);\n            this._domElement.removeEventListener('mouseup', stopPropagation);\n        }\n    }\n\n    Hide(){\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\n    }\n    \n    Show(){\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\n    }\n\n    Remove(){\n        if(this._domElement){\n            this._domElement.removeEventListener('mousedown', stopPropagation);\n            this._domElement.removeEventListener('mouseup', stopPropagation);\n\n            this._domElement.remove();\n            delete this._domElement;\n        }\n    }\n\n    get opacity(){\n        return parseFloat(this.domElement.style.opacity);\n    }\n\n    set opacity(value){\n        this.domElement.style.opacity = value;\n    }\n\n    static _Span(text, attributes){\n        return {\n            type: 'span',\n            label: text, \n            attributes: attributes\n        };\n    }\n\n    static Span(text, attributes){\n        var _span = this._Span(text, attributes);\n        return crel(_span.type, _span.attributes, _span.label);\n    }\n\n    /**\n     * \n     * @param {HTMLElement} element \n     * @param {string} style \n     */\n    static AddStyle(element, style){\n        let eStyle = element.style.cssText;\n        let index = eStyle.indexOf(style);\n        if(index === -1){\n            element.style.cssText += style;\n        }\n    }\n\n    /**\n     * \n     * @param {HTMLElement} element \n     * @param {string} style \n     */\n    static RemoveStyle(element, style){\n        element.style.cssText = element.style.cssText.replace(style, '');\n    }\n\n    static get CreateCSS(){\n        return createCSS;\n    }\n\n    static Add(element){\n        document.body.appendChild(element.domElement);\n    }\n}\n\nconst widths = {\n    small: 162,\n    medium: 242,\n    large: 362\n};\n\nclass Draggable extends Element {\n    constructor(title, width){\n\n        super();\n\n        var dom;\n\n        var move = function(xpos, ypos){\n            dom.style.left = xpos + 'px';\n            dom.style.top = ypos + 'px';\n        };\n\n        var diffX = 0,\n            diffY = 0;\n        var eWi = 0,\n            eHe = 0,\n            cWi = 0,\n            cHe = 0;\n\n        var onMouseMove = function(evt){\n            evt = evt || window.event;\n            var posX = evt.clientX,\n                posY = evt.clientY,\n                aX = posX - diffX,\n                aY = posY - diffY;\n                if (aX < 0) aX = 0;\n                if (aY < 0) aY = 0;\n                if (aX + eWi > cWi) aX = cWi - eWi;\n                if (aY + eHe > cHe) aY = cHe -eHe;\n            move(aX, aY);\n        };\n        \n        var startMoving = function(evt){\n            var p = dom.parentNode;\n            var container = (p !== undefined && p !== null) ? p : window;\n            container = document.body;\n            evt = evt || window.event;\n            var posX = evt.clientX,\n                posY = evt.clientY,\n            divTop = dom.style.top,\n            divLeft = dom.style.left;\n\n            eWi = parseInt(dom.style.width);\n            eHe = parseInt(dom.style.height);\n            cWi = parseInt(container.style.width);\n            cHe = parseInt(container.style.height);\n\n            container.style.cursor='move';\n            divTop = divTop.replace('px','');\n            divLeft = divLeft.replace('px','');\n            diffX = posX - divLeft;\n            diffY = posY - divTop;\n            document.addEventListener('mousemove', onMouseMove);\n        };\n        \n        var stopMoving = function(){\n            var p = dom.parentNode;\n            var container = (p !== undefined && p !== null) ? p : window;\n            container = document.body;\n            container.style.cursor = 'default';\n            document.removeEventListener('mousemove', onMouseMove);\n        };\n\n        if(width === undefined) width = widths.medium;\n        var left = 60 + Math.floor(Math.random() * 160),\n            top = 60 + Math.floor(Math.random() * 60);\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\n        dom = crel('div', {style: domStyle});\n        var head = crel('div', {style: 'display: flex;'});\n        dom.appendChild(head);\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\n        \n        var scope = this;\n        var close = function(){\n            scope.Close();\n        };\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\n        head.appendChild(closeBtn);\n        head.appendChild(header);\n\n        dom.closeBtn = closeBtn;\n\n        this.domElement = dom;\n        this.EnableChildInput();\n        this.closeBtn = closeBtn;\n    }\n\n    Close(){\n        this.domElement.remove();\n    }\n\n    Add(elt){\n        this.domElement.appendChild(elt);\n    }\n\n    GetPosition(){\n        var style = window.getComputedStyle(this.domElement),\n            left = parseFloat(style.left),\n            top = parseFloat(style.top);\n        \n        return {x: left, y: top};\n    }\n\n    SetPosition(x, y){\n        this.domElement.style.left = x + 'px';\n        this.domElement.style.top = y + 'px';\n    }\n\n    static get widths(){\n        return widths;\n    }\n}\n\nexport {\n    styles,\n    Element,\n    Draggable\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","\nrequire('../../../../min-dependencies/lib/three/controls/TransformControls');\n\nconst spaces = {\n    world: 'world',\n    local: 'local'\n};\n\nconst modes = {\n    translate: 'translate',\n    rotate: 'rotate',\n    scale: 'scale'\n};\n\n/**\n * @type {Object<Control3D>}\n */\nvar defaultControls = {};\n\nclass Control3D {\n\n    /**\n     * @param {THREE.Camera} camera \n     * @param {HTMLElement} domElement \n     */\n    constructor(camera, domElement){\n        this.camera = camera;\n        this.control = new THREE.TransformControls(this.camera, domElement);\n        this.control.addEventListener('change', this.Update.bind(this));\n\n        this.control.traverse(function(child){\n            child.renderOrder = 2;\n        });\n\n        this.visible = false;\n    }\n\n    get visible(){\n        return this.control.visible;\n    }\n\n    set visible(value){\n        this.control.visible = value;\n        if(value === false){\n            this.Detach();\n        }\n    }\n\n    Attach(target){\n        this.control.attach(target);\n    }\n\n    Detach(){\n        this.control.detach();\n    }\n\n    Toggle(target){\n        if(this.control.object){\n            this.control.detach();\n        }\n        else{\n            this.control.attach(target);\n        }\n    }\n\n    Update(){\n        this.control.update();\n    }\n\n    get space(){\n        return this.control.space;\n    }\n\n    set space(value){\n        this.control.space = value;\n    }\n\n    // translate || rotate || scale\n    set mode(value){\n        this.control.setMode(value);\n    }\n\n    static get spaces(){\n        return spaces;\n    }\n\n    static get modes(){\n        return modes;\n    }\n\n    /**\n     * @param {string} id \n     * @param {THREE.Camera} camera \n     * @param {HTMLElement} domElement \n     * @returns {Control3D}\n     */\n    static Configure(id, camera, domElement){\n        var control = new Control3D(camera, domElement);\n        defaultControls[id] = control;\n        return control;\n    }\n\n    /**\n     * @returns {Control3D}\n     */\n    static Request(id){\n        return defaultControls[id];\n    }\n}\n\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import Signaler from \"../utils/cik/Signaler\";\nimport CargoEntry from \"../components/common/CargoEntry\";\nimport CargoGroup from \"./CargoGroup\";\nimport BoxEntry from \"../components/box/BoxEntry\";\n\nconst stringType = 'string';\n\nconst signals = {\n    groupAdded: 'groupAdded',\n    groupRemoved: 'groupRemoved',\n    groupModified: 'groupModified'\n};\n\nclass CargoList extends Signaler{\n    constructor(){\n        super();\n\n        /** @type {Map<string, CargoGroup>} */\n        this.groups = new Map();\n    }\n\n    /** Adds a new CargoGroup\n     * @param {CargoEntry} entry \n     */\n    Add(entry){\n        var group = new CargoGroup(entry);\n\n        this.groups.set(entry.uid, group);\n        this.Dispatch(signals.groupAdded, group);\n    }\n\n    /** Adds a new CargoGroup\n     * @param {CargoEntry} entry \n     */\n    Modify(entry){\n        var group = this.groups.get(entry.uid);\n        this.Dispatch(signals.groupModified, group);\n    }\n\n    /** Removes the CargoGroup using its uid\n     * @param {string} uid \n     */\n    Remove(uid){\n        var group = this.groups.get(uid);\n        if(group){\n            this.groups.delete(uid);\n            this.Dispatch(signals.groupRemoved, group);\n        }\n    }\n\n    /** @param {string} entryUID @returns {BoxEntry} the entry if it exists */\n    GetEntry(entryUID){\n        if(this.groups.has(entryUID)) return this.groups.get(entryUID).entry;\n    }\n\n    get ready(){\n        return this.groups.size > 0;\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","import Container from \"./container/Container\";\nimport Signaler from \"../utils/cik/Signaler\";\n\nconst signals = {\n    containerAdded: 'containerAdded'\n};\n\nconst _currentIndex = Symbol('currentIndex');\n\nclass PackingSpace extends Signaler {\n    constructor(){\n        super();\n        \n        this[_currentIndex] = -1;\n\n        /**\n         * @type {Container}\n         */\n        this.containers = [];\n    }\n\n    /** @param {Container} container */\n    AddContainer(container){\n        this.containers.push(container);\n        this[_currentIndex]++;\n\n        this.Dispatch(signals.containerAdded, container);\n    }\n\n    /** @returns {Container} */\n    get current(){\n        var currentIndex = this[_currentIndex];\n        if(currentIndex !== -1){\n            return this.containers[currentIndex];\n        }\n    }\n\n    get ready(){\n        return this[_currentIndex] !== -1;\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","import Debug from \"../../debug/Debug\";\nimport Region from \"./core/Region\";\n\nexport const debugging = false;\n\nif(debugging){\n    Debug.app.sceneSetup.input.ListenKeys(['right', 'space']);\n}\n\nexport function sleep(ms, force) {\n    return new Promise(resolve => {\n        if(debugging || force) setTimeout(resolve, ms);\n        else resolve();\n    });\n}\n\nexport function debugLog(...args){\n    console.log(...args);\n}\n\nexport function keypress(ms, force) {\n    return new Promise(resolve => {\n        if(debugging || force){\n            let tid = undefined;\n            function execute(){\n                if(tid !== undefined) clearTimeout(tid);\n                removeEventListener('keydown', execute);\n                resolve();\n            }\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\n            addEventListener('keydown', execute);\n        }\n        else{\n            resolve();\n        }\n    });\n}\n\n/**\n * @param {Region} region * @param {Number} color \n */\nexport function debugRegion(region, color, solid, duration, checkered){\n    var x = region.x, y = region.y, z = region.z, w = region.width, h = region.height, l = region.length;\n    var debugUID = Debug.Viz.DrawVolume(x + w/2, y + h/2, z + l/2, w, h, l, color || 0xaaffff, duration || -1, !Boolean(solid), checkered);\n    return debugUID;\n}\n\n/** @param {Array<string>} */\nexport function debugClear(uids){\n    if(uids){\n        uids.forEach(uid => {\n            Debug.Viz.RemoveObjectByUID(uid);\n        });\n    }\n    else{\n        Debug.Viz.ClearAll();\n    }\n}\n\nfunction numberFormatDefault(n){ return n; }\n\nexport function numberFormat(n, d){\n    if(n > Number.MAX_SAFE_INTEGER - 2) return 'MAX';\n    let nStr = Math.round(n) !== n ? n.toFixed(d) : n;\n    return nStr;\n}\n\n/** @typedef FormatParams @property {Function} nf number formatting function */\n/** @param {string} str @param {FormatParams} params @param {Array<*>} args */\nexport function format(str, params, ...args){\n    if(params.nf === undefined) params.nf = numberFormatDefault;\n    let index = 0;\n    while( (index = str.indexOf('@', index)) !== -1 ){\n        if(str[index - 1] !== '\\\\'){\n            let a = args.shift();\n            if(typeof a === 'number') a = params.nf(a);\n            str = str.replace('@', a);\n        }\n        index += 1;\n    }\n    return str;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/CUBDebug.js","import { epsilon, smallValue, smallValueSqrt } from \"../core/Math2D\";\nimport { Item } from \"../core/Components\";\nimport { PackedContainer } from \"../core/PackedComponents\";\nimport Region from \"../core/Region\";\nimport RegionsTree from \"../core/RegionsTree\";\nimport { debugLog, sleep } from '../CUBDebug';\n\nclass HeuristicParams {\n    constructor(){\n    }\n}\n\nclass HeuristicResult{\n    /** @param {Region} containingRegion @param {Region} packedRegion @param {Number} orientation */\n    constructor(containingRegion, packedRegion, orientation){\n        this.containingRegion = containingRegion;\n        this.packedRegion = packedRegion;\n        this.orientation = orientation;\n    }\n}\n\nconst _items = Symbol('items');\nconst _packedContainer = Symbol('packedContainer');\nconst _regionsTree = Symbol('regionsTree');\nconst _workingItem = Symbol('workingItem');\n\nclass HeuristicWorkingSet{\n    /** @param {HeuristicParams} params */\n    constructor(params){\n        this.params = params;\n    }\n\n    /** @param {Array<Item>} items */\n    SetItems(items){ this[_items] = items.slice(); }\n    /** @param {Array<Item>} value */\n    set items(value){ throw Error('Use HeuristicWorkingSet.SetItems(items) instead.'); }\n    get items(){ return this[_items]; }\n\n    /** @param {PackedContainer} packedContainer */\n    SetPackedContainer(packedContainer){ this[_packedContainer] = packedContainer; }\n    /** @param {PackedContainer} value */\n    set packedContainer(value){ throw Error('Use HeuristicWorkingSet.SetPackedContainer(packedContainer) instead.'); }\n    get packedContainer(){ return this[_packedContainer]; }\n\n    /** @param {RegionsTree} regionsTree */\n    SetRegionsTree(regionsTree){ this[_regionsTree] = regionsTree; }\n    /** @param {RegionsTree} value */\n    set regionsTree(value){ throw Error('Use HeuristicWorkingSet.SetRegionsTree(regionsTree) instead.'); }\n    get regionsTree(){ return this[_regionsTree]; }\n\n    /** @param {Item} item @returns {Boolean} */\n    Validate(item){\n        return item.volume > epsilon && this.packedContainer.WeightPass(item.weight);\n    }\n\n    /** Validates the item and assign it\n     *  @param {Item} item @returns {Boolean} */\n    SetWorkingItem(item){\n        if(this.Validate(item)){\n            this[_workingItem] = item;\n            return true;\n        }\n        \n        this[_workingItem] = undefined;\n        return false;\n    }\n\n    /** @param {Item} value */\n    set workingItem(value){ throw Error('Use HeuristicWorkingSet.SetWorkingItem(item) instead.'); }\n    get workingItem(){ return this[_workingItem]; }\n\n    /** @param {Region} region @returns {Heuristic.Result} */\n    FitFunction(region){\n        // Override this with heuristic algorithm\n    }\n\n    /** @returns {Heuristic.Result} */\n    Fit(){\n        let result = this.regionsTree.Find(this.FitFunction, this);\n        return result;\n    }\n\n    /** @returns {false | Item} */\n    async NextItem(){\n        if(this.items === undefined || this.items.length === 0) return false;\n\n        let index = this.items.length - 1;\n        let item = this.items[index];\n        if(item.quantity === 0){\n            this.items.splice(index, 1);\n            return this.NextItem();\n        }\n\n        return item;\n    }\n\n    /** @param {Item} item */\n    RemoveItem(item){\n        let index = this.items.indexOf(item);\n        if(index !== -1) this.items.splice(index, 1);\n    }\n}\n\nclass Heuristic{\n    /** @param {HeuristicParams} params @param {typeof HeuristicWorkingSet} workingSetType */\n    constructor(params, workingSetType){\n        this.params = params;\n\n        this.workingSet = new workingSetType(this.params);\n    }\n\n    NextItem(){\n        return this.workingSet.NextItem();\n    }\n\n    /** @param {Item} item */\n    Unpack(item){\n        this.workingSet.RemoveItem(item);\n    }\n\n    /** @param {Item} item @returns {HeuristicResult} */\n    Fit(item){ return false; }\n}\n\nHeuristic.Params = HeuristicParams;\nHeuristic.WorkingSet = HeuristicWorkingSet;\nHeuristic.Result = HeuristicResult;\n\nexport default Heuristic;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/heuristics/Heuristic.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 35\n// module chunks = 0","/*\nconst _callback = Symbol('callback');\n/** @returns {function} /\nget callback(){ return this[_callback]; }\nset callback(value){\n    this[_callback] = value;\n}\n*/\n\nclass UpdateComponent{\n    /**\n     * \n     * @param {Boolean} active \n     * @param {Number} interval \n     * @param {function(Number)} callback\n     */\n    constructor(active, interval, callback){\n        this.active = active === undefined ? false : active;\n        this.interval = interval === undefined ? 1 / 30 : interval;\n        this.callback = callback;\n        this.lastUpdateTime = 0;\n    }\n\n    /**\n     * @param {Number} now \n     */\n    Update(now){\n        this.lastUpdateTime = now;\n        this.callback(now);\n    }\n}\n\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\n/**\n * RaycastCallback\n * \n * @callback RaycastCallback\n * @param {Object} obj\n * @param {THREE.Intersection} intersection\n */\n\n /**\n  * Mapping function\n  * \n  * @callback RaycastMapping\n  * @param {Object} obj\n  */\n\nclass RaycastGroup {\n\n    /**\n     * \n     * @param {Array<THREE.Object3D>} items \n     * @param {RaycastCallback} callback \n     * @param {RaycastMapping} collectionQuery \n     * @param {Boolean} updateProperty \n     * @param {Boolean} recursive \n     */\n    constructor (items, callback, collectionQuery, updateProperty, recursive){\n        /**\n         * @type {Boolean}\n         */\n        this.enabled = true;\n\n        this.items = items;\n        this.callback = callback;\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\n        this.recursive = recursive !== undefined ? recursive : false;\n\n        if(collectionQuery === undefined){\n            this.raycastItems = this.items;\n        }\n        else{\n            this.raycastItems = [];\n            this.collectionQuery = collectionQuery;\n            this.GetRaycastItems(this.collectionQuery);\n        }\n    }\n\n    GetRaycastItems(collectionQuery){\n        for(var iItem = 0; iItem < this.items.length; iItem++){\n            var rItem = collectionQuery(this.items[iItem]);\n            if(rItem !== undefined){\n                this.raycastItems.push(rItem);\n            }\n            else{\n                this.items.splice(iItem, 1);\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\n            }\n        }\n    }\n\n    UpdateItems(items, collectionQuery){\n        this.items = items;\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\n\n        if(collectionQuery === undefined){\n            this.raycastItems = this.items;\n        }\n        else{\n            this.raycastItems.length = 0;\n            this.collectionQuery = collectionQuery;\n            this.GetRaycastItems(this.collectionQuery);\n        }\n    }\n\n    UpdateRaycastItems(){\n        this.raycastItems.length = 0;\n        for(var i = 0; i < this.items.length; i++){\n            let raycastItem = this.collectionQuery(this.items[i]);\n            if(raycastItem) this.raycastItems.push(raycastItem);\n        }\n    }\n\n    Raycast(raycaster){\n        if(this.enabled === false) return;\n\n        \n        if(this.updateProperty){\n            this.UpdateRaycastItems();\n        }\n        \n        var raycastItems = this.raycastItems;\n        \n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\n        if (intersects.length > 0) {\n            if(this.collectionQuery){\n                var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\n                if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\n            }\n            else{\n                this.callback(intersects[0].object, intersects[0]);\n            }\n        }\n    }\n\n    BubbleUpForIndex(child, collection){\n        var nestLimit = 100;\n        var numCollection = collection.length;\n        while(child !== null && nestLimit-- > 0){\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\n            child = child.parent;\n        }\n        return -1;\n    }\n}\n\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","\nclass Controller {\n    constructor(params){\n\n        this.params = params;\n\n        // Containers\n        this.itemsContainer = new THREE.Object3D();\n        this.itemsContainer.name = \"itemsContainer\";\n        this.miscContainer = new THREE.Object3D();\n        this.miscContainer.name = \"miscContainer\";\n        this.ambientContainer = new THREE.Object3D();\n        this.ambientContainer.name = \"ambientContainer\";\n        this.defaults = new THREE.Object3D();\n        this.defaults.name = \"defaults\";\n\n        // Scene\n        this.scene = new THREE.Scene();\n\n        // Setup rest\n        this.scene.add(this.itemsContainer);\n        this.scene.add(this.miscContainer);\n        this.scene.add(this.ambientContainer);\n        this.scene.add(this.defaults);\n    }\n\n    Add(object, container){\n        if(container === undefined) container = this.miscContainer;\n        container.add(object);\n    }\n\n    AddDefault(object){\n        this.defaults.add(object);\n    }\n\n    Remove(object){\n        if(typeof object === 'string'){\n            var objName = object;\n            object = this.itemsContainer.getObjectByName(objName);\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\n            if(object === undefined) return;\n        }\n        this.itemsContainer.remove(object);\n        this.miscContainer.remove(object);\n    }\n}\n\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","import CargoEntry from '../components/common/CargoEntry';\nimport BoxEntry from '../components/box/BoxEntry';\nimport CargoBoxView from './CargoBoxView';\nimport CargoView from './CargoView';\nimport Utils from '../utils/cik/Utils';\nimport { Transition, Slide } from '../utils/cik/transitions/Transition';\nimport Asset from '../components/assets/Asset';\n\nconst epsilon = Math.pow(2, -52);\n\nvar tempBox3 = new THREE.Box3();\nvar tempVec3 = new THREE.Vector3();\n\n\n/**\n * @typedef {Object} EntryInputViewParams\n * @property {import('../UX').default} ux\n * @property {SceneSetup} sceneSetup\n * @property {scaleFigure} scaleFigure\n */\n\nconst _scaleFigure = Symbol('scaleFigure');\nconst scaleFigure = {\n    man: 'man',\n    woman: 'woman',\n    none: 'none'\n};\n\n/** @type {EntryInputViewParams} */\nconst defaultParams = {\n    scaleFigure: scaleFigure.man\n};\n\nclass EntryInputView{\n    /** @param {EntryInputViewParams} params */\n    constructor(params){\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n        const scope = this;\n\n        this.view = new THREE.Object3D();\n        this.preview = new THREE.Object3D();\n        this.view.add(this.preview);\n\n        /** @type {Map<string, CargoView>} */\n        this.previewTypes = new Map();\n\n        let units = this.params.ux.params.units;\n        this.offsetX = 0;\n\n        // scale ref\n        const height = 71 * units;\n\n        let material = new THREE.MeshBasicMaterial({color: 0x000000, transparent : true, side: THREE.DoubleSide});\n        Asset.SetTextureMap('scaleref-alphaMap.jpg', material, 'alphaMap').then( (alphaMap) => {\n            alphaMap.repeat.setX(.5);\n        });\n\n        let refMesh = new THREE.Mesh(\n            new THREE.PlaneGeometry(height / 2, height, 1, 1),\n            material\n        );\n\n        this.offsetX = 60 * units;\n        refMesh.position.x = this.offsetX;\n\n        this.view.add(refMesh);\n        this.refMesh = refMesh;\n        this.scaleFigure = this.params.scaleFigure;\n\n        tempBox3.setFromObject(this.refMesh);\n        tempBox3.getSize(tempVec3);\n        this.offsetX -= tempVec3.x / 2;\n\n        let bkgMesh = new THREE.Mesh(\n            new THREE.PlaneGeometry(height * 6, height * 1.8, 1, 1),\n            new THREE.MeshBasicMaterial({color: 0xffffff, depthWrite: false, depthFunc: THREE.NeverDepth, side: THREE.DoubleSide})\n        );\n\n        bkgMesh.position.z = -2 * units;\n\n        this.view.add(bkgMesh);\n\n        this.rotate = false;\n\n        this.transition = new Transition(this.view, this.view, .25);\n        this.slideIn = new Slide('x', 1.2, 0);\n        this.slideIn.Init(this.transition);\n        this.slideOut = new Slide('x', 0, 1.2);\n        this.slideOut.Init(this.transition);\n        /** @param {Slide} transitionController */\n        function onTransitionComplete(transitionController){\n            if(transitionController === scope.slideOut){\n                scope.Hide();\n            }\n            else{\n                scope.rotate = true;\n            }\n        }\n        this.transition.On(Transition.signals.complete, onTransitionComplete);\n        \n        this.Preview();\n    }\n\n    /** @param {scaleFigure} value */\n    set scaleFigure(value){\n        this[_scaleFigure] = value;\n        let refMesh = this.refMesh;\n        if(refMesh instanceof THREE.Mesh){\n            /** @type {THREE.Texture} */\n            let alphaMap = refMesh.material.alphaMap;\n            if(value === scaleFigure.man){\n                alphaMap.offset.setX(0);\n            }\n            else{\n                alphaMap.offset.setX(.5);\n            }\n        }\n    }\n\n    get scaleFigure(){ return this[_scaleFigure]; }\n\n    static get scaleFigure(){ return scaleFigure; }\n\n    /**\n     * @param {CargoEntry} entry \n     */\n    Preview(entry){\n\n        let valid = entry;\n\n        if(valid){\n            if(entry instanceof BoxEntry) valid = entry.dimensions.volume > epsilon;\n        }\n\n        if(!valid){\n            this.End();\n            return false;\n        }\n\n        let c = this.preview.children;\n        while(c.length > 0) this.preview.remove(c[c.length - 1]);\n\n        let units = this.params.ux.params.units;\n        let offsetX = this.offsetX;\n\n        if(entry instanceof BoxEntry){\n            /** @type {CargoBoxView} */\n            let boxView = this.previewTypes.get(entry.type);\n            if(boxView){\n                boxView.entry = entry;\n            }\n            else{\n                boxView = new CargoBoxView(entry);\n                this.previewTypes.set(entry.type, boxView);\n\n                boxView.mesh.material = boxView.mesh.material.clone();\n                boxView.mesh.material.depthWrite = false;\n            }\n\n            boxView.mesh.renderOrder = Number.MAX_SAFE_INTEGER - 10;\n            this.preview.add(boxView.view);\n\n            this.preview.position.x = -Math.max(entry.dimensions.width, entry.dimensions.length) / 2 + offsetX;\n            this.preview.position.y = entry.dimensions.height / 2 + tempBox3.min.y;\n        }\n\n        this.Start();\n    }\n\n    Show(){\n        this.view.visible = true;\n    }\n\n    Start(){\n        if(this.previewing === false){\n            this.rotate = false;\n            this.transition.controller = this.slideIn;\n            this.transition.Start();\n        }\n        this.Show();\n    }\n\n    Hide(){\n        this.view.visible = false;\n    }\n\n    End(){\n        if(this.previewing === true){\n            this.transition.controller = this.slideOut;\n            this.transition.Start();\n        }\n    }\n\n    get previewing(){ return this.view.visible; }\n\n    /** @param {Number} now @param {Number} deltaTime */\n    Update(now, deltaTime){\n        if(this.previewing){\n            if(this.rotate) this.preview.rotateY(-Math.PI / 10 * deltaTime / 1000);\n            this.transition.Update();\n        }\n    }\n}\n\nexport default EntryInputView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/EntryInputView.js","class TextField {\n    /**\n     * @param {string} label \n     * @param {string} content \n     */\n    constructor(label, content){\n        /**\n         * @type {string}\n         */\n        this.label = label;\n        /**\n         * @type {string}\n         */\n        this.content = content;\n    }\n\n    /**\n     * @param {TextField} field \n     */\n    Copy(field){\n        this.label = field.label;\n        this.content = field.content;\n    }\n\n    Clone(){\n        var field = new TextField(this.label, this.content);\n        return field;\n    }\n\n    static get defaultContent(){\n        return '-';\n    }\n}\n\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Signaler from \"../../utils/cik/Signaler\";\nimport Utils from \"../../utils/cik/Utils\";\n\nvar tlWatchTimer, tlWatchEntries;\nfunction tlWatchUpdater(){\n    for(let i = 0; i < tlWatchEntries.length; i++){\n        let entry = tlWatchEntries[i];\n        let newValue = entry.owner[entry.propertyName];\n        if(newValue !== entry.savedValue){\n            entry.savedValue = newValue;\n            entry.tl.value = newValue;\n        }\n    };\n}\nfunction addTLWatch(tl, owner, propertyName){\n    if(tlWatchTimer === undefined){\n        tlWatchEntries = [];\n        tlWatchTimer = setInterval(tlWatchUpdater, 200);\n    }\n    tlWatchEntries.push({tl: tl, owner: owner, propertyName: propertyName, savedValue: null});\n}\n\nconst _value = Symbol('value');\nconst typeofString = 'string';\n\nconst signals = {\n    change: 'change'\n};\n\nclass TextLabel extends Signaler{\n    constructor(){\n        super();\n\n        this[_value] = '';\n    }\n\n    get value(){\n        return this[_value];\n    }\n\n    /** @param {string} v */\n    set value(v){\n        if(v !== typeofString) v = this.GetString(v);\n\n        let changed = this[_value] !== v;\n        this[_value] = v;\n        if(changed) this.Dispatch(signals.change, this);\n    }\n\n    GetString(v){\n        return v.ToString ? v.ToString() : v.toString();\n    }\n\n    Watch(owner, propertyName){\n        addTLWatch(this, owner, propertyName);\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nconst defaultGeometry = new THREE.PlaneGeometry(1, 1, 1, 1);\n\n/**\n * @typedef TLVParams\n * @property {string} font css 32px sans-serif\n * @property {string} textAlign start, end, left, right or center\n * @property {string} sidePadding px\n * @property {Number} fontColor css\n * @property {Number} backColor css\n * @property {Number} width px\n * @property {Number} height px\n */\n/** @type {TLVParams} */\nconst defaultParams = {\n    font: '32px sans-serif',\n    textAlign: 'center',\n    sidePadding: 16,\n    fontColor: 0x000000,\n    backColor: 0xffffff,\n    width: 256,\n    height: 64\n};\n\nclass TextLabelView{\n    \n    /** @param {TLVParams} params */\n    constructor(params){\n        \n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        let material = new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.DoubleSide});\n        this.view = new THREE.Mesh(defaultGeometry, material);\n    }\n\n    /** @param {TextLabel} value */\n    set textLabel(value){\n        value.On(TextLabel.signals.change, this.OnChange.bind(this));\n    }\n\n    /** @param {TextLabel} textLabel */\n    OnChange(textLabel){\n        let text = textLabel.value;\n        this.UpdateText(text);\n    }\n\n    /** @param {string} text */\n    UpdateText(text){\n        if(this.canvas2d === undefined)\n            this.canvas2d = document.createElement('canvas');\n\n        this.canvas2d.width = this.params.width;\n        this.canvas2d.height = this.params.height;\n\n        let context2d = this.canvas2d.getContext('2d');\n            context2d.fillStyle = this.params.backColor;\n            context2d.fillRect(0, 0, this.params.width + 2, this.params.height + 2);\n            context2d.fillStyle = this.params.fontColor;\n            context2d.font = this.params.font;\n            context2d.textAlign = this.params.textAlign;\n            context2d.textBaseline = 'middle';\n\n        let x = this.params.textAlign === 'start' || this.params.textAlign === 'left' ? this.params.sidePadding :\n            ( this.params.textAlign === 'end' || this.params.textAlign === 'right' ? this.params.width - this.params.sidePadding :\n            ( this.params.width / 2 ) );\n        context2d.fillText(text, x, this.params.height / 2);\n\n        //\n        let mesh = this.view;\n        /** @type {THREE.MeshBasicMaterial} */\n        let material = mesh.material;\n        if(!material.map){\n            material.map = new THREE.CanvasTexture(this.canvas2d);\n            material.map.minFilter = THREE.LinearFilter;\n            material.map.anisotropy = 1.4;\n        }\n        else{\n            material.map.image = this.canvas2d;\n        }\n        material.map.needsUpdate = true;\n    }\n\n}\n\nTextLabelView.Label = TextLabel;\n\nexport default TextLabelView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/TextLabelView.js","import EntryInputView from \"./view/EntryInputView\";\n\nclass Constants{\n    constructor(){\n\n    }\n\n    static get scaleRefFigure(){ return EntryInputView.scaleFigure; }\n}\n\nexport default Constants;\n\n\n// WEBPACK FOOTER //\n// ./src/api/Constants.js","import { Element } from \"./UIUtils\";\n\nif(window.dat && !window.dat.guiExtensions){\n\n    window.dat.guiExtensions = true;\n\n    Element.CreateCSS([\n        '.tooltip .tooltiptext {',\n        '    visibility: hidden;',\n        '    position: absolute;',\n        '    width: 120px;',\n        '    background-color: #111;',\n        '    color: #fff;',\n        '    text-align: center;',\n        '    padding: 2px 0;',\n        '    border-radius: 2px;',\n        '    z-index: 1;',\n        '    opacity: 0;',\n        '    transition: opacity .6s;',\n        '}',\n\n        '.tooltip-top {',\n        '    bottom: 125%;',\n        '    left: 50%;',\n        '    margin-left: -60px;',\n        '}',\n        \n        '.tooltip:hover .tooltiptext {',\n        '    visibility: visible;',\n        '    opacity: 1;',\n        '}'\n    ]);\n\n    const styles = {\n        datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\n    };\n\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\n        get: function(){\n            if(!this._onGUIEvent)\n                this._onGUIEvent = [];\n            return this._onGUIEvent;\n        }\n    });\n\n    // update all\n\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\n        var gui = this;\n        for (var i in gui.__controllers) {\n            var controller = gui.__controllers[i];\n            controller.updateDisplay();\n        }\n\n        var folders = Object.values(gui.__folders);\n        for(i = 0; i < folders.length; i++){\n            folders[i].updateAll();\n        }\n    };\n\n    // find\n\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\n        var gui = this, controller, i;\n\n        if(property){ // 2 arguments\n            for (i = 0; i < gui.__controllers.length; i++){\n                controller = gui.__controllers[i];\n                if (controller.object == object && controller.property == property)\n                    return controller;\n            }\n\n            var folders = Object.values(gui.__folders);\n            for(i = 0; i < folders.length; i++){\n                controller = folders[i].find(object, property);\n                if(controller) return controller;\n            }\n        }\n        else{\n            property = object; // 1 argument\n\n            var folderKeys = Object.keys(gui.__folders);\n            for(i = 0; i < folderKeys.length; i++){\n                var folderName = folderKeys[i];\n                var folder = gui.__folders[folderName];\n                if(folderName === property)\n                    return folder;\n            }\n        }\n        return undefined;\n    };\n\n    // On open event\n    //if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\n        get: function(){\n            return !this.closed;\n        },\n\n        set: function(value){\n            for(var i = 0; i < this.onGUIEvent.length; i++){\n                this.onGUIEvent[i](value ? 'open' : 'close');\n            }\n        }\n    });\n\n    // Disabled\n    function blockEvent(event){\n        event.stopPropagation();\n    }\n\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\n        get: function(){\n            return this.domElement.hasAttribute(\"disabled\");\n        },\n\n        set: function(value){\n            if (value){\n                this.domElement.setAttribute(\"disabled\", \"disabled\");\n                this.domElement.addEventListener(\"click\", blockEvent, true);\n                Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\n            }\n            else{\n                this.domElement.removeAttribute(\"disabled\");\n                this.domElement.removeEventListener(\"click\", blockEvent, true);\n                Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\n            }\n        },\n\n        enumerable: true\n    });\n\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\n        var controller = this.find(object, property);\n        controller.disabled = !value;\n    };\n\n    // Tooltip\n\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\n        get: function(){\n            return this._tooltip.innerHTML;\n        },\n\n        set: function(value){\n            if (value){\n                if(this._tooltip === undefined) {\n                    this._tooltip = crel('span', {class: 'tooltiptext'});\n\n                    /**\n                     * @type {HTMLElement}\n                     */\n                    var container = this.domElement.parentElement.parentElement;\n                    container.classList.add('tooltip');\n                    container.appendChild(this._tooltip);\n                }\n                this._tooltip.innerHTML = value;\n            }\n        },\n\n        enumerable: true\n    });\n\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\n        var controller = this.find(object, property);\n        controller.tooltip = value;\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","import { epsilon, smallValue, smallValueSqrt, reduceRectangles } from \"./Math2D\";\nimport Region from \"./Region\";\n\nimport { debugClear, debugLog, debugRegion, sleep, format } from '../CUBDebug';\n\n/** RegionFindCallback\n * @callback RegionFindCallback\n * @param {Region} region\n * @returns {Object | Boolean}\n */\n\n/** @typedef Vec2 @property {Number} x @property {Number} y */\n\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 \n * @property {Number} weight @property {Number} weightCapacity @property {Number} stackingCapacity \n */\n\nconst minRegionAxis = smallValue;\n\nclass RegionsTree{\n    /** @param {Region} root */\n    constructor(root){\n        this.regions = [root];\n    }\n\n    /** @param {Number} index */\n    Get(index){\n        return this.regions[index];\n    }\n\n    /** @param {RegionFindCallback} callback @param {*} thisArg */\n    Find(callback, thisArg){\n        let numRegions = this.regions.length;\n\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\n            let region = this.regions[iRegion];\n            let search = callback.call(thisArg, region);\n            if(search) return search;\n        }\n\n        return false;\n    }\n\n    /** @param {Region} region * @param {Region} fit * @returns {Boolean} false if region has been deleted */\n    Occupy(region, fit){\n\n        // Subtracts fit from region and calculates new bounding regions\n        var newRegions = region.Subtract(fit, minRegionAxis);\n\n        // Add new bounding regions if any\n        if(newRegions) this.regions.push(...newRegions);\n\n        // Check that region is still valid, otherwise remove it\n        if(region.length < minRegionAxis){\n            let regionIndex = this.regions.indexOf(region);\n            this.regions.splice(regionIndex, 1);\n            return false;\n        }\n\n        var debugUIDs = [];\n        if(!newRegions) newRegions = [];\n        newRegions.push(region);\n        //console.group('Occupy');\n        newRegions.forEach(region => {\n            //console.log(region.ToString());\n            debugUIDs.push(debugRegion(region, 0xffff0000, true, -1, true));\n        });\n        //console.groupEnd();\n\n        debugClear(debugUIDs);\n\n        return true;\n    }\n\n    /** @param {Number} width */\n    ProcessRegionsPreferredX(width){\n        let regions = this.regions,\n            numRegions = regions.length;\n        //let width = this.container.width;\n\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\n            let region = regions[iRegion];\n\n            if(Math.abs(region.x) < smallValue) region.preferredX = 0;\n            else if(Math.abs(region.x + region.width - width) < smallValue) region.preferredX = 1;\n        }\n    }\n\n    /** @param {Number} width @param {Number} height */\n    ProcessRegionsMergeExpand(width, height){\n        let regions = this.regions,\n            numRegions = regions.length;\n\n        let toInt = 1 / smallValue;\n        function coordID(value){\n            return Math.floor(value * toInt);\n        }\n\n        /** @typedef Level @property {Number} y @property {Array<Rectangle>} rectangles */\n        /** @type {Array<Level>} */\n        let levels = {};\n\n        let neighbours = [], rectangles = [];\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\n            let regionA = regions[iRegion];\n\n            if(regionA.weightCapacity > smallValue){\n                neighbours.length = 0;\n                neighbours.push(iRegion);\n                \n                for(let jRegion = iRegion + 1; jRegion < numRegions; jRegion++){\n                    let regionB = regions[jRegion];\n\n                    if(regionB.weightCapacity > smallValue && Math.abs(regionA.y - regionB.y) < smallValue){\n                        let intersects = regionA.Intersects(smallValue, regionB);\n                        if(intersects){\n                            neighbours.push(jRegion);\n                        }\n                    }\n                }\n\n                let numNeighbours = neighbours.length;\n                if(numNeighbours > 1){\n                    rectangles.length = 0;\n\n                    for(let iNeighbour = 0; iNeighbour < numNeighbours; iNeighbour++){\n                        let neighbourA = regions[neighbours[iNeighbour]];\n\n                        for(let jNeighbour = iNeighbour + 1; jNeighbour < numNeighbours; jNeighbour++){\n                            let neighbourB = regions[neighbours[jNeighbour]];\n\n                            let connectedNeighbours = neighbourA.ConnectFloorRects(neighbourB);\n                            rectangles.push(...connectedNeighbours);\n                        }\n                    }\n\n                    if(rectangles.length > 0){\n                        let yCat = coordID(regionA.y);\n                        if(levels[yCat] === undefined) levels[yCat] = {y: regionA.y, rectangles: []};\n                        levels[yCat].rectangles.push(...rectangles);\n                    }\n                }\n            }\n        }\n\n        var levelsYCats = Object.keys(levels);\n        for(let iYCat = 0, numYCats = levelsYCats.length; iYCat < numYCats; iYCat++){\n            /** @type {Level} */\n            let level = levels[levelsYCats[iYCat]];\n            let rectangles = level.rectangles;\n            let regionY = level.y;\n            let regionHeight = height - regionY;\n            \n            reduceRectangles(rectangles);\n            for(let iRect = 0, numRects = rectangles.length; iRect < numRects; iRect++){\n                let rect = rectangles[iRect];\n                let rx = rect.p1.x, ry = rect.p1.y;\n                let rw = rect.p3.x - rx, rh = rect.p3.y - ry;\n\n                // Calculate preferred packing side based on center point relative to container\n                let preferredX = (rx.x + rw / 2) < (width / 2) ? 0 : 1;\n                let newRegion = new Region(rx, regionY, ry, rw, regionHeight, rh, 0);\n                newRegion.SetWeights(rect.weight, rect.weightCapacity, rect.stackingCapacity);\n                this.regions.push(newRegion);\n            }\n        }\n    }\n\n    ProcessRegionsForZeroRegions(){\n        let regions = this.regions;\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\n            let region = regions[iRegion];\n            if(region.width < minRegionAxis || region.height < minRegionAxis || region.length < minRegionAxis){\n                regions.splice(iRegion, 1);\n                iRegion--;\n            }\n        }\n    }\n\n    ProcessRegionsEnclosed(){\n        var regions = this.regions;\n\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\n            let regionA = regions[iRegion];\n            let volumeA = regionA.volume;\n\n            for(let jRegion = iRegion + 1; jRegion < regions.length; jRegion++){\n                let regionB = regions[jRegion];\n                let volumeB = regionB.volume;\n\n                if(volumeA < volumeB){\n                    // If a A is completely contained within B, remove the A\n                    if(regionB.ContainsRegion(smallValue, regionA)){\n                        regions.splice(iRegion, 1);\n                        iRegion--;\n                        break;\n                    }\n                }\n                else{\n                    // If a B is completely contained within A, remove the B\n                    if(regionA.ContainsRegion(smallValue, regionB)){\n                        regions.splice(jRegion, 1);\n                        jRegion--;\n                    }\n                }\n            }\n        }\n    }\n\n    /** @param {Function} sortFunction */\n    Sort(sortFunction){\n        this.regions.sort(sortFunction);\n    }\n}\n\nexport default RegionsTree;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/RegionsTree.js","import AFitTest from \"../packer/afit/AFitTest\";\nimport Asset from \"../components/assets/Asset\";\nimport RuntimeTester from \"./RuntimeTester\";\n\nfunction delay(time, callback){\n    setTimeout(callback, time);\n}\n\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\nvar debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35});\nAsset.SetTextureMap('checkers.jpg', debugMaterial, 'map').then( (map) => {\n    map.wrapS = map.wrapT = THREE.RepeatWrapping;\n});\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\n\nvar tempVec = new THREE.Vector3();\n\nclass DebugBox {\n\n    /**\n     * @param {THREE.Vector3} center \n     * @param {Number|THREE.Vector3} size \n     */\n    static FromCenterSize(center, size){\n        var box = debugBox.clone();\n        box.position.copy(center);\n        \n        if(size instanceof THREE.Vector3)\n            box.scale.copy(size);\n        else\n            box.scale.set(size, size, size);\n\n        return box;\n    }\n\n    /**\n     * @param {THREE.Box3} box3 \n     */\n    static FromBox3(box3){\n        var box = debugBox.clone();\n\n        box3.getCenter(tempVec);\n        box.position.copy(tempVec);\n        box3.getSize(tempVec);\n        box.scale.copy(tempVec);\n\n        return box;\n    }\n}\n\n/**\n * DebugViz\n */\n\nconst alphaHexMask = 256 * 256 * 256;\n\n/** @type {THREE.Object3D} */\nvar view;\n\n/** @type {Map<string, *>} */\nvar debugObjects = new Map();\n\nvar tVec3 = new THREE.Vector3(),\n    tPos = new THREE.Vector3(),\n    tScale = new THREE.Vector3();\n\nclass DebugViz {\n\n    /**\n     * @param {THREE.Object3D} parent\n     */\n    static SetViewParent(parent){\n        view = new THREE.Object3D();\n        view.name = 'DebugViz view';\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\n        parent.add(view);\n    }\n\n    static get view(){ return view; }\n\n    /**\n     * @param {Number} x center x * @param {Number} y center y * @param {Number} z center z * @param {Number} w * @param {Number} h * @param {Number} l\n     * @param {Number} [color] hex color\n     * @param {Number} [duration] in milliseconds\n     * @param {Boolean} [checkered] checkers map\n     */\n    static DrawVolume(x, y, z, w, h, l, color, duration, wireframe, checkered){\n        tPos.set(x, y, z);\n        tScale.set(w, h, l);\n\n        /** @type {THREE.Mesh} */\n        var volume = debugBox.clone();\n        view.add(volume);\n\n        volume.position.copy(tPos);\n        volume.scale.copy(tScale);\n\n        if(color){\n            /** @type {THREE.MeshStandardMaterial} */\n            let material = volume.material.clone();\n            volume.material = material;\n            material.color.setHex(color && 0xffffff);\n            if(wireframe === true){\n                material.wireframe = true;\n            }\n            else{\n                material.opacity = Math.floor(color / alphaHexMask) / 256;\n                material.transparent = material.opacity > 0 && material.opacity < .99;\n            }\n\n            if(!checkered){\n                material.map = null;\n            }\n            else{\n                material.map.repeat.set(10, 10);\n            }\n        }\n\n        let uid = THREE.Math.generateUUID();\n        debugObjects.set(uid, volume);\n\n        if(duration > 0){\n            delay(duration, function(){\n                DebugViz.RemoveObjectByUID(uid);\n            });\n        }\n\n        return uid;\n    }\n\n    /**\n     * @param {string} uid \n     */\n    static RemoveObjectByUID(uid){\n        var object = debugObjects.get(uid);\n        if(object instanceof THREE.Object3D && object.parent){\n            object.parent.remove(object);\n        }\n    }\n\n    static ClearAll(){\n        for(var uid of debugObjects.keys()){\n            DebugViz.RemoveObjectByUID(uid);\n        }\n    }\n\n    /** @param {Boolean} visible */\n    static SetPackingSpaceVisibility(visible){\n        Debug.app.view.packingSpaceView.view.visible = visible;\n    }\n}\n\n/**\n * DebugViz\n */\n\nclass Debug {\n\n    static get Runtime(){\n        return RuntimeTester;\n    }\n\n    static MaterialEdit(callback){\n        let objects = Debug.app.view.packResultView.cargoViews;\n        objects.forEach(o => {\n            let material = o.mesh.material;\n            callback(material);\n            material.needsUpdate = true;\n        });\n    }\n\n    static get AFitTest(){\n        return AFitTest;\n    }\n}\n\nDebug.Box = DebugBox;\nDebug.Viz = DebugViz;\n\n/** @type {import('../../FreightPacker').default} */\nDebug.api;\n/** @type {import('../App').default} */\nDebug.app;\n\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","import { epsilon, smallValue, smallValueSqrt } from \"./Math2D\";\nimport { Item, Container } from \"./Components\";\n\nclass PackedItem{\n\n    /**\n     * @param {Item} ref \n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} z\n     * @param {Number} packedWidth\n     * @param {Number} packedHeight\n     * @param {Number} packedLength\n     * @param {Number} orientation \n     */\n    constructor(ref, x, y, z, packedWidth, packedHeight, packedLength, orientation){\n        this.ref = ref;\n        this.x = x; this.y = y; this.z = z;\n        this.packedWidth = packedWidth; this.packedHeight = packedHeight; this.packedLength = packedLength;\n        this.orientation = orientation;\n    }\n\n    /** @param {PackedItem} a * @param {PackedItem} b */\n    static DepthSort(a, b){\n        let az = a.z + a.packedLength,\n            bz = b.z + b.packedLength;\n        if(az + smallValue < bz) return -1;\n        if(az > bz + smallValue) return 1;\n        if(a.y < b.y) return -1;\n        if(a.y > b.y) return 1;\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\n        return 0;\n    }\n\n    /** @param {PackedItem} a * @param {PackedItem} b */\n    static Sort(a, b){\n        if(a.z + smallValue < b.z){\n            if(a.z + a.packedLength > b.z && a.y > b.y) return 1;\n            return -1;\n        }\n        if(b.z + smallValue < a.z){\n            if(b.z + b.packedLength > a.z && b.y > a.y) return 1;\n            return 1;\n        }\n        if(a.y < b.y) return -1;\n        if(a.y > b.y) return 1;\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\n        return 0;\n    }\n}\n\nclass PackedContainer{\n    /**\n     * @param {Container} container \n     */\n    constructor(container){\n        this.container = container;\n        \n        /** @type {Array<PackedItem>} */\n        this.packedItems = [];\n        /** @type {Array<Item>} */\n        this.unpackedItems = [];\n\n        this.cumulatedWeight = 0;\n    }\n\n    /** @param {PackedItem} item */\n    Pack(item){\n        this.cumulatedWeight += item.ref.weight;\n        this.packedItems.push(item);\n    }\n\n    /** @param {Item} item */\n    Unpack(item){\n        this.unpackedItems.push(item);\n    }\n\n    /** @param {Number} weight */\n    WeightPass(weight){\n        return this.cumulatedWeight + weight <= this.container.weightCapacity;\n    }\n}\n\nexport {\n    PackedItem,\n    PackedContainer\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/core/PackedComponents.js","import Container from \"../packer/container/Container\";\nimport ContainerView from \"./ContainerView\";\nimport Logger from \"../utils/cik/Logger\";\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\n\nconst typeofString = 'string';\n\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\nvar tempMatrix4 = new THREE.Matrix4();\n\nclass PackingSpaceView{\n    constructor(){\n        this.view = new THREE.Object3D();\n\n        /**\n         * @type {Array<ContainerView>}\n         */\n        this.containerViews = [];\n    }\n\n    /** \n     * @param {Container} container\n     */\n    Add(container){\n        let containerView = ContainerView.Request(container);\n        this.view.add(containerView.view);\n        this.containerViews.push(containerView);\n    }\n\n    Clear(){\n        for(let i = 0; i < this.containerViews.length; i++){\n            let cv = this.containerViews[i];\n            this.view.remove(cv.view);\n        }\n        this.containerViews.length = 0;\n    }\n\n    /**\n     * @param {string} containingVolumeUID \n     */\n    FindContainingVolume(containingVolumeUID){\n        for(let iCView = 0; iCView < this.containerViews.length; iCView++){\n            let volumes = this.containerViews[iCView].container.volumes;\n            for(let iCVolume = 0; iCVolume < volumes.length; iCVolume++){\n                if(volumes[iCVolume].uid === containingVolumeUID){\n                    return volumes[iCVolume];\n                }\n            }\n        }\n    }\n\n    /**\n     * @param {ContainingVolume} containingVolume \n     */\n    GetMatrix(containingVolume){\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\n        tempMatrix4.identity();\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\n        //tempMatrix4.premultiply(yRotation);\n        return tempMatrix4;\n    }\n}\n\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\nimport Asset from \"../components/assets/Asset\";\nimport Logger from \"../utils/cik/Logger\";\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\n\nclass ContainerBox{\n    /** @param {THREE.Mesh} mesh */\n    constructor(mesh){\n        this.mesh = mesh;\n    }\n}\n\n/**\n * \n * @param {Container} container \n */\nfunction createContainerBoxes(container){\n    /**\n     * @type {Map<ContainingVolume, ContainerBox>}\n     */\n    var boxes = new Map();\n\n    container.volumes.forEach(cv => {\n        let mesh = Asset.CreateMesh();\n            \n        let extent = cv.dimensions.vec3;\n        mesh.scale.copy(extent);\n        mesh.position.y += extent.y / 2;\n\n        mesh.material = mesh.material.clone();\n        mesh.material.color.setHex(0xffaaaa);\n        mesh.material.transparent = true;\n        mesh.material.opacity = .2;\n        mesh.material.side = THREE.BackSide;\n        mesh.material.polygonOffset = true;\n        mesh.material.polygonOffsetFactor = 1;\n        mesh.material.polygonOffsetUnits = 1;\n\n        boxes.set(cv, new ContainerBox(mesh));\n    });\n\n    return boxes;\n}\n\nvar tempVec3 = new THREE.Vector3();\n\n/** @type {WeakMap<Container, ContainerView>} */\nvar views = new WeakMap();\n\nclass ContainerView {\n    /**\n     * \n     * @param {Container} container \n     * @param {THREE.Object3D} view\n     */\n    constructor(container, view){\n\n        // Store original dimensions\n        this.initializationBox3 = new THREE.Box3();\n        this.initializationBox3.setFromObject(view);\n\n        views.set(container, this);\n\n        this.container = container;\n        this.view = new THREE.Object3D();\n        this.view.add(view);\n\n        Asset.StandardSceneObject(this.view);\n        Asset.ColorTemplates('Containers').Apply(this.view);\n\n        this.containerBoxes = createContainerBoxes(container);\n        for(var [cv, box] of this.containerBoxes){\n            box.mesh.position.add(cv.position);\n            this.view.add(box.mesh);\n        }\n\n    }\n\n    //** @param {Input} input @param {Camera} cameraController */\n    /*InitSliderBoxes(input, cameraController, changeCallback, stopCallback){\n        for(var box of this.containerBoxes.values()){\n            box.UseInput(input, cameraController);\n            box.On(sliderSignals.change, changeCallback);\n            box.On(sliderSignals.stop, stopCallback);\n        }\n    }*/\n\n    /**\n     * @param {Boolean} visible\n     * @param {THREE.Vector3} [padding]\n     */\n    PlatformVisibility(visible, padding){\n\n        if(visible && this.platformMesh === undefined){\n\n            if(padding === undefined) padding = new THREE.Vector3(0, .01, 0);\n        \n            this.initializationBox3.getSize(tempVec3);\n\n            let planeGeom = new THREE.BoxGeometry(tempVec3.x + padding.x * 2, padding.y, tempVec3.z + padding.z * 2, 1, 1, 1);\n            let planeMaterial = new Asset.CreateSolidMaterialMatte(Asset.ColorTemplates('Containers').Apply(0xffffff));\n            this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\n            Asset.ReceiveShadow(this.platformMesh);\n\n            this.platformMesh.position.y = .001;\n            this.view.add(this.platformMesh);\n        }\n\n        this.platformMesh.visible = visible;\n    }\n\n    /**\n     * @param {Container} container\n     * @returns {ContainerView}\n     */\n    static Request(container){\n        var view = views.get(container);\n        if( !view ){\n            let boxes = createContainerBoxes(container);\n            let object3d = new THREE.Object3D();\n            for(var [cv, box] of boxes){\n                box.mesh.position.add(cv.position);\n                object3d.add(box.mesh);\n            }\n\n            view = new ContainerView(container, object3d);\n            views.set(container, view);\n            Logger.Warn('View not found for:', container);\n        }\n        return view;\n    }\n}\n\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","import Utils from '../utils/cik/Utils';\nimport CargoListView from './CargoListView';\nimport CargoView from './CargoView';\nimport Pool from '../utils/cik/Pool';\nimport PackedCargoBoxView from './PackedCargoBoxView';\nimport PackingSpaceView from './PackingSpaceView';\nimport Tween from '../utils/cik/Tween';\nimport Packer from '../packer/Packer';\nimport BoxEntry from '../components/box/BoxEntry';\nimport Signaler from '../utils/cik/Signaler';\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * @typedef {Object} PackResultViewParams\n * @property {import('../UX').default} ux\n * @property {Number} animationDuration\n */\n\n /** @type {PackResultViewParams} */\nconst defaultParams = {\n    animationDuration: 1\n};\n\n/**\n * @param {CargoView} cargoView\n * @returns {PackedCargoBoxView}\n */\nfunction poolNewFN(cargoView){\n    //console.log('pool new', cargoView);\n    let packedCargoView = new PackedCargoBoxView(cargoView.entry);\n    packedCargoView.Extend(cargoView);\n    return packedCargoView;\n}\n\n/**\n * @param {PackedCargoBoxView} object \n * @param {CargoView} cargoView\n * @returns {PackedCargoBoxView}\n */\nfunction poolResetFN(object, cargoView){\n    //console.log('pool reset', cargoView);\n    object.Extend(cargoView);\n    return object;\n}\n\nfunction getOrientationAngles(orientation){\n    switch(orientation){\n        case 'xyz': return  [0,     0,      0];\n        case 'xzy': return  [90,    0,      0];\n        case 'yxz': return  [0,     0,      90];\n        case 'yzx': return  [90,    0,      90];\n        case 'zxy': return  [90,    -90,    0];\n        case 'zyx': return  [0,     -90,    0];\n    }\n}\n\n/**\n * @param {string} orientation \n */\nfunction getOrientationEuler(orientation){\n    const rad = Math.PI / 180.0;\n    let a = getOrientationAngles(orientation);\n    return new THREE.Euler(a[0] * rad, a[1] * rad, a[2] * rad);\n}\n\nvar tempBox = new THREE.Box3();\nvar tempVec = new THREE.Vector3();\n\nconst signals = {\n    packVizStart: 'packVizStart',\n    packVizEnd: 'packVizEnd',\n    cargoVizCreate: 'cargoVizCreate',\n    cargoVizPack: 'cargoVizPack',\n    cargoVizUnpack: 'cargoVizUnpack'\n};\n\nclass PackResultView extends Signaler{\n    /**\n     * @param {CargoListView} cargoListView\n     * @param {PackingSpaceView} packingSpaceView\n     * @param {PackResultViewParams} params \n     */\n    constructor(cargoListView, packingSpaceView, params){\n\n        super();\n\n        this.cargoListView = cargoListView;\n        this.packingSpaceView = packingSpaceView;\n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        /** @type {Array<CargoView} */\n        this.cargoViews = [];\n        this.view = new THREE.Object3D();\n\n        this.pool = new Pool(poolNewFN, poolResetFN);\n\n        /** @type {Array<Tween>} */\n        this.animatingViews = [];\n\n        if(typeof window.Pizzicato !== 'undefined'){\n            let musipack = new (require('./components/Musipack').default)(this);\n        }\n    }\n\n    /** \n     * @param {Packer.PackingResult} packingResult\n     */\n    async DisplayPackingResult(packingResult){\n\n        this.Dispatch(signals.packVizStart, packingResult);\n\n        if(packingResult.packed.length < 1) return;\n\n        let scope = this;\n        let units = this.params.ux.params.units;\n        \n        let containingVolume = packingResult.packed[0].containingVolume;\n        let matrix = this.packingSpaceView.GetMatrix(containingVolume);\n        let offset = new THREE.Vector3();\n        let orientation = new THREE.Quaternion();\n        let scale = new THREE.Vector3();\n        matrix.decompose(offset, orientation, scale);\n\n        /** @type {Map<CargoView, Number>} */\n        let packedQuantities = new Map();\n\n        let animatingViews = this.animatingViews;\n        let view = this.view;\n        //let onTweenComplete = this.OnCargoFirstTweenComplete.bind(this);\n        let zEntry = containingVolume.dimensions.length;\n        let numPackedItems = packingResult.packed.length;\n        let delayPerItem = this.params.animationDuration * 1000 / numPackedItems;\n        for(let i = 0; i < numPackedItems; i++){\n            let item = packingResult.packed[i];\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\n\n            let packedQuantity = packedQuantities.get(cargoViewTemplate);\n            let totalQuantity = cargoViewTemplate.entry.quantity;\n            if(packedQuantity === undefined) packedQuantities.set(cargoViewTemplate, packedQuantity = 0);\n            packedQuantities.set(cargoViewTemplate, ++packedQuantity);\n            let textColor = packedQuantity === totalQuantity ? 'rgb(255, 255, 255)' : 'rgb(255, 0, 0)';\n            this.cargoListView.UpdateLabel(cargoViewTemplate, packedQuantity + '/' + totalQuantity, textColor);\n\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\n\n            this.cargoViews.push(packedCargoView);\n\n            let rotation = getOrientationEuler(item.orientation);\n            packedCargoView.SetRotationAngles(rotation.x, rotation.y, rotation.z);\n\n            let x = item.position.x + offset.x,\n                y = item.position.y + offset.y,\n                z = item.position.z + offset.z;\n\n            let posTweenCombo = Tween.Combo.RequestN(Tween.functions.ease.easeOutQuad, .5,\n                x, 0,\n                y, 0,\n                zEntry, z - zEntry\n            );\n\n            function onTweenComplete(tween){\n                scope.Dispatch(signals.cargoVizPack, item);\n                scope.OnCargoFirstTweenComplete(tween);\n            }\n            \n            posTweenCombo.extraData = packedCargoView;\n            posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\n            posTweenCombo.onComplete = onTweenComplete;\n            posTweenCombo.Update(0);\n            animatingViews.push(posTweenCombo);\n    \n            view.add(packedCargoView.view);\n            await sleep(delayPerItem);\n        }\n\n        await sleep(500);\n\n        let unpackedOffset = 6 * units;\n        for(let i = 0, numUnpackedItems = packingResult.unpacked.length; i < numUnpackedItems; i++){\n            let item = packingResult.unpacked[i];\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\n\n            let totalQuantity = cargoViewTemplate.entry.quantity;\n            if(packedQuantities.has(cargoViewTemplate) === false){\n                let textColor = false ? 'rgb(255, 255, 255)' : 'rgb(255, 0, 0)';\n                this.cargoListView.UpdateLabel(cargoViewTemplate, '0/' + totalQuantity, textColor);\n            }\n\n            if(i === 0) unpackedOffset += item.entry.dimensions.width / 2;\n\n            for(let j = 0; j < item.unpackedQuantity; j++){\n                let packedCargoView = this.pool.Request(cargoViewTemplate);\n\n                this.cargoViews.push(packedCargoView);\n                \n                let x = containingVolume.dimensions.width * 1.5 + unpackedOffset + offset.x,\n                    y = item.entry.dimensions.height / 2 + offset.y,\n                    z = item.entry.dimensions.length * j + offset.z;\n\n                let posTweenCombo = Tween.Combo.RequestN(Tween.functions.ease.easeOutQuad, .5,\n                    x, 0,\n                    y, 0,\n                    zEntry, z - zEntry\n                );\n\n                function onTweenComplete(tween){\n                    scope.Dispatch(signals.cargoVizUnpack, item);\n                    scope.OnCargoFirstTweenComplete(tween);\n                }\n                \n                posTweenCombo.extraData = packedCargoView;\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\n                posTweenCombo.onComplete = onTweenComplete;\n                posTweenCombo.Update(0);\n                animatingViews.push(posTweenCombo);\n        \n                view.add(packedCargoView.view);\n                await sleep(delayPerItem * .5);\n            }\n\n            unpackedOffset += item.entry.dimensions.width + 6 * units;\n        }\n    }\n\n    /** @param {Tween|Tween.Combo} tween */\n    OnCargoFirstTweenComplete(tween){\n        let packedCargoView = tween.extraData;\n        this.OnTweenComplete(tween);\n        let scaleTweenCombo = Tween.Combo.RequestN(Tween.functions.special.pingPong, .1, \n            1, .1,\n            1, .1,\n            1, .1\n        );\n        \n        scaleTweenCombo.extraData = packedCargoView;\n        scaleTweenCombo.Hook(packedCargoView.view.scale, 'x', 'y', 'z');\n        scaleTweenCombo.onComplete = this.OnTweenComplete.bind(this);;\n        scaleTweenCombo.Update(0);\n        this.animatingViews.push(scaleTweenCombo);\n    }\n\n    /** @param {Tween|Tween.Combo} tween */\n    OnTweenComplete(tween){\n        let packedCargoView = tween.extraData;\n        packedCargoView.view.scale.set(1, 1, 1);\n        let index = this.animatingViews.indexOf(tween);\n        if(index != -1){\n            this.animatingViews.splice(index, 1);\n        }\n        tween.Unhook();\n        tween.Return();\n    }\n\n    /** @param {string} entryUID */\n    SelectEntry(entryUID){\n        if(!entryUID){\n            this.DisableHighlights();\n        }\n        else{\n            this.Highlight(entryUID);\n        }\n    }\n\n    DisableHighlights(){\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\n            this.cargoViews[i].focus = 1;\n        }\n    }\n\n    /** @param {string} entryUID */\n    Highlight(entryUID){\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\n            let cargoView = this.cargoViews[i];\n\n            let cvEntry = cargoView.entry;\n            if(cvEntry.uid === entryUID){\n                cargoView.focus = 1.75;\n            }\n            else{\n                cargoView.focus = .25;\n            }\n        }\n    }\n\n    /** @param {Number} value */\n    Slice(value){\n        if(value >= 1){\n            this.view.children.forEach(child => {\n                child.visible = true;\n            });\n            return;\n        }\n\n        let minY = Number.MAX_SAFE_INTEGER, maxY = Number.MIN_SAFE_INTEGER;\n        this.view.children.forEach(child => {\n            tempBox.setFromObject(child);\n            tempBox.getSize(tempVec);\n            let halfHeight = tempVec.y / 2;\n            tempBox.getCenter(tempVec);\n            let low = tempVec.y - halfHeight;\n            let high = tempVec.y + halfHeight;\n            if(low < minY) minY = low;\n            if(high > maxY) maxY = high;\n        });\n\n        let y = minY + value * (maxY - minY);\n\n        //console.log('slice ' + y.toFixed(2) + ' between ' + minY.toFixed(2) + ' and ' + maxY.toFixed(2));\n\n        this.view.children.forEach(child => {\n            tempBox.setFromObject(child);\n            tempBox.getSize(tempVec);\n            let halfHeight = tempVec.y / 2;\n            tempBox.getCenter(tempVec);\n            let low = tempVec.y - halfHeight;\n\n            if(low < y) child.visible = true;\n            else child.visible = false;\n        });\n    }\n\n    Clear(){\n        this.animatingViews.length = 0;\n        this.cargoViews.length = 0;\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\n    }\n\n    Update(){\n        this.animatingViews.forEach(animatingView => {\n            animatingView.Update();\n        });\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import { Element, styles } from \"../../utils/cik/config/UIUtils\";\nimport Signaler from \"../../utils/cik/Signaler\";\nimport Asset from \"../../components/assets/Asset\";\nimport Utils from \"../../utils/cik/Utils\";\n\n//#region crel.js\n//Copyright (C) 2012 Kory Nunn\n\n//Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n//The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n//THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n/*\n\n    This code is not formatted for readability, but rather run-speed and to assist compilers.\n\n    However, the code's intention should be transparent.\n\n\n*/\n\nvar fn = 'function',\n    obj = 'object',\n    nodeType = 'nodeType',\n    textContent = 'textContent',\n    setAttribute = 'setAttribute',\n    attrMapString = 'attrMap',\n    isNodeString = 'isNode',\n    isElementString = 'isElement',\n    d = typeof document === obj ? document : {},\n    isType = function(a, type){\n        return typeof a === type;\n    },\n    isNode = typeof Node === fn ? function (object) {\n        return object instanceof Node;\n    } :\n    // in IE <= 8 Node is an object, obviously..\n    function(object){\n        return object &&\n            isType(object, obj) &&\n            (nodeType in object) &&\n            isType(object.ownerDocument,obj);\n    },\n    isElement = function (object) {\n        return crel[isNodeString](object) && object[nodeType] === 1;\n    },\n    isArray = function(a){\n        return a instanceof Array;\n    },\n    appendChild = function(element, child) {\n        if (isArray(child)) {\n            child.map(function(subChild){\n                appendChild(element, subChild);\n            });\n            return;\n        }\n        if(!crel[isNodeString](child)){\n            child = d.createTextNode(child);\n        }\n        element.appendChild(child);\n    };\nfunction crel(){\n    var args = arguments, //Note: assigned to a variable to assist compilers. Saves about 40 bytes in closure compiler. Has negligable effect on performance.\n        element = args[0],\n        child,\n        settings = args[1],\n        childIndex = 2,\n        argumentsLength = args.length,\n        attributeMap = crel[attrMapString];\n    element = crel[isElementString](element) ? element : d.createElement(element);\n    // shortcut\n    if(argumentsLength === 1){\n        return element;\n    }\n    if(!isType(settings,obj) || crel[isNodeString](settings) || isArray(settings)) {\n        --childIndex;\n        settings = null;\n    }\n    // shortcut if there is only one child that is a string\n    if((argumentsLength - childIndex) === 1 && isType(args[childIndex], 'string') && element[textContent] !== undefined){\n        element[textContent] = args[childIndex];\n    }else{\n        for(; childIndex < argumentsLength; ++childIndex){\n            child = args[childIndex];\n            if(child == null){\n                continue;\n            }\n            if (isArray(child)) {\n              for (var i=0; i < child.length; ++i) {\n                appendChild(element, child[i]);\n              }\n            } else {\n              appendChild(element, child);\n            }\n        }\n    }\n    for(var key in settings){\n        if(!attributeMap[key]){\n            if(isType(settings[key],fn)){\n                element[key] = settings[key];\n            }else{\n                element[setAttribute](key, settings[key]);\n            }\n        }else{\n            var attr = attributeMap[key];\n            if(typeof attr === fn){\n                attr(element, settings[key]);\n            }else{\n                element[setAttribute](attr, settings[key]);\n            }\n        }\n    }\n    return element;\n}\n// Used for mapping one kind of attribute to the supported version of that in bad browsers.\ncrel[attrMapString] = {};\ncrel[isElementString] = isElement;\ncrel[isNodeString] = isNode;\nif(typeof Proxy !== 'undefined'){\n    crel.proxy = new Proxy(crel, {\n        get: function(target, key){\n            !(key in crel) && (crel[key] = crel.bind(null, key));\n            return crel[key];\n        }\n    });\n}\n//#endregion\n\nfunction numberFormatDefault(n){ return n; }\n\nfunction numberFormat(n, d){\n    if(n > Number.MAX_SAFE_INTEGER - 2) return 'MAX';\n    let nStr = Math.round(n) !== n ? n.toFixed(d) : n;\n    return nStr;\n}\n\n/** @typedef FormatParams @property {Function} nf number formatting function */\n/** @type {FormatParams} */\nconst defaultFormatParams = {\n    nf: numberFormatDefault\n};\n\n/** @param {string} str string with (at) symbol an argument placeholder @param {FormatParams} params @param {Array<*>} args */\nfunction format(str, params, ...args){\n    params = Utils.AssignUndefined(params, defaultFormatParams);\n    let index = 0;\n    while( (index = str.indexOf('@', index)) !== -1 ){\n        if(str[index - 1] !== '\\\\'){\n            let a = args.shift();\n            if(typeof a === 'number') a = params.nf(a);\n            str = str.replace('@', a);\n        }\n        index += 1;\n    }\n    return str;\n}\n\nElement.CreateCSS([\n]);\n\nconst signals = {\n    orthoViewSelected: 'orthoViewSelected'\n};\n\nconst orthoviews = {\n    home: 'home',\n    top: 'top',\n    front: 'front',\n    side: 'side'\n};\n\nclass DomUI extends Signaler{\n    /**\n     * \n     * @param {HTMLDivElement} containerDiv \n     * @param {UX} ux \n     */\n    constructor(containerDiv, ux){\n        super();\n        \n        /** @type {HTMLDivElement} */\n        //this.domElement = crel('div', {style: 'display: inline-block; position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;'});\n        //containerDiv.appendChild(this.domElement);\n        this.domElement = containerDiv;\n        this.ux = ux;\n\n        /** @type {HTMLDivElement} */\n        //this.sideBar = crel('div', {style: 'float: right; right: 0px; width: 50%; height: 100%;'});\n        //this.domElement.appendChild(this.sideBar);\n    }\n\n    CreateOrthoViewsIcons(){\n        let scope = this;\n        let texturesPath = Asset.resources.texturesPath;\n\n        let icons = [\n            {url: 'orthoviews-map.png', type: orthoviews.home},\n            {url: 'orthoviews-map.png', type: orthoviews.top},\n            {url: 'orthoviews-map.png', type: orthoviews.front},\n            {url: 'orthoviews-map.png', type: orthoviews.side}\n        ];\n\n        /** @type {HTMLDivElement} */\n        //this.orthoViewsIcons = crel('div', {style: 'display: inline-block; float: right; right: 0px; width: 100%; height: 100%;'});\n        //this.sideBar.appendChild(this.orthoViewsIcons);\n\n        const dimensions = {x: 52, y: 52};\n        const margin = {x: 16, y: 16};\n        const padding = 8;\n\n        function dispatch(icon){\n            scope.Dispatch(signals.orthoViewSelected, icon.type);\n        }\n\n        for(let i = 0; i < icons.length; i++){\n            let icon = icons[i];\n\n            let top = i * (dimensions.y + padding) + margin.y;\n            let right = margin.x;\n            let imageURL = texturesPath + icon.url;\n            let style = format(\n                'cursor: pointer; display: block; float: right; position: absolute; background-size: 200%; background-position: 0% @%; background-image: url(\"@\"); width: @px; height: @px; right: @px; top: @px;', {\n                    nf: function(n){\n                        return Math.floor(n);\n                    }\n                }, \n                i / (icons.length - 1) * 100, imageURL, dimensions.x, dimensions.y, right, top);\n            \n            /** @type {HTMLDivElement} */\n            let div = crel('div', {style: style});\n            this.domElement.appendChild(div);\n\n            div.onmouseover = function(){\n                div.style.backgroundPositionX = '100%';\n            }\n\n            div.onmouseout = function(){\n                div.style.backgroundPositionX = '0%';\n            }\n\n            div.onclick = function(e){\n                e.preventDefault();\n                dispatch(icon);\n            };\n        }\n    }\n\n    static get signals(){\n        return signals;\n    }\n\n    static get orthoviews(){\n        return orthoviews;\n    }\n}\n\nexport default DomUI;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/dom/DomUI.js","import Logger from '../utils/cik/Logger';\nimport BoxEntry from './box/BoxEntry';\nimport Dimensions from './box/Dimensions';\nimport LightDispatcher from './LightDispatcher';\nimport App from '../App';\nimport CargoList from '../packer/CargoList';\nimport CargoBoxView from '../view/CargoBoxView';\nimport Pool from '../utils/cik/Pool';\n\nconst epsilon = Math.pow(2, -52);\nconst numberType = 'number';\n\nconst _cargoList = Symbol('cargoList');\n\nfunction poolNewFN(){\n    return new BoxEntry();\n}\n/** @param {BoxEntry} boxEntry */\nfunction poolResetFN(boxEntry){\n    return boxEntry;\n}\nvar boxEntryPool = new Pool(poolNewFN, poolResetFN);\n\nconst signals = {\n    show: 'show',\n    hide: 'hide',\n    insert: 'insert',\n    modify: 'modify',\n    remove: 'remove'\n};\n\n/** Renews entry: modify uid and color\n * @param {BoxEntry} boxEntry */\nfunction renewBoxEntry(boxEntry){\n    boxEntry.SetUID();\n    boxEntry.Description('color', CargoBoxView.GetNextColor().getHex());\n}\n\n/**\n * @typedef {Object} CargoInputParams\n * @property {import('../UX').default} ux\n */\n\n/**\n * Cubic volumes entry\n */\nclass CargoInput extends LightDispatcher {\n\n    /**\n     * @param {CargoInputParams} params \n     */\n    constructor(params){\n        super();\n\n        this.params = params;\n    }\n\n    /** @ignore ignore */\n    _Bind(value){\n        /** @type {App} */\n        let app = value;\n\n        this[_cargoList] = app.packer.cargoList;\n    }\n\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\n    CreateBoxEntry(){\n        let boxEntry = new BoxEntry();\n        renewBoxEntry(boxEntry);\n        return boxEntry;\n    }\n\n    /** @param {string} entryUID @returns {BoxEntry} a copy of the entry if it exists */\n    GetEntry(entryUID){\n        /** @type {CargoList} */\n        let cargoList = this[_cargoList];\n        let entry = cargoList.GetEntry(entryUID);\n        let entryMirror = boxEntryPool.Request();\n        entryMirror.Copy(entry);\n        return entry;\n    }\n\n    /** @returns {Array<BoxEntry>} an array of copies of all entries */\n    GetEntries(){\n        /** @type {CargoList} */\n        let cargoList = this[_cargoList];\n        let entries = [];\n        cargoList.groups.forEach(value => {\n            let entryMirror = boxEntryPool.Request();\n            entryMirror.Copy(value.entry);\n            entries.push(entryMirror);\n        });\n\n        return entries;\n    }\n\n    /**\n     * Return BoxEntry objects to object pool (less memory usage)\n     * @param {BoxEntry | Array<BoxEntry>} objects \n     */\n    Recycle(objects){\n        if(objects instanceof Array){\n            objects.forEach( (object) => {\n                if(object instanceof BoxEntry) boxEntryPool.Return(object);\n            });\n        }\n        else if(objects instanceof BoxEntry){\n            boxEntryPool.Return(objects);\n        }\n    }\n\n    /** Shows/updates entry 3D display\n     * @param {BoxEntry} entry \n     * @returns {Boolean}\n     */\n    Show(entry){\n        if(BoxEntry.Assert(entry)){\n            try{\n                this.Dispatch(signals.show, entry);\n                return true;\n            }\n            catch(error){\n                Logger.Warn('Error in CargoInput.Show, error/entry:', error, entry);\n            }\n\n            return false;\n        }\n\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Show, entry:', entry);\n        return false;\n    }\n\n    /** Hides entry 3D display */\n    Hide(){\n        this.Dispatch(signals.hide);\n    }\n\n    /** Adds a new entry and obtain its uid\n     * @param {BoxEntry} entry\n     * @returns {Number|Boolean} uid or false if error\n     */\n    Add(entry){\n        if(BoxEntry.Assert(entry)){\n\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\n                Logger.Warn('CargoInput.Add, entry rejected, dimensions != Volume:', entry.dimensions);\n                return false;\n            }\n\n            try{\n                let commitedEntry = entry.Clone();\n                let uid = commitedEntry.SetUID();\n                \n                renewBoxEntry(entry);\n\n                this.Dispatch(signals.insert, commitedEntry);\n                return uid;\n            }\n            catch(error){\n                Logger.Warn('Error in CargoInput.Add, error/entry:', error, entry);\n            }\n\n            return false;\n        }\n\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Add, entry:', entry);\n        return false;\n    }\n\n    /** Modify an existing BoxEntry, referenced by its uid, using a modifed template\n     * @param {string} entryUID\n     * @param {BoxEntry} boxEntry\n     * @returns {Boolean} success\n     */\n    Modify(entryUID, boxEntry){\n        let existing = this.GetEntry(entryUID);\n        if(!existing){\n            Logger.Warn('CargoInput.Modify, entry not found for:', entryUID);\n            return false;\n        }\n\n        if(BoxEntry.Assert(boxEntry)){\n\n            if( Dimensions.IsVolume(boxEntry.dimensions.Abs()) === false ){\n                Logger.Warn('CargoInput.Modify, entry rejected, dimensions != Volume:', boxEntry);\n                return false;\n            }\n\n            try{\n                existing.Copy(boxEntry);\n\n                this.Dispatch(signals.modify, existing);\n                return true;\n            }\n            catch(error){\n                Logger.Warn('Error in CargoInput.Modify, error/entry:', error, boxEntry);\n            }\n\n            return false;\n        }\n\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Modify, entry:', boxEntry);\n        return false;\n    }\n\n    /** Removes an existing box entry\n     * @param {string} entryUID\n     * @returns {Boolean} success\n     */\n    Remove(entryUID){\n        \n        /** @type {CargoList} */\n        let cargoList = this[_cargoList];\n        let existing = cargoList.GetEntry(entryUID);\n        \n        if(!existing){\n            Logger.Warn('CargoInput.Remove, entry not found for:', entryUID);\n            return false;\n        }\n\n        this.Dispatch(signals.remove, existing);\n        return true;\n    }\n\n    /** Enumeration of dispatched types */\n    static get signals(){\n        return signals;\n    }\n}\n\nCargoInput.BoxEntry = BoxEntry;\n\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Container from \"../packer/container/Container\";\nimport PackingSpace from \"../packer/PackingSpace\";\nimport ContainerView from \"../view/ContainerView\";\nimport Asset from \"./assets/Asset\";\nimport LightDispatcher from \"./LightDispatcher\";\nimport Logger from \"../utils/cik/Logger\";\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\n\n/**\n * @typedef PackingSpaceJSON\n * @property {*} jsonObject.view json data\n * @property {Container} jsonObject.container json data\n */\n\nconst signals = {\n    containerLoaded: 'containerLoaded',\n    sliderValueChange: 'sliderValueChange',\n    sliderValueStop: 'sliderValueStop'\n};\n\n/**\n * @typedef {Object} PackingSpaceInputParams\n * @property {import('../UX').default} ux\n */\n\n/** @param {Container} container @param {THREE.Object3D} model */\nfunction createContainerView(container, model, units){\n    let containerView;\n    if(model){\n        containerView = new ContainerView(container, model);\n    }\n    else{\n        containerView = ContainerView.Request(container);\n    }\n    \n    let padding = 60 * units;\n    let thickness = 2 * units;\n    containerView.PlatformVisibility(true, new THREE.Vector3(padding, thickness, padding));\n}\n\nclass PackingSpaceInput extends LightDispatcher {\n    /**\n     * @param {PackingSpaceInputParams} params \n     */\n    constructor(params){\n        super();\n\n        this.params = params;\n\n        this.packingSpace = new PackingSpace();\n    }\n\n    /** @ignore ignore */\n    _Bind(value){\n        /** @type {App} */\n        let app = value;\n    }\n\n    /**\n     * Creates a dummy container, get an uid for later changes (or false on error)\n     * @param {Number} width\n     * @param {Number} length\n     * @param {Number} height\n     * @param {Number} weightCapacity\n     * @returns {Number|Boolean} uid or false if error\n     */\n    FromInput(width, length, height, weightCapacity){\n        let container = new Container();\n\n        let containingVolume = new ContainingVolume(container);\n            containingVolume.dimensions.Set(width, length, height);\n            containingVolume.weightCapacity = weightCapacity;\n\n        container.Add(containingVolume);\n\n        let units = this.params.ux.params.units;\n        createContainerView(container, null, units);\n\n        this.packingSpace.AddContainer(container);\n        \n        this.Dispatch(signals.containerLoaded, container);\n        return container.uid;\n    }\n\n    /**\n     * Load packing config, get an uid for later changes (or false on error)\n     * @param {PackingSpaceJSON} jsonObject \n     * @returns {Number|Boolean} uid or false if error\n     */\n    Load(jsonObject){\n\n        /** @type {PackingSpaceJSON} jsonObject */\n        let data;\n        try{\n            data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\n        }\n        catch(error){\n            Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject:', error, jsonObject);\n            return false;\n        }\n\n        if(data.container){\n            let container;\n            try{\n                container = Container.FromJSON(data.container);\n            }\n            catch(error){\n                Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.container:', error, data.container);\n                return false;\n            }\n\n            if(!container.uid) container.SetUID();\n            let uid = container.uid;\n            \n            let model;\n            if(data.view){\n                try{\n                    model = Asset.FromJSON(data.view);\n                }\n                catch(error){\n                    Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.view:', error, data.view);\n                    return false;\n                }\n            }\n\n            let units = this.params.ux.params.units;\n            createContainerView(container, model, units);\n\n            this.packingSpace.AddContainer(container);\n\n            this.Dispatch(signals.containerLoaded, container);\n            return uid;\n        }\n\n        return false;\n    }\n\n    /** Enumeration of dispatched types */\n    static get signals(){\n        return signals;\n    }\n\n}\n\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import LightDispatcher from \"./LightDispatcher\";\nimport Packer from \"../packer/Packer\";\nimport Utils from \"../utils/cik/Utils\";\n\n/** @typedef {import('../packer/Packer').SolverParams} SolverParams */\n\n/** @typedef {import('../packer/Packer').CUBParams} CUBParams */\n\nclass ResultSpace{\n    /** @param {string} uid */\n    constructor(uid){\n        this.uid = uid;\n    }\n}\n\nclass ResultEntry{\n    /** @param {string} uid @param {ResultSpace} space @param {Number} quantity */\n    constructor(uid, space, quantity){\n        this.uid = uid;\n        this.space = space;\n        this.quantity = quantity || 0;\n    }\n}\n\nclass PackingResult{\n    constructor(){\n        /** @type {Array<ResultSpace>} */\n        this.packingSpaces = [];\n        /** @type {Array<ResultEntry>} */\n        this.packed = [];\n        /** @type {Array<ResultEntry>} */\n        this.unpacked = [];\n\n        this.totalPacked = 0;\n        this.totalUnpacked = 0;\n        /** algorithm runtime in seconds */\n        this.solveDuration = 1;\n    }\n}\n\n/** @param {Packer.PackingResult} packingResult */\nfunction toInterfaceResults(packingResult){\n    let result = new PackingResult();\n    \n    /** @param {string} containerUID */\n    function getSpace(containerUID){\n        for(let i = 0; i < result.packingSpaces.length; i++){\n            if(result.packingSpaces[i].uid === containerUID){\n                return result.packingSpaces[i];\n            }\n        }\n\n        let ps = new ResultSpace(containerUID);\n        result.packingSpaces.push(ps);\n        return ps;\n    }\n\n    let totalPacked = 0,\n        totalUnpacked = 0;\n\n    /** @param {ResultEntry} resultEntry @param {Array<ResultEntry>} list */\n    function packEntry(resultEntry, list){\n        let isFirst = true;\n        for(let i = 0; i < list.length; i++){\n            if(list[i].uid === resultEntry.uid){\n                isFirst = false;\n                list[i].quantity ++;\n                break;\n            }\n        }\n\n        if(isFirst){\n            resultEntry.quantity = 1;\n            list.push(resultEntry);\n        }\n    }\n\n    packingResult.packed.forEach(p => {\n        let uid = p.entry.uid;\n        let space = getSpace(p.containingVolume.container.uid);\n        packEntry(new ResultEntry(uid, space), result.packed);\n        totalPacked++;\n    });\n\n    packingResult.unpacked.forEach(p => {\n        let uid = p.entry.uid;\n        let space = null;\n        let unpackedQuantity = p.unpackedQuantity;\n        result.unpacked.push(new ResultEntry(uid, space, unpackedQuantity));\n        totalUnpacked += unpackedQuantity;\n    });\n\n    result.totalPacked = totalPacked;\n    result.totalUnpacked = totalUnpacked;\n    result.solveDuration = packingResult.runtime;\n\n    return result;\n}\n\nconst signals = {\n    solveRequest: 'solveRequest',\n    solved: 'solved',\n    failed: 'failed'\n};\n\n/** @typedef PackerParams \n * @property {Number} defaultStackingFactor default = 5, multiplier for stacking capacity (capacity = weight * defaultStackingFactor) if stackingProperty is not enabled */\nconst defaultParams = {\n    defaultStackingFactor: 5\n};\n\n/** @type {SolverParams} */\nconst defaultSolverParams = {\n    algorithm: 'cub'\n};\n\nclass PackerInterface extends LightDispatcher {\n\n    /** @param {PackerParams} params */\n    constructor(params){\n        super();\n        \n        this.params = Utils.AssignUndefined(params, defaultParams);\n    }\n\n    /** Solve packing for current cargo list in loaded packing space \n     * @param {SolverParams} params */\n    Solve(params){\n        params = Utils.AssignUndefined(params, defaultSolverParams);\n        this.Dispatch(signals.solveRequest, params);\n    }\n\n    /** @ignore ignore */\n    _Notify(...args){\n        let value = args[0];\n        switch(value){\n            case signals.solved:\n                let packingResult = args[1];\n                let result = toInterfaceResults(packingResult);\n                this.Dispatch(signals.solved, result);\n                break;\n            case signals.failed:\n                let error = args[1];\n                this.Dispatch(signals.failed, error);\n                break;\n        }\n    }\n\n    /** Enumeration of dispatched types */\n    static get signals(){\n        return signals;\n    }\n}\n\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js","const api = require('./FreightPacker').default;\nwindow.FreightPacker = api;\n\n\n// WEBPACK FOOTER //\n// ./src/dev.js","import Capabilities from './api/utils/Capabilities';\nimport App, { AppParams } from './api/App';\nimport CargoInput, { CargoInputParams } from './api/components/CargoInput';\nimport Logger from './api/utils/cik/Logger';\nimport Utils from './api/utils/cik/Utils';\nimport PackingSpaceInput, { PackingSpaceInputParams } from './api/components/PackingSpaceInput';\nimport UX, { UXParams } from './api/UX';\nimport PackerInterface, { PackerParams } from './api/components/PackerInterface';\nimport LightDispatcher from './api/components/LightDispatcher';\nimport Constants from './api/Constants';\nimport Resources from './api/Resources';\n\n//#region dev\nconst utils = {\n\tTHREE: THREE,\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\n\tSignaler: require('./api/utils/cik/Signaler').default,\n\tUtils: require('./api/utils/cik/Utils').default,\n\tDebug: require('./api/debug/Debug').default,\n\tConfig: require('./api/utils/cik/config/Config').default\n};\n\n/** @param {FreightPacker|App} domain */\nfunction devSetup(domain){\n\tif(domain instanceof FreightPacker){\n\t\tlet fp = domain;\n\t\tglobal.fp = fp;\n\t\tFreightPacker.utils.Debug.api = fp;\n\t\tlet params = fp.params;\n\t\tif(params.debug) {\n\t\t\tLogger.active = true;\n\t\t\tLogger.toConsole = true;\n\t\t\tLogger.traceToConsole = true;\n\t\t}\n\n\t\t//require('./api/debug/Tester').testPool();\n\t\t//utils.Debug.CLPTest.Test1();\n\t}\n\n\tif(domain instanceof App){\n\t\tconst SceneSetup = require('./api/view/SceneSetup').default;\n\t\tlet app = domain;\n\t\tFreightPacker.utils.Debug.app = app;\n\t\tapp.sceneSetup.OnIncludingPrior(SceneSetup.signals.init, function(){\n\t\t\tFreightPacker.utils.Debug.Viz.SetViewParent(app.sceneSetup.sceneController.scene);\n\t\t});\n\t}\n}\n\n/** @param {FreightPacker} fp */\nfunction auto(fp){\n\t\n}\n\n//#endregion\n\n/**\n * @typedef InitializationParams\n * @property {Boolean} debug set to false for deployment\n * @property {string} texturesPath url to textures directory\n * @property {UXParams} uxParams UX parameters\n * @property {PackerParams} packerParams Packer general parameters\n */\n\n/**\n * @type {InitializationParams}\n */\nconst defaultParams = {\n\tdebug: false\n};\n\nconst signals = {\n\tready: 'ready'\n};\n\nclass FreightPacker extends LightDispatcher {\n\t/**\n\t * Freight Packer API instance\n\t * @param {HTMLDivElement} containerDiv\n\t * @param {InitializationParams} params\n\t */\n\tconstructor( containerDiv, params ) {\n\n\t\tsuper();\n\t\tlet scope = this;\n\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\n\t\tdevSetup(this);\n\n\t\tthis.ux = new UX(this.params.uxParams);\n\n\t\t/** @type {CargoInputParams} */\n\t\tlet cargoInputParams = {ux: this.ux};\n\n\t\t/** Handles input of: description fields (label, etc.), dimensions and constraints */\n\t\tthis.cargoInput = new CargoInput(cargoInputParams);\n\n\t\t/** @type {PackingSpaceInputParams} */\n\t\tlet packingSpaceInputParams = {ux: this.ux};\n\n\t\t/** Handles input of: packing spaces configurations and assets */\n\t\tthis.packingSpaceInput = new PackingSpaceInput(packingSpaceInputParams);\n\n\t\t/** Manual solving and notification */\n\t\tthis.packer = new PackerInterface(this.params.packerParams);\n\n\t\tlet resources = new Resources();\n\t\t\tresources.texturesPath = this.params.texturesPath;\n\n\t\t/** @type {AppParams} */\n\t\tlet appParams = {ux: this.ux, cargoInput: this.cargoInput, packingSpaceInput: this.packingSpaceInput, packerInterface: this.packer, resources: resources};\n\t\tlet app = new App(containerDiv, appParams);\n\t\t\tapp.On(App.signals.start, function(){\n\t\t\t\tscope.Dispatch(signals.ready);\n\t\t\t});\n\n\t\tdevSetup(app);\n\n\t\tif(this.params.debug){\n\t\t\tauto(this);\n\t\t}\n\t}\n\n\t/**\n\t * Check that webgl, etc are supported in this browser.\n\t * Will resolve if requirements are met, otherwise rejects with an error message\n\t * @return {Promise<Void>|Promise<string>} \n\t */\n\tstatic CheckRequirements () {\n\t\tlet webgl = Capabilities.IsWebGLReady();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(webgl){\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet message = 'WebGL not supported.';\n\t\t\t\treject(message);\n\t\t\t}\n\t\t});\n\t}\n\n\t/** Enumeration of dispatched types */\n\tstatic get signals(){\n\t\treturn signals;\n\t}\n\n\tstatic get utils(){\n\t\treturn utils;\n\t}\n\n}\n\nFreightPacker.UX = UX;\nFreightPacker.CargoInput = CargoInput;\nFreightPacker.PackingSpaceInput = PackingSpaceInput;\nFreightPacker.Packer = PackerInterface;\nFreightPacker.Constants = Constants;\n\nexport default FreightPacker;\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\nclass Capabilities {\n    constructor() {\n      \n    }\n  \n    static IsWebGLReady(){\n        var canvas = document.createElement('canvas');\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n        return gl && gl instanceof WebGLRenderingContext;\n    }\n}\n\nexport default Capabilities;\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\nimport RaycastGroup from \"./RaycastGroup\";\n\nconst keypress = require('../../../../min-dependencies/lib/keypress');\n\n/**\n * @typedef {Object} IScreen\n * @property {Number} x\n * @property {Number} y\n * @property {Number} width\n * @property {Number} height\n * @property {Number} left\n * @property {Number} right\n * @property {Number} bottom\n * @property {Number} top\n */\n\n/**\n * @typedef {Object} DragEvent\n * @property {MouseEvent} mouseEvent\n * @property {Number} sx - Start screen x\n * @property {Number} sy - Start screen y\n * @property {Number} x - Current screen x\n * @property {Number} y - Current screen y\n * @property {Number} dx - Delta x\n * @property {Number} dy - Delta y\n * @property {Number} distance - Distance (current - start)\n * @property {Number} minDist - Minimum distance to raise onDrag\n */\n\n /** keyboard api (http://dmauro.github.io/Keypress/)\n * @typedef keyboard\n * @property {function} on\n * @property {function} unregister\n */\n\nconst epsilon = Math.pow(2, -52);\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\n\nclass Input {\n\n    /**\n     * \n     * @param {HTMLElement} domContainer \n     */\n    constructor (domContainer){\n        this.enabled = true;\n        \n        var scope = this;\n        Object.defineProperty(this, 'camera', {\n            get: function(){\n                return scope._camera;\n            },\n            set: function(camera){\n                scope._camera = camera;\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\n            }\n        });\n\n        this.domContainer = domContainer;\n\n        this._mouse = {x:0, y:0};\n        this.mouseScreen = new THREE.Vector2();\n        this.mouseViewport = new THREE.Vector2();\n        this.mouseDelta = new THREE.Vector2();\n        this.lastMouseDownTime = 0;\n        /**\n         * @type {IScreen}\n         */\n        this.screen = {};\n        this.ComputeScreen();\n\n        this.raycaster = new THREE.Raycaster();\n\n        this.clock = new THREE.Clock();\n        this.clock.start();\n\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\n        this.updateComponents = [\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\n        ];\n\n        this.fireOnce = [];\n\n        this.onMouseDown = [];\n        this.onMouseUp = [];\n        this.onRightClick = [];\n        this.onDoubleClick = [];\n        this.onClick = [];\n        this.onDrag = [];\n\n        /**\n         * @type {DragEvent}\n         */\n        this.onDragEvent = {\n            mouseEvent: undefined,\n            sx: undefined, sy: undefined,\n            x: 0, y: 0,\n            dx: 0, dy: 0,\n            distance: 0,\n            minDist: 4 // pixels \n        };\n        var onDragStatus = false;\n        Object.defineProperty(this.onDragEvent, '_status', {\n            get: function(){\n                return onDragStatus;\n            },\n            set: function(value){\n                onDragStatus = value;\n                this.sx = this.sy = undefined;\n                this.dx = this.dy = 0;\n            }\n        })\n\n        this.doubleClickTime = .2;\n        \n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\n\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\n        if (this.domContainer.addEventListener) {\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\n        }\n        else\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\n\n        this.screenNeedsUpdate = true;\n        window.addEventListener('scroll', this.OnScroll.bind(this));\n\n        this.cameraNeedsUpdate = true;\n        this.onResize = [];\n        window.addEventListener('resize', this.OnResize.bind(this));\n\n        /**\n         * @type {keyboard}\n         */\n        this.keyboard = new keypress.Listener();\n        this.keyboard.on = this.keyboard.simple_combo;\n        this.keyboard.unregister = this.keyboard.unregister_combo;\n        this.keys = {};\n\n        //\n        \n    }\n\n    Dispose(){\n        // remove listeners\n    }\n\n    ListenKeys(keys){\n        if(keys === undefined) {\n            keys = defaultKeysListen;\n        }\n\n        var scope = this;\n        keys.forEach(key => {\n            scope.keys[key] = false;\n            scope.keyboard.register_combo({\n                keys: key,\n                prevent_repeat: true,\n                on_keydown: function(){\n                    scope.keys[key] = true;\n                },\n                on_keyup: function(){\n                    scope.keys[key] = false;\n                }\n            });\n        });\n    }\n\n    ComputeScreen(){\n        var screen = this.domContainer.getBoundingClientRect();\n        this.screen.x = screen.x;\n        this.screen.y = screen.y;\n        this.screen.width = screen.width;\n        this.screen.height = screen.height;\n        this.screen.left = screen.left;\n        this.screen.right = screen.right;\n        this.screen.bottom = screen.bottom;\n        this.screen.top = screen.top;\n        \n        /*\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\n        this.screen.x += rectOffset.x;\n        this.screen.left += rectOffset.x;\n        this.screen.y += rectOffset.y;\n        this.screen.top += rectOffset.y;\n        */\n    }\n\n    OnMouseDown(mouseEvent){\n        if(mouseEvent.button === 0){\n            this.UpdateScreenAndMouse(mouseEvent);\n            var now = this.clock.getElapsedTime();\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\n                if(this._dridMouseDown !== undefined){\n                    this.AbortDelayedAction(this._dridMouseDown);\n                    this._dridMouseDown = undefined;\n                }\n                this.OnDoubleClick(mouseEvent);\n                return;\n            }\n\n            this.lastMouseDownTime = now;\n            this.onDragEvent._status = true;\n\n            var scope = this;\n            this._dridMouseDown = this.DelayedAction(\n                this._mouseDownDelayed = function(){\n                    scope._dridMouseDown = undefined;\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\n                        scope.onMouseDown[i](mouseEvent);\n                    }\n                    scope.UpdateRaycast('OnMouseDown');\n                    scope.mouseDelta.copy(scope.mouseScreen);\n                }, \n                this.doubleClickTime * 1000\n            );\n        }\n    }\n\n    OnDoubleClick(mouseEvent){\n        for(var i = 0; i < this.onDoubleClick.length; i++){\n            this.onDoubleClick[i](mouseEvent);\n        }\n\n        this.UpdateRaycast('OnDoubleClick');\n    }\n\n    ExecuteDelayedMD(mouseEvent){\n        if(this._dridMouseDown !== undefined){\n            this.AbortDelayedAction(this._dridMouseDown);\n            this._dridMouseDown = undefined;\n            this._mouseDownDelayed();\n        }\n    }\n\n    OnMouseUp(mouseEvent){\n        if(mouseEvent.button === 0){\n            var now = this.clock.getElapsedTime();\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\n                this.ExecuteDelayedMD(mouseEvent);\n            }\n            \n            this.UpdateScreenAndMouse(mouseEvent);\n            for(var i = 0; i < this.onMouseUp.length; i++){\n                this.onMouseUp[i](mouseEvent);\n            }\n\n            this.UpdateRaycast('OnMouseUp');\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\n            var noMouseDrag = d < 10; // pixels squared\n            if(noMouseDrag){\n                this.OnClick(mouseEvent);\n            }\n\n            this.onDragEvent._status = false;\n        }\n    }\n\n    OnMouseDrag(){\n        var p = this.onDragEvent;\n        if(p._status){\n            let m = this.mouseScreen;\n            if(p.sx === undefined) p.sx = p.x = m.x;\n            if(p.sy === undefined) p.sy = p.y = m.y;\n\n            let vx = p.x - p.sx,\n                vy = p.y - p.sy;\n            p.distance = Math.sqrt(vx * vx + vy * vy);\n            if(p.distance > p.minDist && \n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\n            ){\n                for(var i = 0; i < this.onDrag.length; i++){\n                    this.onDrag[i](p);\n                }\n            }\n\n            p.dx = p.x - m.x;\n            p.dy = p.y - m.y;\n\n            p.x = m.x;\n            p.y = m.y;\n        }\n    }\n\n    OnClick(mouseEvent){\n        for(var i = 0; i < this.onClick.length; i++){\n            this.onClick[i](mouseEvent);\n        }\n\n        this.UpdateRaycast('OnClick');\n    }\n\n    OnRightClick(mouseEvent){\n        //mouseEvent.preventDefault();\n        this.UpdateScreenAndMouse(mouseEvent);\n        for(var i = 0; i < this.onRightClick.length; i++){\n            this.onRightClick[i](mouseEvent);\n        }\n\n        this.UpdateRaycast('OnRightClick');\n    }\n\n    OnMouseMove(mouseEvent){\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\n        this.onDragEvent.mouseEvent = mouseEvent;\n        this.ExecuteDelayedMD(mouseEvent);\n    }\n\n    OnScroll(event){\n        this.screenNeedsUpdate = true;\n    }\n\n    OnMouseWheel(mouseEvent){\n        mouseEvent.preventDefault();\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\n        this.fov.lerp = 0;\n    }\n\n    LerpZoom(){\n        this.fov.lerp += .1;\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\n            return;\n        }\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\n        this.camera.updateProjectionMatrix();\n    }\n\n    OnResize(event) {\n        this.screenNeedsUpdate = true;\n        this.cameraNeedsUpdate = true;\n    }\n\n    RemoveEventCallback(eventType, callback){\n        var callbacks = this[eventType];\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\n            if(callbacks[iCallback] === callback){\n                callbacks.splice(iCallback, 1);\n            }\n        }\n    }\n\n    Update(){\n        this.UpdateScreenAndMouse();\n\n        this.FireOnce();\n\n        // Raycasts\n        this.UpdateRaycaster();\n        this.UpdateRaycast('Update');\n\n        var now = this.clock.getElapsedTime();\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\n            var updateComponent = this.updateComponents[iUpdate];\n            if(updateComponent.active\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\n            ){\n                updateComponent.Update(now);\n            }\n        }\n\n        this.OnMouseDrag();\n    }\n\n    Update25(){\n        this.LerpZoom();\n        this.UpdateRaycast('Update25');\n    }\n\n    Update10(){\n        this.UpdateRaycast('Update10');\n    }\n\n    FireOnce(){\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\n            this.fireOnce[iCallback]();\n        }\n        this.fireOnce.length = 0;\n    }\n\n    DelayedAction(action, delay){\n        var drid = window.setTimeout(function(){\n            action();\n        }, delay);\n        return drid;\n    }\n\n    AbortDelayedAction(drid){\n        window.clearTimeout(drid);\n        return;\n    }\n\n    Repeat(action, interval){\n        if(this._repeats === undefined) this._repeats = [];\n        var drid = window.setInterval(function(){\n            action();\n        }, interval);\n        this._repeats.push({action:action, drid:drid});\n        return drid;\n    }\n\n    StopRepeat(action){\n        if(this._repeats === undefined) return;\n        if(typeof action === 'number'){\n            window.clearInterval(action);\n            return;\n        }\n        for(var i = 0; i < this._repeats.length; i++){\n            if(this._repeats[i].action === action){\n                window.clearInterval(this._repeats[i].drid);\n                this._repeats.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    UpdateScreenAndMouse(mouseEvent){\n        if(this.screenNeedsUpdate) {\n            this.ComputeScreen();\n            this.screenNeedsUpdate = false;\n        }\n        if(this.cameraNeedsUpdate) {\n            for(var i = 0; i < this.onResize.length; i++){\n                this.onResize[i](this.screen);\n            }\n            this.cameraNeedsUpdate = false;\n        }\n\n        if(mouseEvent !== undefined){\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\n        }\n\n        this.mouseScreen.x = this._mouse.x;\n        this.mouseScreen.y = this._mouse.y;\n\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\n    }\n\n    RaycastTest(objects, recursive){\n        this.UpdateRaycaster();\n        recursive = recursive !== undefined ? recursive : false;\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\n        if (intersects.length > 0) {\n            return intersects[0];\n        }\n        return undefined;\n    }\n\n    /**\n     * @param {string} event Update Update25 Update10 OnMouseDown OnDoubleClick OnMouseUp OnRightClick OnClick\n     * @param {string} groupID \n     * @param {RaycastGroup} group \n     */\n    AddRaycastGroup(event, groupID, group){\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\n        this._raycastGroups[event][groupID] = group;\n    }\n\n    RemoveRaycastGroup(event, groupID){\n        delete this._raycastGroups[event][groupID];\n    }\n\n    UpdateRaycaster(){\n        this.camera.updateMatrixWorld();\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\n    }\n\n    UpdateRaycast(event){\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\n        var numRaycastGroups = raycastGroupsKeys.length;\n        if(numRaycastGroups > 0){\n            if(numRaycastGroups > 1)\n                raycastGroupsKeys.sort().reverse();\n            \n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\n                var key = raycastGroupsKeys[iGroup];\n                this._raycastGroups[event][key].Raycast(this.raycaster);\n            }\n        }\n    }\n}\n\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","// Generated by CoffeeScript 1.8.0\n\n/*\nCopyright 2014 David Mauro\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\nKeypress is a robust keyboard input capturing Javascript utility\nfocused on input for games.\n\nversion 2.1.3\n */\n\n\n/*\nCombo options available and their defaults:\n    keys            : []            - An array of the keys pressed together to activate combo.\n    count           : 0             - The number of times a counting combo has been pressed. Reset on release.\n    is_unordered    : false         - Unless this is set to true, the keys can be pressed down in any order.\n    is_counting     : false         - Makes this a counting combo (see documentation).\n    is_exclusive    : false         - This combo will replace other exclusive combos when true.\n    is_solitary     : false         - This combo will only fire if ONLY it's keys are pressed down.\n    is_sequence     : false         - Rather than a key combo, this is an ordered key sequence.\n    prevent_default : false         - Prevent default behavior for all component key keypresses.\n    prevent_repeat  : false         - Prevent the combo from repeating when keydown is held.\n    on_keydown      : null          - A function that is called when the combo is pressed.\n    on_keyup        : null          - A function that is called when the combo is released.\n    on_release      : null          - A function that is called when all keys in the combo are released.\n    this            : undefined     - Defines the scope for your callback functions.\n */\n\n(function() {\n  var Combo, keypress, _change_keycodes_by_browser, _compare_arrays, _compare_arrays_sorted, _convert_key_to_readable, _convert_to_shifted_key, _decide_meta_key, _factory_defaults, _filter_array, _index_of_in_array, _is_array_in_array, _is_array_in_array_sorted, _key_is_valid, _keycode_alternate_names, _keycode_dictionary, _keycode_shifted_keys, _log_error, _metakey, _modifier_event_mapping, _modifier_keys, _validate_combo,\n    __hasProp = {}.hasOwnProperty,\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  _factory_defaults = {\n    is_unordered: false,\n    is_counting: false,\n    is_exclusive: false,\n    is_solitary: false,\n    prevent_default: false,\n    prevent_repeat: false\n  };\n\n  _modifier_keys = [\"meta\", \"alt\", \"option\", \"ctrl\", \"shift\", \"cmd\"];\n\n  _metakey = \"ctrl\";\n\n  keypress = {};\n\n  keypress.debug = false;\n\n  Combo = (function() {\n    function Combo(dictionary) {\n      var property, value;\n      for (property in dictionary) {\n        if (!__hasProp.call(dictionary, property)) continue;\n        value = dictionary[property];\n        if (value !== false) {\n          this[property] = value;\n        }\n      }\n      this.keys = this.keys || [];\n      this.count = this.count || 0;\n    }\n\n    Combo.prototype.allows_key_repeat = function() {\n      return !this.prevent_repeat && typeof this.on_keydown === \"function\";\n    };\n\n    Combo.prototype.reset = function() {\n      this.count = 0;\n      return this.keyup_fired = null;\n    };\n\n    return Combo;\n\n  })();\n\n  keypress.Listener = (function() {\n    function Listener(element, defaults) {\n      var attach_handler, property, value;\n      if ((typeof jQuery !== \"undefined\" && jQuery !== null) && element instanceof jQuery) {\n        if (element.length !== 1) {\n          _log_error(\"Warning: your jQuery selector should have exactly one object.\");\n        }\n        element = element[0];\n      }\n      this.should_suppress_event_defaults = false;\n      this.should_force_event_defaults = false;\n      this.sequence_delay = 800;\n      this._registered_combos = [];\n      this._keys_down = [];\n      this._active_combos = [];\n      this._sequence = [];\n      this._sequence_timer = null;\n      this._prevent_capture = false;\n      this._defaults = defaults || {};\n      for (property in _factory_defaults) {\n        if (!__hasProp.call(_factory_defaults, property)) continue;\n        value = _factory_defaults[property];\n        this._defaults[property] = this._defaults[property] || value;\n      }\n      this.element = element || document.body;\n      attach_handler = function(target, event, handler) {\n        if (target.addEventListener) {\n          target.addEventListener(event, handler);\n        } else if (target.attachEvent) {\n          target.attachEvent(\"on\" + event, handler);\n        }\n        return handler;\n      };\n      this.keydown_event = attach_handler(this.element, \"keydown\", (function(_this) {\n        return function(e) {\n          e = e || window.event;\n          _this._receive_input(e, true);\n          return _this._bug_catcher(e);\n        };\n      })(this));\n      this.keyup_event = attach_handler(this.element, \"keyup\", (function(_this) {\n        return function(e) {\n          e = e || window.event;\n          return _this._receive_input(e, false);\n        };\n      })(this));\n      this.blur_event = attach_handler(window, \"blur\", (function(_this) {\n        return function() {\n          var key, _i, _len, _ref;\n          _ref = _this._keys_down;\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            key = _ref[_i];\n            _this._key_up(key, {});\n          }\n          return _this._keys_down = [];\n        };\n      })(this));\n    }\n\n    Listener.prototype.destroy = function() {\n      var remove_handler;\n      remove_handler = function(target, event, handler) {\n        if (target.removeEventListener != null) {\n          return target.removeEventListener(event, handler);\n        } else if (target.removeEvent != null) {\n          return target.removeEvent(\"on\" + event, handler);\n        }\n      };\n      remove_handler(this.element, \"keydown\", this.keydown_event);\n      remove_handler(this.element, \"keyup\", this.keyup_event);\n      return remove_handler(window, \"blur\", this.blur_event);\n    };\n\n    Listener.prototype._bug_catcher = function(e) {\n      var _ref, _ref1;\n      if (_metakey === \"cmd\" && __indexOf.call(this._keys_down, \"cmd\") >= 0 && ((_ref = _convert_key_to_readable((_ref1 = e.keyCode) != null ? _ref1 : e.key)) !== \"cmd\" && _ref !== \"shift\" && _ref !== \"alt\" && _ref !== \"caps\" && _ref !== \"tab\")) {\n        return this._receive_input(e, false);\n      }\n    };\n\n    Listener.prototype._cmd_bug_check = function(combo_keys) {\n      if (_metakey === \"cmd\" && __indexOf.call(this._keys_down, \"cmd\") >= 0 && __indexOf.call(combo_keys, \"cmd\") < 0) {\n        return false;\n      }\n      return true;\n    };\n\n    Listener.prototype._prevent_default = function(e, should_prevent) {\n      if ((should_prevent || this.should_suppress_event_defaults) && !this.should_force_event_defaults) {\n        if (e.preventDefault) {\n          e.preventDefault();\n        } else {\n          e.returnValue = false;\n        }\n        if (e.stopPropagation) {\n          return e.stopPropagation();\n        }\n      }\n    };\n\n    Listener.prototype._get_active_combos = function(key) {\n      var active_combos, keys_down;\n      active_combos = [];\n      keys_down = _filter_array(this._keys_down, function(down_key) {\n        return down_key !== key;\n      });\n      keys_down.push(key);\n      this._match_combo_arrays(keys_down, (function(_this) {\n        return function(match) {\n          if (_this._cmd_bug_check(match.keys)) {\n            return active_combos.push(match);\n          }\n        };\n      })(this));\n      this._fuzzy_match_combo_arrays(keys_down, (function(_this) {\n        return function(match) {\n          if (__indexOf.call(active_combos, match) >= 0) {\n            return;\n          }\n          if (!(match.is_solitary || !_this._cmd_bug_check(match.keys))) {\n            return active_combos.push(match);\n          }\n        };\n      })(this));\n      return active_combos;\n    };\n\n    Listener.prototype._get_potential_combos = function(key) {\n      var combo, potentials, _i, _len, _ref;\n      potentials = [];\n      _ref = this._registered_combos;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        combo = _ref[_i];\n        if (combo.is_sequence) {\n          continue;\n        }\n        if (__indexOf.call(combo.keys, key) >= 0 && this._cmd_bug_check(combo.keys)) {\n          potentials.push(combo);\n        }\n      }\n      return potentials;\n    };\n\n    Listener.prototype._add_to_active_combos = function(combo) {\n      var active_combo, active_key, active_keys, already_replaced, combo_key, i, should_prepend, should_replace, _i, _j, _k, _len, _len1, _ref, _ref1;\n      should_replace = false;\n      should_prepend = true;\n      already_replaced = false;\n      if (__indexOf.call(this._active_combos, combo) >= 0) {\n        return true;\n      } else if (this._active_combos.length) {\n        for (i = _i = 0, _ref = this._active_combos.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          active_combo = this._active_combos[i];\n          if (!(active_combo && active_combo.is_exclusive && combo.is_exclusive)) {\n            continue;\n          }\n          active_keys = active_combo.keys;\n          if (!should_replace) {\n            for (_j = 0, _len = active_keys.length; _j < _len; _j++) {\n              active_key = active_keys[_j];\n              should_replace = true;\n              if (__indexOf.call(combo.keys, active_key) < 0) {\n                should_replace = false;\n                break;\n              }\n            }\n          }\n          if (should_prepend && !should_replace) {\n            _ref1 = combo.keys;\n            for (_k = 0, _len1 = _ref1.length; _k < _len1; _k++) {\n              combo_key = _ref1[_k];\n              should_prepend = false;\n              if (__indexOf.call(active_keys, combo_key) < 0) {\n                should_prepend = true;\n                break;\n              }\n            }\n          }\n          if (should_replace) {\n            if (already_replaced) {\n              active_combo = this._active_combos.splice(i, 1)[0];\n              if (active_combo != null) {\n                active_combo.reset();\n              }\n            } else {\n              active_combo = this._active_combos.splice(i, 1, combo)[0];\n              if (active_combo != null) {\n                active_combo.reset();\n              }\n              already_replaced = true;\n            }\n            should_prepend = false;\n          }\n        }\n      }\n      if (should_prepend) {\n        this._active_combos.unshift(combo);\n      }\n      return should_replace || should_prepend;\n    };\n\n    Listener.prototype._remove_from_active_combos = function(combo) {\n      var active_combo, i, _i, _ref;\n      for (i = _i = 0, _ref = this._active_combos.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        active_combo = this._active_combos[i];\n        if (active_combo === combo) {\n          combo = this._active_combos.splice(i, 1)[0];\n          combo.reset();\n          break;\n        }\n      }\n    };\n\n    Listener.prototype._get_possible_sequences = function() {\n      var combo, i, j, match, matches, sequence, _i, _j, _k, _len, _ref, _ref1, _ref2;\n      matches = [];\n      _ref = this._registered_combos;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        combo = _ref[_i];\n        for (j = _j = 1, _ref1 = this._sequence.length; 1 <= _ref1 ? _j <= _ref1 : _j >= _ref1; j = 1 <= _ref1 ? ++_j : --_j) {\n          sequence = this._sequence.slice(-j);\n          if (!combo.is_sequence) {\n            continue;\n          }\n          if (__indexOf.call(combo.keys, \"shift\") < 0) {\n            sequence = _filter_array(sequence, function(key) {\n              return key !== \"shift\";\n            });\n            if (!sequence.length) {\n              continue;\n            }\n          }\n          for (i = _k = 0, _ref2 = sequence.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {\n            if (combo.keys[i] === sequence[i]) {\n              match = true;\n            } else {\n              match = false;\n              break;\n            }\n          }\n          if (match) {\n            matches.push(combo);\n          }\n        }\n      }\n      return matches;\n    };\n\n    Listener.prototype._add_key_to_sequence = function(key, e) {\n      var combo, sequence_combos, _i, _len;\n      this._sequence.push(key);\n      sequence_combos = this._get_possible_sequences();\n      if (sequence_combos.length) {\n        for (_i = 0, _len = sequence_combos.length; _i < _len; _i++) {\n          combo = sequence_combos[_i];\n          this._prevent_default(e, combo.prevent_default);\n        }\n        if (this._sequence_timer) {\n          clearTimeout(this._sequence_timer);\n        }\n        if (this.sequence_delay > -1) {\n          this._sequence_timer = setTimeout(function() {\n            return this._sequence = [];\n          }, this.sequence_delay);\n        }\n      } else {\n        this._sequence = [];\n      }\n    };\n\n    Listener.prototype._get_sequence = function(key) {\n      var combo, i, j, match, seq_key, sequence, _i, _j, _k, _len, _ref, _ref1, _ref2;\n      _ref = this._registered_combos;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        combo = _ref[_i];\n        if (!combo.is_sequence) {\n          continue;\n        }\n        for (j = _j = 1, _ref1 = this._sequence.length; 1 <= _ref1 ? _j <= _ref1 : _j >= _ref1; j = 1 <= _ref1 ? ++_j : --_j) {\n          sequence = (_filter_array(this._sequence, function(seq_key) {\n            if (__indexOf.call(combo.keys, \"shift\") >= 0) {\n              return true;\n            }\n            return seq_key !== \"shift\";\n          })).slice(-j);\n          if (combo.keys.length !== sequence.length) {\n            continue;\n          }\n          for (i = _k = 0, _ref2 = sequence.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; i = 0 <= _ref2 ? ++_k : --_k) {\n            seq_key = sequence[i];\n            if (__indexOf.call(combo.keys, \"shift\") < 0) {\n              if (seq_key === \"shift\") {\n                continue;\n              }\n            }\n            if (key === \"shift\" && __indexOf.call(combo.keys, \"shift\") < 0) {\n              continue;\n            }\n            if (combo.keys[i] === seq_key) {\n              match = true;\n            } else {\n              match = false;\n              break;\n            }\n          }\n        }\n        if (match) {\n          if (combo.is_exclusive) {\n            this._sequence = [];\n          }\n          return combo;\n        }\n      }\n      return false;\n    };\n\n    Listener.prototype._receive_input = function(e, is_keydown) {\n      var key, _ref;\n      if (this._prevent_capture) {\n        if (this._keys_down.length) {\n          this._keys_down = [];\n        }\n        return;\n      }\n      key = _convert_key_to_readable((_ref = e.keyCode) != null ? _ref : e.key);\n      if (!is_keydown && !this._keys_down.length && (key === \"alt\" || key === _metakey)) {\n        return;\n      }\n      if (!key) {\n        return;\n      }\n      if (is_keydown) {\n        return this._key_down(key, e);\n      } else {\n        return this._key_up(key, e);\n      }\n    };\n\n    Listener.prototype._fire = function(event, combo, key_event, is_autorepeat) {\n      if (typeof combo[\"on_\" + event] === \"function\") {\n        this._prevent_default(key_event, combo[\"on_\" + event].call(combo[\"this\"], key_event, combo.count, is_autorepeat) !== true);\n      }\n      if (event === \"release\") {\n        combo.count = 0;\n      }\n      if (event === \"keyup\") {\n        return combo.keyup_fired = true;\n      }\n    };\n\n    Listener.prototype._match_combo_arrays = function(potential_match, match_handler) {\n      var source_combo, _i, _len, _ref;\n      _ref = this._registered_combos;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        source_combo = _ref[_i];\n        if ((!source_combo.is_unordered && _compare_arrays_sorted(potential_match, source_combo.keys)) || (source_combo.is_unordered && _compare_arrays(potential_match, source_combo.keys))) {\n          match_handler(source_combo);\n        }\n      }\n    };\n\n    Listener.prototype._fuzzy_match_combo_arrays = function(potential_match, match_handler) {\n      var source_combo, _i, _len, _ref;\n      _ref = this._registered_combos;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        source_combo = _ref[_i];\n        if ((!source_combo.is_unordered && _is_array_in_array_sorted(source_combo.keys, potential_match)) || (source_combo.is_unordered && _is_array_in_array(source_combo.keys, potential_match))) {\n          match_handler(source_combo);\n        }\n      }\n    };\n\n    Listener.prototype._keys_remain = function(combo) {\n      var key, keys_remain, _i, _len, _ref;\n      _ref = combo.keys;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        key = _ref[_i];\n        if (__indexOf.call(this._keys_down, key) >= 0) {\n          keys_remain = true;\n          break;\n        }\n      }\n      return keys_remain;\n    };\n\n    Listener.prototype._key_down = function(key, e) {\n      var combo, combos, event_mod, i, mod, potential, potential_combos, sequence_combo, shifted_key, _i, _j, _k, _len, _len1, _ref;\n      shifted_key = _convert_to_shifted_key(key, e);\n      if (shifted_key) {\n        key = shifted_key;\n      }\n      this._add_key_to_sequence(key, e);\n      sequence_combo = this._get_sequence(key);\n      if (sequence_combo) {\n        this._fire(\"keydown\", sequence_combo, e);\n      }\n      for (mod in _modifier_event_mapping) {\n        event_mod = _modifier_event_mapping[mod];\n        if (!e[event_mod]) {\n          continue;\n        }\n        if (mod === key || __indexOf.call(this._keys_down, mod) >= 0) {\n          continue;\n        }\n        this._keys_down.push(mod);\n      }\n      for (mod in _modifier_event_mapping) {\n        event_mod = _modifier_event_mapping[mod];\n        if (mod === key) {\n          continue;\n        }\n        if (__indexOf.call(this._keys_down, mod) >= 0 && !e[event_mod]) {\n          if (mod === \"cmd\" && _metakey !== \"cmd\") {\n            continue;\n          }\n          for (i = _i = 0, _ref = this._keys_down.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            if (this._keys_down[i] === mod) {\n              this._keys_down.splice(i, 1);\n            }\n          }\n        }\n      }\n      combos = this._get_active_combos(key);\n      potential_combos = this._get_potential_combos(key);\n      for (_j = 0, _len = combos.length; _j < _len; _j++) {\n        combo = combos[_j];\n        this._handle_combo_down(combo, potential_combos, key, e);\n      }\n      if (potential_combos.length) {\n        for (_k = 0, _len1 = potential_combos.length; _k < _len1; _k++) {\n          potential = potential_combos[_k];\n          this._prevent_default(e, potential.prevent_default);\n        }\n      }\n      if (__indexOf.call(this._keys_down, key) < 0) {\n        this._keys_down.push(key);\n      }\n    };\n\n    Listener.prototype._handle_combo_down = function(combo, potential_combos, key, e) {\n      var is_autorepeat, is_other_exclusive, potential_combo, result, _i, _len;\n      if (__indexOf.call(combo.keys, key) < 0) {\n        return false;\n      }\n      this._prevent_default(e, combo && combo.prevent_default);\n      is_autorepeat = false;\n      if (__indexOf.call(this._keys_down, key) >= 0) {\n        is_autorepeat = true;\n        if (!combo.allows_key_repeat()) {\n          return false;\n        }\n      }\n      result = this._add_to_active_combos(combo, key);\n      combo.keyup_fired = false;\n      is_other_exclusive = false;\n      if (combo.is_exclusive) {\n        for (_i = 0, _len = potential_combos.length; _i < _len; _i++) {\n          potential_combo = potential_combos[_i];\n          if (potential_combo.is_exclusive && potential_combo.keys.length > combo.keys.length) {\n            is_other_exclusive = true;\n            break;\n          }\n        }\n      }\n      if (!is_other_exclusive) {\n        if (combo.is_counting && typeof combo.on_keydown === \"function\") {\n          combo.count += 1;\n        }\n        if (result) {\n          return this._fire(\"keydown\", combo, e, is_autorepeat);\n        }\n      }\n    };\n\n    Listener.prototype._key_up = function(key, e) {\n      var active_combo, active_combos_length, combo, combos, i, sequence_combo, shifted_key, unshifted_key, _i, _j, _k, _l, _len, _len1, _len2, _ref, _ref1, _ref2, _ref3;\n      unshifted_key = key;\n      shifted_key = _convert_to_shifted_key(key, e);\n      if (shifted_key) {\n        key = shifted_key;\n      }\n      shifted_key = _keycode_shifted_keys[unshifted_key];\n      if (e.shiftKey) {\n        if (!(shifted_key && __indexOf.call(this._keys_down, shifted_key) >= 0)) {\n          key = unshifted_key;\n        }\n      } else {\n        if (!(unshifted_key && __indexOf.call(this._keys_down, unshifted_key) >= 0)) {\n          key = shifted_key;\n        }\n      }\n      sequence_combo = this._get_sequence(key);\n      if (sequence_combo) {\n        this._fire(\"keyup\", sequence_combo, e);\n      }\n      if (__indexOf.call(this._keys_down, key) < 0) {\n        return false;\n      }\n      for (i = _i = 0, _ref = this._keys_down.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        if ((_ref1 = this._keys_down[i]) === key || _ref1 === shifted_key || _ref1 === unshifted_key) {\n          this._keys_down.splice(i, 1);\n          break;\n        }\n      }\n      active_combos_length = this._active_combos.length;\n      combos = [];\n      _ref2 = this._active_combos;\n      for (_j = 0, _len = _ref2.length; _j < _len; _j++) {\n        active_combo = _ref2[_j];\n        if (__indexOf.call(active_combo.keys, key) >= 0) {\n          combos.push(active_combo);\n        }\n      }\n      for (_k = 0, _len1 = combos.length; _k < _len1; _k++) {\n        combo = combos[_k];\n        this._handle_combo_up(combo, e, key);\n      }\n      if (active_combos_length > 1) {\n        _ref3 = this._active_combos;\n        for (_l = 0, _len2 = _ref3.length; _l < _len2; _l++) {\n          active_combo = _ref3[_l];\n          if (active_combo === void 0 || __indexOf.call(combos, active_combo) >= 0) {\n            continue;\n          }\n          if (!this._keys_remain(active_combo)) {\n            this._remove_from_active_combos(active_combo);\n          }\n        }\n      }\n    };\n\n    Listener.prototype._handle_combo_up = function(combo, e, key) {\n      var keys_down, keys_remaining;\n      this._prevent_default(e, combo && combo.prevent_default);\n      keys_remaining = this._keys_remain(combo);\n      if (!combo.keyup_fired) {\n        keys_down = this._keys_down.slice();\n        keys_down.push(key);\n        if (!combo.is_solitary || _compare_arrays(keys_down, combo.keys)) {\n          this._fire(\"keyup\", combo, e);\n          if (combo.is_counting && typeof combo.on_keyup === \"function\" && typeof combo.on_keydown !== \"function\") {\n            combo.count += 1;\n          }\n        }\n      }\n      if (!keys_remaining) {\n        this._fire(\"release\", combo, e);\n        this._remove_from_active_combos(combo);\n      }\n    };\n\n    Listener.prototype.simple_combo = function(keys, callback) {\n      return this.register_combo({\n        keys: keys,\n        on_keydown: callback\n      });\n    };\n\n    Listener.prototype.counting_combo = function(keys, count_callback) {\n      return this.register_combo({\n        keys: keys,\n        is_counting: true,\n        is_unordered: false,\n        on_keydown: count_callback\n      });\n    };\n\n    Listener.prototype.sequence_combo = function(keys, callback) {\n      return this.register_combo({\n        keys: keys,\n        on_keydown: callback,\n        is_sequence: true,\n        is_exclusive: true\n      });\n    };\n\n    Listener.prototype.register_combo = function(combo_dictionary) {\n      var combo, property, value, _ref;\n      if (typeof combo_dictionary[\"keys\"] === \"string\") {\n        combo_dictionary[\"keys\"] = combo_dictionary[\"keys\"].split(\" \");\n      }\n      _ref = this._defaults;\n      for (property in _ref) {\n        if (!__hasProp.call(_ref, property)) continue;\n        value = _ref[property];\n        if (combo_dictionary[property] === void 0) {\n          combo_dictionary[property] = value;\n        }\n      }\n      combo = new Combo(combo_dictionary);\n      if (_validate_combo(combo)) {\n        this._registered_combos.push(combo);\n        return combo;\n      }\n    };\n\n    Listener.prototype.register_many = function(combo_array) {\n      var combo, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = combo_array.length; _i < _len; _i++) {\n        combo = combo_array[_i];\n        _results.push(this.register_combo(combo));\n      }\n      return _results;\n    };\n\n    Listener.prototype.unregister_combo = function(keys_or_combo) {\n      var combo, unregister_combo, _i, _len, _ref, _results;\n      if (!keys_or_combo) {\n        return false;\n      }\n      unregister_combo = (function(_this) {\n        return function(combo) {\n          var i, _i, _ref, _results;\n          _results = [];\n          for (i = _i = 0, _ref = _this._registered_combos.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            if (combo === _this._registered_combos[i]) {\n              _this._registered_combos.splice(i, 1);\n              break;\n            } else {\n              _results.push(void 0);\n            }\n          }\n          return _results;\n        };\n      })(this);\n      if (keys_or_combo instanceof Combo) {\n        return unregister_combo(keys_or_combo);\n      } else {\n        if (typeof keys_or_combo === \"string\") {\n          keys_or_combo = keys_or_combo.split(\" \");\n        }\n        _ref = this._registered_combos;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          combo = _ref[_i];\n          if (combo == null) {\n            continue;\n          }\n          if ((combo.is_unordered && _compare_arrays(keys_or_combo, combo.keys)) || (!combo.is_unordered && _compare_arrays_sorted(keys_or_combo, combo.keys))) {\n            _results.push(unregister_combo(combo));\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      }\n    };\n\n    Listener.prototype.unregister_many = function(combo_array) {\n      var combo, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = combo_array.length; _i < _len; _i++) {\n        combo = combo_array[_i];\n        _results.push(this.unregister_combo(combo));\n      }\n      return _results;\n    };\n\n    Listener.prototype.get_registered_combos = function() {\n      return this._registered_combos;\n    };\n\n    Listener.prototype.reset = function() {\n      return this._registered_combos = [];\n    };\n\n    Listener.prototype.listen = function() {\n      return this._prevent_capture = false;\n    };\n\n    Listener.prototype.stop_listening = function() {\n      return this._prevent_capture = true;\n    };\n\n    Listener.prototype.get_meta_key = function() {\n      return _metakey;\n    };\n\n    return Listener;\n\n  })();\n\n  _decide_meta_key = function() {\n    if (navigator.userAgent.indexOf(\"Mac OS X\") !== -1) {\n      _metakey = \"cmd\";\n    }\n  };\n\n  _change_keycodes_by_browser = function() {\n    if (navigator.userAgent.indexOf(\"Opera\") !== -1) {\n      _keycode_dictionary[\"17\"] = \"cmd\";\n    }\n  };\n\n  _convert_key_to_readable = function(k) {\n    return _keycode_dictionary[k];\n  };\n\n  _filter_array = function(array, callback) {\n    var element;\n    if (array.filter) {\n      return array.filter(callback);\n    } else {\n      return (function() {\n        var _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = array.length; _i < _len; _i++) {\n          element = array[_i];\n          if (callback(element)) {\n            _results.push(element);\n          }\n        }\n        return _results;\n      })();\n    }\n  };\n\n  _compare_arrays = function(a1, a2) {\n    var item, _i, _len;\n    if (a1.length !== a2.length) {\n      return false;\n    }\n    for (_i = 0, _len = a1.length; _i < _len; _i++) {\n      item = a1[_i];\n      if (__indexOf.call(a2, item) >= 0) {\n        continue;\n      }\n      return false;\n    }\n    return true;\n  };\n\n  _compare_arrays_sorted = function(a1, a2) {\n    var i, _i, _ref;\n    if (a1.length !== a2.length) {\n      return false;\n    }\n    for (i = _i = 0, _ref = a1.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n      if (a1[i] !== a2[i]) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  _is_array_in_array = function(a1, a2) {\n    var item, _i, _len;\n    for (_i = 0, _len = a1.length; _i < _len; _i++) {\n      item = a1[_i];\n      if (__indexOf.call(a2, item) < 0) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  _index_of_in_array = Array.prototype.indexOf || function(a, item) {\n    var i, _i, _ref;\n    for (i = _i = 0, _ref = a.length; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n      if (a[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  _is_array_in_array_sorted = function(a1, a2) {\n    var index, item, prev, _i, _len;\n    prev = 0;\n    for (_i = 0, _len = a1.length; _i < _len; _i++) {\n      item = a1[_i];\n      index = _index_of_in_array.call(a2, item);\n      if (index >= prev) {\n        prev = index;\n      } else {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  _log_error = function() {\n    if (keypress.debug) {\n      return console.log.apply(console, arguments);\n    }\n  };\n\n  _key_is_valid = function(key) {\n    var valid, valid_key, _;\n    valid = false;\n    for (_ in _keycode_dictionary) {\n      valid_key = _keycode_dictionary[_];\n      if (key === valid_key) {\n        valid = true;\n        break;\n      }\n    }\n    if (!valid) {\n      for (_ in _keycode_shifted_keys) {\n        valid_key = _keycode_shifted_keys[_];\n        if (key === valid_key) {\n          valid = true;\n          break;\n        }\n      }\n    }\n    return valid;\n  };\n\n  _validate_combo = function(combo) {\n    var alt_name, i, key, mod_key, non_modifier_keys, property, validated, value, _i, _j, _k, _len, _len1, _ref, _ref1;\n    validated = true;\n    if (!combo.keys.length) {\n      _log_error(\"You're trying to bind a combo with no keys:\", combo);\n    }\n    for (i = _i = 0, _ref = combo.keys.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n      key = combo.keys[i];\n      alt_name = _keycode_alternate_names[key];\n      if (alt_name) {\n        key = combo.keys[i] = alt_name;\n      }\n      if (key === \"meta\") {\n        combo.keys.splice(i, 1, _metakey);\n      }\n      if (key === \"cmd\") {\n        _log_error(\"Warning: use the \\\"meta\\\" key rather than \\\"cmd\\\" for Windows compatibility\");\n      }\n    }\n    _ref1 = combo.keys;\n    for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n      key = _ref1[_j];\n      if (!_key_is_valid(key)) {\n        _log_error(\"Do not recognize the key \\\"\" + key + \"\\\"\");\n        validated = false;\n      }\n    }\n    if (__indexOf.call(combo.keys, \"meta\") >= 0 || __indexOf.call(combo.keys, \"cmd\") >= 0) {\n      non_modifier_keys = combo.keys.slice();\n      for (_k = 0, _len1 = _modifier_keys.length; _k < _len1; _k++) {\n        mod_key = _modifier_keys[_k];\n        if ((i = _index_of_in_array.call(non_modifier_keys, mod_key)) > -1) {\n          non_modifier_keys.splice(i, 1);\n        }\n      }\n      if (non_modifier_keys.length > 1) {\n        _log_error(\"META and CMD key combos cannot have more than 1 non-modifier keys\", combo, non_modifier_keys);\n        validated = false;\n      }\n    }\n    for (property in combo) {\n      value = combo[property];\n      if (_factory_defaults[property] === \"undefined\") {\n        _log_error(\"The property \" + property + \" is not a valid combo property. Your combo has still been registered.\");\n      }\n    }\n    return validated;\n  };\n\n  _convert_to_shifted_key = function(key, e) {\n    var k;\n    if (!e.shiftKey) {\n      return false;\n    }\n    k = _keycode_shifted_keys[key];\n    if (k != null) {\n      return k;\n    }\n    return false;\n  };\n\n  _modifier_event_mapping = {\n    \"cmd\": \"metaKey\",\n    \"ctrl\": \"ctrlKey\",\n    \"shift\": \"shiftKey\",\n    \"alt\": \"altKey\"\n  };\n\n  _keycode_alternate_names = {\n    \"escape\": \"esc\",\n    \"control\": \"ctrl\",\n    \"command\": \"cmd\",\n    \"break\": \"pause\",\n    \"windows\": \"cmd\",\n    \"option\": \"alt\",\n    \"caps_lock\": \"caps\",\n    \"apostrophe\": \"\\'\",\n    \"semicolon\": \";\",\n    \"tilde\": \"~\",\n    \"accent\": \"`\",\n    \"scroll_lock\": \"scroll\",\n    \"num_lock\": \"num\"\n  };\n\n  _keycode_shifted_keys = {\n    \"/\": \"?\",\n    \".\": \">\",\n    \",\": \"<\",\n    \"\\'\": \"\\\"\",\n    \";\": \":\",\n    \"[\": \"{\",\n    \"]\": \"}\",\n    \"\\\\\": \"|\",\n    \"`\": \"~\",\n    \"=\": \"+\",\n    \"-\": \"_\",\n    \"1\": \"!\",\n    \"2\": \"@\",\n    \"3\": \"#\",\n    \"4\": \"$\",\n    \"5\": \"%\",\n    \"6\": \"^\",\n    \"7\": \"&\",\n    \"8\": \"*\",\n    \"9\": \"(\",\n    \"0\": \")\"\n  };\n\n  _keycode_dictionary = {\n    0: \"\\\\\",\n    8: \"backspace\",\n    9: \"tab\",\n    12: \"num\",\n    13: \"enter\",\n    16: \"shift\",\n    17: \"ctrl\",\n    18: \"alt\",\n    19: \"pause\",\n    20: \"caps\",\n    27: \"esc\",\n    32: \"space\",\n    33: \"pageup\",\n    34: \"pagedown\",\n    35: \"end\",\n    36: \"home\",\n    37: \"left\",\n    38: \"up\",\n    39: \"right\",\n    40: \"down\",\n    44: \"print\",\n    45: \"insert\",\n    46: \"delete\",\n    48: \"0\",\n    49: \"1\",\n    50: \"2\",\n    51: \"3\",\n    52: \"4\",\n    53: \"5\",\n    54: \"6\",\n    55: \"7\",\n    56: \"8\",\n    57: \"9\",\n    65: \"a\",\n    66: \"b\",\n    67: \"c\",\n    68: \"d\",\n    69: \"e\",\n    70: \"f\",\n    71: \"g\",\n    72: \"h\",\n    73: \"i\",\n    74: \"j\",\n    75: \"k\",\n    76: \"l\",\n    77: \"m\",\n    78: \"n\",\n    79: \"o\",\n    80: \"p\",\n    81: \"q\",\n    82: \"r\",\n    83: \"s\",\n    84: \"t\",\n    85: \"u\",\n    86: \"v\",\n    87: \"w\",\n    88: \"x\",\n    89: \"y\",\n    90: \"z\",\n    91: \"cmd\",\n    92: \"cmd\",\n    93: \"cmd\",\n    96: \"num_0\",\n    97: \"num_1\",\n    98: \"num_2\",\n    99: \"num_3\",\n    100: \"num_4\",\n    101: \"num_5\",\n    102: \"num_6\",\n    103: \"num_7\",\n    104: \"num_8\",\n    105: \"num_9\",\n    106: \"num_multiply\",\n    107: \"num_add\",\n    108: \"num_enter\",\n    109: \"num_subtract\",\n    110: \"num_decimal\",\n    111: \"num_divide\",\n    112: \"f1\",\n    113: \"f2\",\n    114: \"f3\",\n    115: \"f4\",\n    116: \"f5\",\n    117: \"f6\",\n    118: \"f7\",\n    119: \"f8\",\n    120: \"f9\",\n    121: \"f10\",\n    122: \"f11\",\n    123: \"f12\",\n    124: \"print\",\n    144: \"num\",\n    145: \"scroll\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"\\'\",\n    223: \"`\",\n    224: \"cmd\",\n    225: \"alt\",\n    57392: \"ctrl\",\n    63289: \"num\",\n    59: \";\",\n    61: \"=\",\n    173: \"-\"\n  };\n\n  keypress._keycode_dictionary = _keycode_dictionary;\n\n  keypress._is_array_in_array_sorted = _is_array_in_array_sorted;\n\n  _decide_meta_key();\n\n  _change_keycodes_by_browser();\n\n  if (typeof define === \"function\" && define.amd) {\n    define([], function() {\n      return keypress;\n    });\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    exports.keypress = keypress;\n  } else {\n    window.keypress = keypress;\n  }\n\n}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ./src/min-dependencies/lib/keypress.js","class Quality {\n    constructor(callback){\n        this.testCallback = callback;\n    }\n\n    Common(quality){\n        //                      0       1       2       3\n        var composer        = [ 0,      0,      0,      1       ];\n        var antialias       = [ 0,      1,      1,      0       ];\n        var shadows         = [ 0,      0,      1,      1       ];\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\n        \n        var result = {\n            composer: Boolean(composer[quality]), \n            antialias: Boolean(antialias[quality]),\n            shadows: Boolean(shadows[quality]),\n            renderSizeMul: renderSizeMul[quality]\n        };\n        return result;\n    }\n\n    OnTestComplete(quality){\n        var result = this.Common(quality);\n        this.testCallback(result);\n    }\n\n    PerformanceTest1(){\n        var quality = 2;\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\n        this.OnTestComplete(quality);\n    }\n\n}\n\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","import Utils from \"../utils/cik/Utils\";\n\n/**\n * @typedef RendererParams\n * @property {Boolean} antialias\n * @property {Boolean} shadows\n * @property {Boolean} shadowsAutoUpdate\n * @property {Number} clearColor - hex color 0xff7f00\n * @property {Number} renderSizeMul\n * @property {Boolean} composer\n */\n\n/** @type {RendererParams} */\nconst defaultParams = {\n    antialias: true,\n    shadows: true,\n    shadowMapType: THREE.PCFSoftShadowMap,\n    shadowsAutoUpdate: true,\n    clearColor: 0xcfcfcf,\n    renderSizeMul: 1,\n    composer: false\n};\n\nclass Renderer {\n    /**\n     * @param {RendererParams} params \n     */\n    constructor(params) {\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\n\n        this.renderer.shadowMap.enabled = this.params.shadows;\n        this.renderer.shadowMap.type = this.params.shadowMapType;\n        this.renderer.shadowMap.autoUpdate = this.params.shadowsAutoUpdate;\n\n        this.renderer.physicallyCorrectLights = true;\n        this.renderer.gammaInput = true;\n        this.renderer.gammaOutput = true;\n        this.renderer.toneMapping = THREE.Uncharted2ToneMapping;\n        this.renderer.toneMappingExposure = 1.4;\n        //this.renderer.toneMappingExposure = ;\n        \n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\n        this.renderer.setPixelRatio(this.pixelRatio);\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\n\n        this.ResizeRenderer = function(screen){\n            var newWidth = screen.width * this.params.renderSizeMul;\n            var newHeight = screen.height * this.params.renderSizeMul;\n            this.renderer.setSize(newWidth, newHeight);\n        };\n\n        this.Render = function(scene, camera){\n            this.renderer.render(scene, camera);\n        };\n        \n        this.UpdateShadowMaps = function(){\n            this.renderer.shadowMap.needsUpdate = true;\n        };\n\n        this.ResizeDomElement = function(screen){\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\n        };\n\n        this.AdjustCamera = function(screen, camera){\n            camera.aspect = screen.width / screen.height;\n            camera.updateProjectionMatrix();\n        };\n\n        this.ReconfigureViewport = function(screen, camera){\n            this.AdjustCamera(screen, camera);\n\n            this.ResizeRenderer(screen);\n            this.ResizeDomElement(screen);\n        };\n\n        if(this.params.composer){\n            Renderer.UseComposer(this);\n        }\n    }\n\n    Dispose(){\n        this.renderer.dispose();\n    }\n\n    static UseComposer (sceneRenderer){\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\n        sceneRenderer.renderPass.renderToScreen = true;\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\n\n        sceneRenderer.UseCamera = function(camera){\n            sceneRenderer.camera = camera;\n            sceneRenderer.renderPass.camera = camera;\n        };\n\n        sceneRenderer.ResizeRenderer = function(screen){\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\n\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\n        };\n\n        sceneRenderer.Render = function(scene){\n            sceneRenderer.renderPass.scene = scene;\n            sceneRenderer.composer.render();\n        };\n    }\n}\n\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finger swipe\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// Rect areas that are ignored\n\tthis.ignoredAreas = [];\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panningMode = THREE.ScreenSpacePanning; // alternate THREE.HorizontalPanning\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tscope.domElement.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tswitch ( scope.panningMode ) {\n\n\t\t\t\tcase THREE.ScreenSpacePanning:\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.HorizontalPanning:\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\t//console.log( 'handleTouchStartPan' );\n\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\t//console.log( 'handleTouchMovePan' );\n\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\tfunction checkIgnoredAreas( event ){\n\n\t\tvar rects = scope.ignoredAreas;\n\t\tfor(var i = 0; i < rects.length; i++){\n\t\t\t\n\t\t\tif(rects[i].ContainsPoint(event.clientX, event.clientY))\n\t\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false || checkIgnoredAreas( event ) ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.domElement.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false  || checkIgnoredAreas( event ) ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleTouchStartDolly( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nTHREE.ScreenSpacePanning = 0;\nTHREE.HorizontalPanning = 1;\n\n\n// WEBPACK FOOTER //\n// ./src/min-dependencies/lib/three/controls/OrbitControls.js","import Controller from \"../scene/Controller\";\nimport Camera from \"../scene/Camera\";\nimport Transform from \"../scene/Transform\";\nimport Utils from \"../utils/cik/Utils\";\nimport EntryInputView, { EntryInputViewParams } from \"./EntryInputView\";\nimport CargoEntry from \"../components/common/CargoEntry\";\nimport SceneSetup from \"./SceneSetup\";\n\n/**\n * @typedef {Object} HUDViewParams\n * @property {import('../UX').default} ux\n * @property {SceneSetup} sceneSetup\n * @property {HTMLElement} container\n */\n\n/** @type {HUDViewParams} */\nconst defaultParams = {};\n\n// -11.3, 23.9, 215.5\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 100, 800), new THREE.Euler(0, Math.PI, 0) );\n\nclass HUDView extends Controller {\n    /**\n     * @param {HUDViewParams} params \n     * @param {import('../scene/Camera').CameraParams} cameraParams \n     */\n    constructor(params, cameraParams){\n        super(params);\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        let units = this.params.ux.params.units;\n\n        this.cameraController = new Camera(cameraParams);\n\n        this.cameraTransform = defaultCamTRS.Clone();\n        this.cameraTransform.position.multiplyScalar(units);\n        this.cameraTransform.Apply(this.cameraController);\n        this.cameraController.camera.updateMatrixWorld();\n        this.cameraController.OrbitControls(this.params.container);\n        this.cameraController.SetTarget(new THREE.Vector3());\n        this.cameraController.Hold();\n\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\n        //this.AddDefault(gridHelper);\n\n        /** @type {EntryInputViewParams} */\n        let entryInputViewParams = {ux: this.params.ux, sceneSetup: this.params.sceneSetup, scaleFigure: this.params.ux.params.scaleRefFigure};\n        this.entryInputView = new EntryInputView(entryInputViewParams);\n        this.AddDefault(this.entryInputView.view);\n\n        this.lastUpdateTime = 0;\n\n        this.params.sceneSetup.input.onMouseUp.push(this.OnMouseUp.bind(this));\n    }\n\n    OnMouseUp(){\n        if(this.entryInputView.previewing){\n            this.entryInputView.Preview(false);\n        }\n    }\n\n    /**\n     * @param {CargoEntry} entry \n     */\n    Preview(entry){\n        this.entryInputView.Preview(entry);\n    }\n\n    /** @param {Number} now */\n    Update(now){\n        let deltaTime = now - this.lastUpdateTime;\n        this.lastUpdateTime = now;\n        this.cameraController.Update();\n        \n        this.entryInputView.Update(now, deltaTime);\n    }\n}\n\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\nconst _position = Symbol('position');\nconst _rotation = Symbol('rotation');\n\nclass Transform {\n\n    /**\n     * @param {THREE.Vector3} position \n     * @param {THREE.Euler} rotation \n     */\n    constructor(position, rotation){\n        this[_position] = position || new THREE.Vector3();\n        this[_rotation] = rotation || new THREE.Euler();\n    }\n\n    /**\n     * @returns {THREE.Vector3}\n     */\n    get position(){\n        return this[_position];\n    }\n\n    set position(value){\n        this[_position] = value;\n    }\n\n    /**\n     * @returns {THREE.Euler}\n     */\n    get rotation(){\n        return this[_rotation];\n    }\n\n    set rotation(value){\n        this[_rotation] = value;\n    }\n\n    /**\n     * \n     * @param {THREE.Object3D} target \n     */\n    Apply(target){\n        target.position.copy(this[_position]);\n        target.rotation.copy(this[_rotation]);\n    }\n\n    Clone(){\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\n        return transform;\n    }\n}\n\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import Logger from \"../../utils/cik/Logger\";\n\nconst _enabled = Symbol('enabled');\n\nclass PackingProperty {\n    constructor(){\n        this[_enabled] = false;\n    }\n\n    /** @returns {Boolean} Is property enabled */\n    get enabled(){ return this[_enabled]; }\n    set enabled(value){\n        this[_enabled] = value;\n    }\n\n    Reset(){\n        this.enabled = false;\n    }\n\n    /**\n     * @param {PackingProperty} prop \n     */\n    Copy(prop){\n        this.enabled = prop.enabled;\n    }\n\n    Clone(){\n        Logger.Warn('PackingProperty.Clone is not implemented');\n    }\n\n    static Assert(prop){\n        return prop instanceof PackingProperty;\n    }\n}\n\nclass StackingProperty extends PackingProperty {\n    constructor(){\n        super();\n\n        /** Maximum stacking capacity (weight) */\n        this.capacity = Number.MAX_SAFE_INTEGER;\n    }\n\n    Reset(){\n        super.Reset();\n        this.capacity = Number.MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * @param {StackingProperty} prop \n     */\n    Copy(prop){\n        super.Copy(prop);\n        this.capacity = prop.capacity;\n    }\n\n    Clone(){\n        var prop = new StackingProperty();\n        prop.Copy(this);\n        return prop;\n    }\n}\n\nclass Constraint extends PackingProperty {\n    constructor(){\n        super();\n    }\n\n    Copy(prop){\n        super.Copy(prop);\n    }\n\n    Clone(){\n        Logger.Warn('Constraint.Clone is not implemented');\n    }\n}\n\nconst orientations = { xyz: 'xyz', zyx: 'zyx', yxz: 'yxz', yzx: 'yzx', zxy: 'zxy', xzy: 'xzy' };\nconst _allowedOrientations = Symbol('allowedOrientations');\nclass RotationConstraint extends Constraint {\n    constructor(){\n        super();\n    }\n\n    /** Enables each orientation enumeration in array\n     * @param {Array<orientations>} value */\n    set allowedOrientations(value){\n        this[_allowedOrientations] = value;\n    }\n    get allowedOrientations(){ return this[_allowedOrientations]; }\n\n    Reset(){\n        super.Reset();\n        if(this.allowedOrientations instanceof Array) this.allowedOrientations.length = 0;\n    }\n\n    /** @param {Boolean} allowX @param {Boolean} allowY @param {Boolean} allowZ */\n    SetOrientationsByAxis(allowX, allowY, allowZ){\n        let allowed = this.allowedOrientations;\n        if(allowed) allowed.length = 0;\n        else allowed = [];\n\n        if(allowY){\n            allowed.push(orientations.xyz, orientations.zyx);\n\n            if(allowX) allowed.push(orientations.yzx);\n            if(allowZ) allowed.push(orientations.zxy);\n        }\n        if(allowX) allowed.push(orientations.xzy);\n        if(allowZ) allowed.push(orientations.yxz);\n\n        this.allowedOrientations = allowed;\n    }\n\n    /** @param {Boolean} allowWH @param {Boolean} allowLH @param {Boolean} allowWL */\n    SetOrientationsBySide(allowWH, allowLH, allowWL){\n        let allowed = this.allowedOrientations;\n        if(allowed) allowed.length = 0;\n        else allowed = [];\n\n        if(allowWH) allowed.push(orientations.yxz, orientations.yzx);\n        if(allowLH) allowed.push(orientations.xzy, orientations.zxy);\n        if(allowWL) allowed.push(orientations.xyz, orientations.zyx);\n\n        this.allowedOrientations = allowed;\n    }\n\n    /**\n     * @param {RotationConstraint} prop \n     */\n    Copy(prop){\n        super.Copy(prop);\n        this.allowedOrientations = prop.allowedOrientations instanceof Array ? prop.allowedOrientations.slice() : undefined;\n    }\n\n    Clone(){\n        var prop = new RotationConstraint();\n        prop.Copy(this);\n        return prop;\n    }\n\n    /** Enumerations of orientation values, do not modify directly */\n    static get orientations(){\n        return orientations;\n    }\n}\n\nclass TranslationConstraint extends Constraint {\n    constructor(){\n        super();\n\n        /** Should be positioned on the platform surface (on the ground) */\n        this.grounded = false;\n    }\n\n    Reset(){\n        super.Reset();\n        this.grounded = false;\n    }\n\n    /**\n     * @param {TranslationConstraint} prop \n     */\n    Copy(prop){\n        super.Copy(prop);\n        this.grounded = prop.grounded;\n    }\n\n    Clone(){\n        var prop = new TranslationConstraint();\n        prop.Copy(this);\n        return prop;\n    }\n}\n\nexport {\n    PackingProperty,\n    StackingProperty,\n    RotationConstraint,\n    TranslationConstraint\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","\nconst typeofNumber = 'number';\n\n/** @param {THREE.Color} source @param {Array<THREE.Color>} colors */\nfunction findNearest(source, colors){\n    var dMin = Number.MAX_SAFE_INTEGER;\n    var nearest = source;\n    colors.forEach(color => {\n        let vx = color.r - source.r,\n            vy = color.g - source.g,\n            vz = color.b - source.b;\n        let d = vx * vx + vy * vy + vz * vz;\n        if(d < dMin){\n            dMin = d;\n            nearest = color;\n        }\n    });\n\n    return nearest;\n}\n\nvar tempColor = new THREE.Color();\n\nclass ColorTemplate{\n    /**\n     * @param {Array<string|THREE.Color>} colors \n     */\n    constructor(...colors){\n        /** @type {Array<THREE.Color>} */\n        this.colors = [];\n        colors.forEach(color => {\n            if( !(color instanceof THREE.Color) ) color = new THREE.Color(color);\n            this.colors.push(color);\n        });\n    }\n\n    /**\n     * @template T\n     * @param {T} target \n     * @returns {T}\n     */\n    Apply(target){\n        var scope = this;\n        if(typeof target === typeofNumber){\n            let mapColor = findNearest(tempColor.setHex(target), this.colors);\n            target = mapColor.getHex();\n        }\n        else if(target instanceof THREE.Color){\n            let mapColor = findNearest(target, this.colors);\n            target.copy(mapColor);\n        }\n        else if(target instanceof THREE.Material){\n            let color = target.color;\n            if(color instanceof THREE.Color){\n                let mapColor = findNearest(color, this.colors);\n                color.copy(mapColor);\n            }\n        }\n        else if(target instanceof THREE.Object3D){\n            target.traverse(function(child){\n                if(child instanceof THREE.Mesh){\n                    scope.Apply(child.material);\n                }\n            });\n        }\n        return target;\n    }\n}\n\nexport default ColorTemplate;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/ColorTemplate.js","import Tween from \"../Tween\";\nimport Signaler from \"../Signaler\";\n\nvar tempBox3 = new THREE.Box3();\nvar tempVec3 = new THREE.Vector3();\nvar clock = new THREE.Clock();\n\nclass TransitionController{\n    constructor(){\n\n    }\n}\n\nclass Slide extends TransitionController{\n    /**\n     * Slide from, to. ie: slideFromLeft -> from = 1 & to = 0\n     * @param {string} property \n     * @param {Number} from \n     * @param {Number} to \n     */\n    constructor(property, from, to){\n        super();\n\n        this.tween = new Tween(Tween.functions.linear, 0, 0, 0);\n        this.property = property;\n        this.from = from;\n        this.to = to;\n    }\n\n    /** @param {Transition} transition */\n    Init(transition){\n\n        transition.bounds.getSize(tempVec3);\n        let offset = tempVec3.x;\n        transition.bounds.getCenter(tempVec3);\n        offset += transition.target.position.x - tempVec3.x;\n\n        this.tween.startValue = offset * this.from;\n        this.tween.delta = -(offset * this.from) + offset * this.to;\n        this.tween.duration = transition.duration;\n        this.tween.onComplete = transition.OnComplete.bind(transition);\n\n        this.tween.Hook(transition.target.position, this.property);\n    }\n\n    Start(){\n        this.tween.Update(0);\n    }\n\n    /** @param {Number} t */\n    Update(t){\n        this.tween.Update(t);\n    }\n}\n\nconst signals = {\n    complete: 'complete'\n};\n\nconst _controller = Symbol('controller');\n\nclass Transition extends Signaler{\n    /**\n     * @param {THREE.Object3D} boundsView object to calculate bounds from\n     * @param {THREE.Object3D} transformView object to transform\n     * @param {Number} duration\n     */\n    constructor(boundsView, transformView, duration){\n        super();\n        \n        this.bounds = new THREE.Box3();\n        this.bounds.setFromObject(boundsView);\n\n        this.target = transformView;\n        this.duration = duration;\n    }\n\n    /** @param {TransitionController} value */\n    set controller(value){\n        this[_controller] = value;\n    }\n\n    get controller(){ return this[_controller]; }\n\n    OnComplete(){\n        this.Dispatch(signals.complete, this.controller);\n    }\n\n    Start(){\n        this.startTime = clock.getElapsedTime();\n        if(this.controller) this.controller.Start();\n    }\n\n    Update(){\n        let t = clock.getElapsedTime() - this.startTime;\n        if(this.controller) this.controller.Update(t);\n    }\n\n    static get signals(){\n        return signals;\n    }\n}\n\nexport {\n    Transition, \n    Slide\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/transitions/Transition.js","import App from \"../App\";\nimport LightDispatcher from \"./LightDispatcher\";\nimport Logger from \"../utils/cik/Logger\";\n\nconst _app = Symbol('app');\n\nconst typeofNumber = 'number';\n\nclass PackResults {\n    \n    /** @param {App} app */\n    constructor(app){\n\n        this[_app] = app;\n    }\n\n    get animationDuration(){ \n        /** @type {App} */\n        let app = this[_app];\n        return app.view.packResultView.params.animationDuration;\n    }\n    set animationDuration(value){\n\n        if(typeof value !== typeofNumber){\n            Logger.Warn('PackResults.animationDuration error, parameter is not a number:', value);\n            return;\n        }\n\n        /** @type {App} */\n        let app = this[_app];\n        app.view.packResultView.params.animationDuration = value; \n    }\n\n    /** Hides stacked boxes in viewer by vertical position\n     * 0: None - 1: All (over y span)\n     * @param {Number} value\n     */\n    SliceResults(value){\n\n        if(typeof value !== typeofNumber){\n            Logger.Warn('PackResults.SliceResults error, parameter is not a number:', value);\n            return;\n        }\n\n        /** @type {App} */\n        let app = this[_app];\n        app.view.packResultView.Slice(value);\n    }\n\n}\n\nconst visualizationSignals = {\n    \n};\n\nclass Visualization extends LightDispatcher{\n    \n    /** @param {App} app */\n    constructor(app){\n        super();\n\n        this[_app] = app;\n\n        this.packResults = new PackResults(app);\n    }\n\n    /** Selects an entry in the scene, optionally highlighting packed instances\n     *  @param {string | Boolean} [entryUID] default = false (deselect) @param {Boolean} [highlightPackedInstances] default = true */\n    SelectEntry(entryUID, highlightPackedInstances){\n        // /** @type {App} */\n        // let app = this[_app];\n\n        // if(entryUID && !app.packer.cargoList.GetEntry(entryUID)){\n        //     Logger.Warn('Visualization.SelectEntry failed, entry not found for:', entryUID);\n        //     return;\n        // }\n\n        // app.view.cargoListView.Select(entryUID);\n\n        // if(highlightPackedInstances === undefined) highlightPackedInstances = true;\n        // if(highlightPackedInstances || !entryUID) app.view.packResultView.SelectEntry(entryUID);\n    }\n\n    /** Enumeration of dispatched types */\n    static get signals(){\n        return visualizationSignals;\n    }\n}\n\nexport default Visualization;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/Visualization.js","import LightDispatcher from \"./LightDispatcher\";\nimport App from \"../App\";\nimport CargoListView from \"../view/CargoListView\";\nimport CargoEntry from \"./common/CargoEntry\";\n\nconst _app = Symbol('app');\n\nconst signals = {\n    boxEntryInteract: 'beInteract0'\n};\n\nclass User extends LightDispatcher{\n    /** @param {App} app */\n    constructor(app){\n        super();\n\n        this[_app] = app;\n\n        let scope = this;\n        /** @param {CargoEntry} cargoEntry */\n        function onCargoInteract(cargoEntry){\n            scope.Dispatch(signals.boxEntryInteract, cargoEntry.uid);\n        }\n\n        app.view.cargoListView.On(CargoListView.signals.interact, onCargoInteract);\n    }\n\n    /** Enumeration of dispatched types */\n    static get signals(){\n        return signals;\n    }\n\n}\n\nexport default User;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/User.js","import CargoGroup from \"./CargoGroup\";\n\nvar _position = Symbol('position');\nvar _rotation = Symbol('rotation');\n\nclass PackingItem {\n    constructor(){\n        this[_position] = new THREE.Vector3();\n        this[_rotation] = new THREE.Euler();\n    }\n\n    /** @returns {THREE.Vector3} */\n    get position(){ return this[_position]; }\n    set position(value){\n        this[_position] = value;\n    }\n\n    /** @returns {THREE.Euler} */\n    get rotation(){ return this[_position]; }\n    set rotation(value){\n        this[_rotation] = value;\n    }\n}\n\nclass Cargo extends PackingItem {\n    /**\n     * \n     * @param {CargoGroup} group\n     */\n    constructor(group){\n        super();\n\n        this.group = group;\n    }\n\n    get entry(){\n        return this.group.entry;\n    }\n\n    Clone(){\n        var cargo = new Cargo(this.group);\n        return cargo;\n    }\n\n    ToString(){\n        var output = 'Cargo(' + this.entry.ToString() + ')';\n\n        return output;\n    }\n}\n\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Utils from \"../../utils/cik/Utils\";\nimport Asset from \"../../components/assets/Asset\";\n\n/** @typedef FloatingShelfParams @property {THREE.Vector3} padding x z for padding, y for thickness @property {Number} colorHex */\n/** @type {FloatingShelfParams} */\nconst defaultParams = {\n    padding: new THREE.Vector3(0, .001, 0),\n    colorHex: 0xffffff\n};\n\nvar box3 = new THREE.Box3();\nvar vec3 = new THREE.Vector3();\n\nclass FloatingShelf{\n    /** @param {THREE.Object3D} targetView @param {FloatingShelfParams} params */\n    constructor(targetView, params){\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        this.targetView = targetView;\n        this.view = new THREE.Object3D();\n\n        let planeGeom = new THREE.BoxGeometry(1, 1, 1, 1, 1, 1);\n        let planeMaterial = new Asset.CreateSolidMaterialMatte(this.params.colorHex);\n        this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\n        Asset.ReceiveShadow(this.platformMesh);\n\n        this.view.add(this.platformMesh);\n\n        this.Update();\n    }\n\n    Update(){\n        box3.setFromObject(this.targetView);\n        const worldToLocal = new THREE.Matrix4().getInverse(this.targetView.matrixWorld);\n        box3.applyMatrix4(worldToLocal);\n        box3.getSize(vec3);\n        let height = vec3.y;\n\n        let padding = this.params.padding;\n        let thickness = Math.max(.0001, padding.y);\n        this.platformMesh.scale.set(Math.max(.0001, vec3.x + padding.x * 2), thickness, Math.max(.0001, vec3.z + padding.z * 2));\n\n        box3.getCenter(vec3);\n        this.platformMesh.position.set(vec3.x, vec3.y - height / 2 - thickness, vec3.z);\n    }\n}\n\nexport default FloatingShelf;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/FloatingShelf.js","import Utils from \"../../utils/cik/Utils\";\n\n\nconst cubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\nconst outlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide, depthWrite:false, depthTest:true});\nconst boxOutlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide});\n\n/** @typedef OutlineParams @property {Number} color @property {Number} opacity @property {Number} offsetFactor @property {Number} offsetUnits */\n/** @type {OutlineParams} */\nconst defaultParams = {\n    color: 0x000000,\n    opacity: 1,\n    offsetFactor: 1,\n    offsetUnits: 1\n};\n\nvar tempBox3 = new THREE.Box3();\nvar tempMatrix4 = new THREE.Matrix4();\n\nclass Outline{\n\n    /** @param {OutlineParams} params */\n    constructor(params){\n\n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        this.view = new THREE.Object3D();\n\n        /** @type {Map<THREE.Object3D, THREE.Object3D>} */\n        this.outlines = new Map();\n    }\n\n    /** @param {THREE.Object3D} value */\n    set object3d(value){\n        if(!value) return this.Disable();\n\n        this.view.visible = true;\n\n        if(this.material === undefined) this.material = outlineMaterial.clone();\n        let material = this.material;\n            material.color.setHex(this.params.color);\n            material.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\n            material.transparent = true;//material.opacity < .999;\n            material.polygonOffset = true;\n            material.polygonOffsetFactor = -this.params.offsetFactor;\n            material.polygonOffsetUnits = this.params.offsetUnits;\n\n        let outline = this.outlines.get(value);\n        if(!outline){\n            outline = value.clone(true);\n            if(outline instanceof THREE.Mesh){\n                outline.material = material;\n            }\n            else{\n                outline.children.forEach(oChild => oChild.traverse(function(child){\n                    if(child instanceof THREE.Mesh){\n                        let outlineReady = child.clone();\n                        outlineReady.material = material;\n                        if(child.parent){\n                            // Assuming end of hierarchical tree\n                            child.parent.add(outlineReady);\n                            child.parent.remove(child);\n                        }\n                    }\n                }));\n            }\n\n            this.outlines.set(value, outline);\n        }\n\n        value.updateMatrixWorld();\n        outline.matrixWorld.copy(value.matrixWorld);\n\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\n        this.view.add(outline);\n    }\n\n    /** @param {THREE.Object3D} value */\n    set box(value){\n        if(!value) return this.Disable();\n\n        this.view.visible = true;\n\n        if(this.boxMaterial === undefined) this.boxMaterial = boxOutlineMaterial.clone();\n        this.boxMaterial.color.setHex(this.params.color);\n        this.boxMaterial.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\n        this.boxMaterial.transparent = this.boxMaterial.opacity < .999;\n\n        if(this.boxMesh === undefined){\n            this.boxMesh = new THREE.Mesh(cubeGeometry, this.boxMaterial);\n        }\n\n        value.updateMatrixWorld();\n        tempBox3.setFromObject(value);\n        tempBox3.getSize(this.view.scale);\n        this.view.scale.addScalar(this.params.offsetFactor);\n        tempBox3.getCenter(this.view.position);\n\n        let parent = this.view.parent;\n        if(parent){\n            parent.updateMatrixWorld();\n            let inverse = tempMatrix4.getInverse(parent.matrixWorld);\n            this.view.applyMatrix(inverse);\n        }\n\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\n        this.view.add(this.boxMesh);\n    }\n\n    Disable(){\n        this.view.visible = false;\n    }\n    \n}\n\nexport default Outline;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/Outline.js","/**\n * @author arodic / https://github.com/arodic\n */\n\n( function () {\n\n\t'use strict';\n\n\tvar GizmoMaterial = function ( parameters ) {\n\n\t\tTHREE.MeshBasicMaterial.call( this );\n\n\t\tthis.depthTest = false;\n\t\tthis.depthWrite = false;\n\t\tthis.side = THREE.FrontSide;\n\t\tthis.transparent = true;\n\n\t\tthis.setValues( parameters );\n\n\t\tthis.oldColor = this.color.clone();\n\t\tthis.oldOpacity = this.opacity;\n\n\t\tthis.highlight = function( highlighted ) {\n\n\t\t\tif ( highlighted ) {\n\n\t\t\t\tthis.color.setRGB( 1, 1, 0 );\n\t\t\t\tthis.opacity = 1;\n\n\t\t\t} else {\n\n\t\t\t\tthis.color.copy( this.oldColor );\n\t\t\t\tthis.opacity = this.oldOpacity;\n\n\t\t\t}\n\n\t\t};\n\n\t};\n\n\tGizmoMaterial.prototype = Object.create( THREE.MeshBasicMaterial.prototype );\n\tGizmoMaterial.prototype.constructor = GizmoMaterial;\n\n\n\tvar GizmoLineMaterial = function ( parameters ) {\n\n\t\tTHREE.LineBasicMaterial.call( this );\n\n\t\tthis.depthTest = false;\n\t\tthis.depthWrite = false;\n\t\tthis.transparent = true;\n\t\tthis.linewidth = 1;\n\n\t\tthis.setValues( parameters );\n\n\t\tthis.oldColor = this.color.clone();\n\t\tthis.oldOpacity = this.opacity;\n\n\t\tthis.highlight = function( highlighted ) {\n\n\t\t\tif ( highlighted ) {\n\n\t\t\t\tthis.color.setRGB( 1, 1, 0 );\n\t\t\t\tthis.opacity = 1;\n\n\t\t\t} else {\n\n\t\t\t\tthis.color.copy( this.oldColor );\n\t\t\t\tthis.opacity = this.oldOpacity;\n\n\t\t\t}\n\n\t\t};\n\n\t};\n\n\tGizmoLineMaterial.prototype = Object.create( THREE.LineBasicMaterial.prototype );\n\tGizmoLineMaterial.prototype.constructor = GizmoLineMaterial;\n\n\n\tvar pickerMaterial = new GizmoMaterial( { visible: false, transparent: false } );\n\n\n\tTHREE.TransformGizmo = function () {\n\n\t\tthis.init = function () {\n\n\t\t\tTHREE.Object3D.call( this );\n\n\t\t\tthis.handles = new THREE.Object3D();\n\t\t\tthis.pickers = new THREE.Object3D();\n\t\t\tthis.planes = new THREE.Object3D();\n\n\t\t\tthis.add( this.handles );\n\t\t\tthis.add( this.pickers );\n\t\t\tthis.add( this.planes );\n\n\t\t\t//// PLANES\n\n\t\t\tvar planeGeometry = new THREE.PlaneBufferGeometry( 50, 50, 2, 2 );\n\t\t\tvar planeMaterial = new THREE.MeshBasicMaterial( { visible: false, side: THREE.DoubleSide } );\n\n\t\t\tvar planes = {\n\t\t\t\t\"XY\":   new THREE.Mesh( planeGeometry, planeMaterial ),\n\t\t\t\t\"YZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\n\t\t\t\t\"XZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\n\t\t\t\t\"XYZE\": new THREE.Mesh( planeGeometry, planeMaterial )\n\t\t\t};\n\n\t\t\tthis.activePlane = planes[ \"XYZE\" ];\n\n\t\t\tplanes[ \"YZ\" ].rotation.set( 0, Math.PI / 2, 0 );\n\t\t\tplanes[ \"XZ\" ].rotation.set( - Math.PI / 2, 0, 0 );\n\n\t\t\tfor ( var i in planes ) {\n\n\t\t\t\tplanes[ i ].name = i;\n\t\t\t\tthis.planes.add( planes[ i ] );\n\t\t\t\tthis.planes[ i ] = planes[ i ];\n\n\t\t\t}\n\n\t\t\t//// HANDLES AND PICKERS\n\n\t\t\tvar setupGizmos = function( gizmoMap, parent ) {\n\n\t\t\t\tfor ( var name in gizmoMap ) {\n\n\t\t\t\t\tfor ( i = gizmoMap[ name ].length; i --; ) {\n\n\t\t\t\t\t\tvar object = gizmoMap[ name ][ i ][ 0 ];\n\t\t\t\t\t\tvar position = gizmoMap[ name ][ i ][ 1 ];\n\t\t\t\t\t\tvar rotation = gizmoMap[ name ][ i ][ 2 ];\n\n\t\t\t\t\t\tobject.name = name;\n\n\t\t\t\t\t\tif ( position ) object.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\n\t\t\t\t\t\tif ( rotation ) object.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\n\n\t\t\t\t\t\tparent.add( object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tsetupGizmos( this.handleGizmos, this.handles );\n\t\t\tsetupGizmos( this.pickerGizmos, this.pickers );\n\n\t\t\t// reset Transformations\n\n\t\t\tthis.traverse( function ( child ) {\n\n\t\t\t\tif ( child instanceof THREE.Mesh ) {\n\n\t\t\t\t\tchild.updateMatrix();\n\n\t\t\t\t\tvar tempGeometry = child.geometry.clone();\n\t\t\t\t\ttempGeometry.applyMatrix( child.matrix );\n\t\t\t\t\tchild.geometry = tempGeometry;\n\n\t\t\t\t\tchild.position.set( 0, 0, 0 );\n\t\t\t\t\tchild.rotation.set( 0, 0, 0 );\n\t\t\t\t\tchild.scale.set( 1, 1, 1 );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\tthis.highlight = function ( axis ) {\n\n\t\t\tthis.traverse( function( child ) {\n\n\t\t\t\tif ( child.material && child.material.highlight ) {\n\n\t\t\t\t\tif ( child.name === axis ) {\n\n\t\t\t\t\t\tchild.material.highlight( true );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tchild.material.highlight( false );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t};\n\n\tTHREE.TransformGizmo.prototype = Object.create( THREE.Object3D.prototype );\n\tTHREE.TransformGizmo.prototype.constructor = THREE.TransformGizmo;\n\n\tTHREE.TransformGizmo.prototype.update = function ( rotation, eye ) {\n\n\t\tvar vec1 = new THREE.Vector3( 0, 0, 0 );\n\t\tvar vec2 = new THREE.Vector3( 0, 1, 0 );\n\t\tvar lookAtMatrix = new THREE.Matrix4();\n\n\t\tthis.traverse( function( child ) {\n\n\t\t\tif ( child.name.search( \"E\" ) !== - 1 ) {\n\n\t\t\t\tchild.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( eye, vec1, vec2 ) );\n\n\t\t\t} else if ( child.name.search( \"X\" ) !== - 1 || child.name.search( \"Y\" ) !== - 1 || child.name.search( \"Z\" ) !== - 1 ) {\n\n\t\t\t\tchild.quaternion.setFromEuler( rotation );\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tTHREE.TransformGizmoTranslate = function () {\n\n\t\tTHREE.TransformGizmo.call( this );\n\n\t\tvar arrowGeometry = new THREE.Geometry();\n\t\tvar mesh = new THREE.Mesh( new THREE.CylinderGeometry( 0, 0.05, 0.2, 12, 1, false ) );\n\t\tmesh.position.y = 0.5;\n\t\tmesh.updateMatrix();\n\n\t\tarrowGeometry.merge( mesh.geometry, mesh.matrix );\n\n\t\tvar lineXGeometry = new THREE.BufferGeometry();\n\t\tlineXGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  1, 0, 0 ], 3 ) );\n\n\t\tvar lineYGeometry = new THREE.BufferGeometry();\n\t\tlineYGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 1, 0 ], 3 ) );\n\n\t\tvar lineZGeometry = new THREE.BufferGeometry();\n\t\tlineZGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 0, 1 ], 3 ) );\n\n\t\tthis.handleGizmos = {\n\n\t\t\tX: [\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ],\n\t\t\t\t[ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\n\t\t\t],\n\n\t\t\tY: [\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\n\t\t\t\t[\tnew THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\n\t\t\t],\n\n\t\t\tZ: [\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ] ],\n\t\t\t\t[ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\n\t\t\t],\n\n\t\t\tXYZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.OctahedronGeometry( 0.1, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, 0 ] ]\n\t\t\t],\n\n\t\t\tXY: [\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.15, 0.15, 0 ] ]\n\t\t\t],\n\n\t\t\tYZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ] ]\n\t\t\t],\n\n\t\t\tXZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ] ]\n\t\t\t]\n\n\t\t};\n\n\t\tthis.pickerGizmos = {\n\n\t\t\tX: [\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0.6, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ]\n\t\t\t],\n\n\t\t\tY: [\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0.6, 0 ] ]\n\t\t\t],\n\n\t\t\tZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0, 0.6 ], [ Math.PI / 2, 0, 0 ] ]\n\t\t\t],\n\n\t\t\tXYZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.OctahedronGeometry( 0.2, 0 ), pickerMaterial ) ]\n\t\t\t],\n\n\t\t\tXY: [\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), pickerMaterial ), [ 0.2, 0.2, 0 ] ]\n\t\t\t],\n\n\t\t\tYZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), pickerMaterial ), [ 0, 0.2, 0.2 ], [ 0, Math.PI / 2, 0 ] ]\n\t\t\t],\n\n\t\t\tXZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), pickerMaterial ), [ 0.2, 0, 0.2 ], [ - Math.PI / 2, 0, 0 ] ]\n\t\t\t]\n\n\t\t};\n\n\t\tthis.setActivePlane = function ( axis, eye ) {\n\n\t\t\tvar tempMatrix = new THREE.Matrix4();\n\t\t\teye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\n\n\t\t\tif ( axis === \"X\" ) {\n\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\n\n\t\t\t\tif ( Math.abs( eye.y ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"XZ\" ];\n\n\t\t\t}\n\n\t\t\tif ( axis === \"Y\" ) {\n\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\n\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"YZ\" ];\n\n\t\t\t}\n\n\t\t\tif ( axis === \"Z\" ) {\n\n\t\t\t\tthis.activePlane = this.planes[ \"XZ\" ];\n\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.y ) ) this.activePlane = this.planes[ \"YZ\" ];\n\n\t\t\t}\n\n\t\t\tif ( axis === \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\n\n\t\t\tif ( axis === \"XY\" ) this.activePlane = this.planes[ \"XY\" ];\n\n\t\t\tif ( axis === \"YZ\" ) this.activePlane = this.planes[ \"YZ\" ];\n\n\t\t\tif ( axis === \"XZ\" ) this.activePlane = this.planes[ \"XZ\" ];\n\n\t\t};\n\n\t\tthis.init();\n\n\t};\n\n\tTHREE.TransformGizmoTranslate.prototype = Object.create( THREE.TransformGizmo.prototype );\n\tTHREE.TransformGizmoTranslate.prototype.constructor = THREE.TransformGizmoTranslate;\n\n\tTHREE.TransformGizmoRotate = function () {\n\n\t\tTHREE.TransformGizmo.call( this );\n\n\t\tvar CircleGeometry = function ( radius, facing, arc ) {\n\n\t\t\tvar geometry = new THREE.BufferGeometry();\n\t\t\tvar vertices = [];\n\t\t\tarc = arc ? arc : 1;\n\n\t\t\tfor ( var i = 0; i <= 64 * arc; ++ i ) {\n\n\t\t\t\tif ( facing === 'x' ) vertices.push( 0, Math.cos( i / 32 * Math.PI ) * radius, Math.sin( i / 32 * Math.PI ) * radius );\n\t\t\t\tif ( facing === 'y' ) vertices.push( Math.cos( i / 32 * Math.PI ) * radius, 0, Math.sin( i / 32 * Math.PI ) * radius );\n\t\t\t\tif ( facing === 'z' ) vertices.push( Math.sin( i / 32 * Math.PI ) * radius, Math.cos( i / 32 * Math.PI ) * radius, 0 );\n\n\t\t\t}\n\n\t\t\tgeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );\n\t\t\treturn geometry;\n\n\t\t};\n\n\t\tthis.handleGizmos = {\n\n\t\t\tX: [\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'x', 0.5 ), new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\n\t\t\t],\n\n\t\t\tY: [\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'y', 0.5 ), new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\n\t\t\t],\n\n\t\t\tZ: [\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'z', 0.5 ), new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\n\t\t\t],\n\n\t\t\tE: [\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1.25, 'z', 1 ), new GizmoLineMaterial( { color: 0xcccc00 } ) ) ]\n\t\t\t],\n\n\t\t\tXYZE: [\n\t\t\t\t[ new THREE.Line( new CircleGeometry( 1, 'z', 1 ), new GizmoLineMaterial( { color: 0x787878 } ) ) ]\n\t\t\t]\n\n\t\t};\n\n\t\tthis.pickerGizmos = {\n\n\t\t\tX: [\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1, 0.12, 4, 12, Math.PI ), pickerMaterial ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ] ]\n\t\t\t],\n\n\t\t\tY: [\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1, 0.12, 4, 12, Math.PI ), pickerMaterial ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ] ]\n\t\t\t],\n\n\t\t\tZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1, 0.12, 4, 12, Math.PI ), pickerMaterial ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ]\n\t\t\t],\n\n\t\t\tE: [\n\t\t\t\t[ new THREE.Mesh( new THREE.TorusBufferGeometry( 1.25, 0.12, 2, 24 ), pickerMaterial ) ]\n\t\t\t],\n\n\t\t\tXYZE: [\n\t\t\t\t[ new THREE.Mesh() ]// TODO\n\t\t\t]\n\n\t\t};\n\n\t\tthis.setActivePlane = function ( axis ) {\n\n\t\t\tif ( axis === \"E\" ) this.activePlane = this.planes[ \"XYZE\" ];\n\n\t\t\tif ( axis === \"X\" ) this.activePlane = this.planes[ \"YZ\" ];\n\n\t\t\tif ( axis === \"Y\" ) this.activePlane = this.planes[ \"XZ\" ];\n\n\t\t\tif ( axis === \"Z\" ) this.activePlane = this.planes[ \"XY\" ];\n\n\t\t};\n\n\t\tthis.update = function ( rotation, eye2 ) {\n\n\t\t\tTHREE.TransformGizmo.prototype.update.apply( this, arguments );\n\n\t\t\tvar tempMatrix = new THREE.Matrix4();\n\t\t\tvar worldRotation = new THREE.Euler( 0, 0, 1 );\n\t\t\tvar tempQuaternion = new THREE.Quaternion();\n\t\t\tvar unitX = new THREE.Vector3( 1, 0, 0 );\n\t\t\tvar unitY = new THREE.Vector3( 0, 1, 0 );\n\t\t\tvar unitZ = new THREE.Vector3( 0, 0, 1 );\n\t\t\tvar quaternionX = new THREE.Quaternion();\n\t\t\tvar quaternionY = new THREE.Quaternion();\n\t\t\tvar quaternionZ = new THREE.Quaternion();\n\t\t\tvar eye = eye2.clone();\n\n\t\t\tworldRotation.copy( this.planes[ \"XY\" ].rotation );\n\t\t\ttempQuaternion.setFromEuler( worldRotation );\n\n\t\t\ttempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\n\t\t\teye.applyMatrix4( tempMatrix );\n\n\t\t\tthis.traverse( function( child ) {\n\n\t\t\t\ttempQuaternion.setFromEuler( worldRotation );\n\n\t\t\t\tif ( child.name === \"X\" ) {\n\n\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, Math.atan2( - eye.y, eye.z ) );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n\t\t\t\t\tchild.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( child.name === \"Y\" ) {\n\n\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\n\t\t\t\t\tchild.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( child.name === \"Z\" ) {\n\n\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\n\t\t\t\t\tchild.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t};\n\n\t\tthis.init();\n\n\t};\n\n\tTHREE.TransformGizmoRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\n\tTHREE.TransformGizmoRotate.prototype.constructor = THREE.TransformGizmoRotate;\n\n\tTHREE.TransformGizmoScale = function () {\n\n\t\tTHREE.TransformGizmo.call( this );\n\n\t\tvar arrowGeometry = new THREE.Geometry();\n\t\tvar mesh = new THREE.Mesh( new THREE.BoxGeometry( 0.125, 0.125, 0.125 ) );\n\t\tmesh.position.y = 0.5;\n\t\tmesh.updateMatrix();\n\n\t\tarrowGeometry.merge( mesh.geometry, mesh.matrix );\n\n\t\tvar lineXGeometry = new THREE.BufferGeometry();\n\t\tlineXGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  1, 0, 0 ], 3 ) );\n\n\t\tvar lineYGeometry = new THREE.BufferGeometry();\n\t\tlineYGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 1, 0 ], 3 ) );\n\n\t\tvar lineZGeometry = new THREE.BufferGeometry();\n\t\tlineZGeometry.addAttribute( 'position', new THREE.Float32BufferAttribute( [ 0, 0, 0,  0, 0, 1 ], 3 ) );\n\n\t\tthis.handleGizmos = {\n\n\t\t\tX: [\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ],\n\t\t\t\t[ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\n\t\t\t],\n\n\t\t\tY: [\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\n\t\t\t\t[ new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\n\t\t\t],\n\n\t\t\tZ: [\n\t\t\t\t[ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ] ],\n\t\t\t\t[ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\n\t\t\t],\n\n\t\t\tXYZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.BoxBufferGeometry( 0.125, 0.125, 0.125 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\n\t\t\t]\n\n\t\t};\n\n\t\tthis.pickerGizmos = {\n\n\t\t\tX: [\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0.6, 0, 0 ], [ 0, 0, - Math.PI / 2 ] ]\n\t\t\t],\n\n\t\t\tY: [\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0.6, 0 ] ]\n\t\t\t],\n\n\t\t\tZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), pickerMaterial ), [ 0, 0, 0.6 ], [ Math.PI / 2, 0, 0 ] ]\n\t\t\t],\n\n\t\t\tXYZ: [\n\t\t\t\t[ new THREE.Mesh( new THREE.BoxBufferGeometry( 0.4, 0.4, 0.4 ), pickerMaterial ) ]\n\t\t\t]\n\n\t\t};\n\n\t\tthis.setActivePlane = function ( axis, eye ) {\n\n\t\t\tvar tempMatrix = new THREE.Matrix4();\n\t\t\teye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\n\n\t\t\tif ( axis === \"X\" ) {\n\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\n\t\t\t\tif ( Math.abs( eye.y ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"XZ\" ];\n\n\t\t\t}\n\n\t\t\tif ( axis === \"Y\" ) {\n\n\t\t\t\tthis.activePlane = this.planes[ \"XY\" ];\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.z ) ) this.activePlane = this.planes[ \"YZ\" ];\n\n\t\t\t}\n\n\t\t\tif ( axis === \"Z\" ) {\n\n\t\t\t\tthis.activePlane = this.planes[ \"XZ\" ];\n\t\t\t\tif ( Math.abs( eye.x ) > Math.abs( eye.y ) ) this.activePlane = this.planes[ \"YZ\" ];\n\n\t\t\t}\n\n\t\t\tif ( axis === \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\n\n\t\t};\n\n\t\tthis.init();\n\n\t};\n\n\tTHREE.TransformGizmoScale.prototype = Object.create( THREE.TransformGizmo.prototype );\n\tTHREE.TransformGizmoScale.prototype.constructor = THREE.TransformGizmoScale;\n\n\tTHREE.TransformControls = function ( camera, domElement ) {\n\n\t\t// TODO: Make non-uniform scale and rotate play nice in hierarchies\n\t\t// TODO: ADD RXYZ contol\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tdomElement = ( domElement !== undefined ) ? domElement : document;\n\n\t\tthis.camera = camera;\n\t\tthis.object = undefined;\n\t\tthis.visible = false;\n\t\tthis.translationSnap = null;\n\t\tthis.rotationSnap = null;\n\t\tthis.space = \"world\";\n\t\tthis.size = 1;\n\t\tthis.axis = null;\n\n\t\tvar scope = this;\n\n\t\tvar _mode = \"translate\";\n\t\tvar _dragging = false;\n\t\tvar _gizmo = {\n\n\t\t\t\"translate\": new THREE.TransformGizmoTranslate(),\n\t\t\t\"rotate\": new THREE.TransformGizmoRotate(),\n\t\t\t\"scale\": new THREE.TransformGizmoScale()\n\t\t};\n\n\t\tfor ( var type in _gizmo ) {\n\n\t\t\tvar gizmoObj = _gizmo[ type ];\n\n\t\t\tgizmoObj.visible = ( type === _mode );\n\t\t\tthis.add( gizmoObj );\n\n\t\t}\n\n\t\tvar changeEvent = { type: \"change\" };\n\t\tvar mouseDownEvent = { type: \"mouseDown\" };\n\t\tvar mouseUpEvent = { type: \"mouseUp\", mode: _mode };\n\t\tvar objectChangeEvent = { type: \"objectChange\" };\n\n\t\tvar ray = new THREE.Raycaster();\n\t\tvar pointerVector = new THREE.Vector2();\n\n\t\tvar point = new THREE.Vector3();\n\t\tvar offset = new THREE.Vector3();\n\n\t\tvar rotation = new THREE.Vector3();\n\t\tvar offsetRotation = new THREE.Vector3();\n\t\tvar scale = 1;\n\n\t\tvar lookAtMatrix = new THREE.Matrix4();\n\t\tvar eye = new THREE.Vector3();\n\n\t\tvar tempMatrix = new THREE.Matrix4();\n\t\tvar tempVector = new THREE.Vector3();\n\t\tvar tempQuaternion = new THREE.Quaternion();\n\t\tvar unitX = new THREE.Vector3( 1, 0, 0 );\n\t\tvar unitY = new THREE.Vector3( 0, 1, 0 );\n\t\tvar unitZ = new THREE.Vector3( 0, 0, 1 );\n\n\t\tvar quaternionXYZ = new THREE.Quaternion();\n\t\tvar quaternionX = new THREE.Quaternion();\n\t\tvar quaternionY = new THREE.Quaternion();\n\t\tvar quaternionZ = new THREE.Quaternion();\n\t\tvar quaternionE = new THREE.Quaternion();\n\n\t\tvar oldPosition = new THREE.Vector3();\n\t\tvar oldScale = new THREE.Vector3();\n\t\tvar oldRotationMatrix = new THREE.Matrix4();\n\n\t\tvar parentRotationMatrix  = new THREE.Matrix4();\n\t\tvar parentScale = new THREE.Vector3();\n\n\t\tvar worldPosition = new THREE.Vector3();\n\t\tvar worldRotation = new THREE.Euler();\n\t\tvar worldRotationMatrix  = new THREE.Matrix4();\n\t\tvar camPosition = new THREE.Vector3();\n\t\tvar camRotation = new THREE.Euler();\n\n\t\tdomElement.addEventListener( \"mousedown\", onPointerDown, false );\n\t\tdomElement.addEventListener( \"touchstart\", onPointerDown, false );\n\n\t\tdomElement.addEventListener( \"mousemove\", onPointerHover, false );\n\t\tdomElement.addEventListener( \"touchmove\", onPointerHover, false );\n\n\t\tdomElement.addEventListener( \"mousemove\", onPointerMove, false );\n\t\tdomElement.addEventListener( \"touchmove\", onPointerMove, false );\n\n\t\tdomElement.addEventListener( \"mouseup\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"mouseout\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"touchend\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"touchcancel\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"touchleave\", onPointerUp, false );\n\n\t\tthis.dispose = function () {\n\n\t\t\tdomElement.removeEventListener( \"mousedown\", onPointerDown );\n\t\t\tdomElement.removeEventListener( \"touchstart\", onPointerDown );\n\n\t\t\tdomElement.removeEventListener( \"mousemove\", onPointerHover );\n\t\t\tdomElement.removeEventListener( \"touchmove\", onPointerHover );\n\n\t\t\tdomElement.removeEventListener( \"mousemove\", onPointerMove );\n\t\t\tdomElement.removeEventListener( \"touchmove\", onPointerMove );\n\n\t\t\tdomElement.removeEventListener( \"mouseup\", onPointerUp );\n\t\t\tdomElement.removeEventListener( \"mouseout\", onPointerUp );\n\t\t\tdomElement.removeEventListener( \"touchend\", onPointerUp );\n\t\t\tdomElement.removeEventListener( \"touchcancel\", onPointerUp );\n\t\t\tdomElement.removeEventListener( \"touchleave\", onPointerUp );\n\n\t\t};\n\n\t\tthis.attach = function ( object ) {\n\n\t\t\tthis.object = object;\n\t\t\tthis.visible = true;\n\t\t\tthis.update();\n\n\t\t};\n\n\t\tthis.detach = function () {\n\n\t\t\tthis.object = undefined;\n\t\t\tthis.visible = false;\n\t\t\tthis.axis = null;\n\n\t\t};\n\n\t\tthis.getMode = function () {\n\n\t\t\treturn _mode;\n\n\t\t};\n\n\t\tthis.setMode = function ( mode ) {\n\n\t\t\t_mode = mode ? mode : _mode;\n\n\t\t\tif ( _mode === \"scale\" ) scope.space = \"local\";\n\n\t\t\tfor ( var type in _gizmo ) _gizmo[ type ].visible = ( type === _mode );\n\n\t\t\tthis.update();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t};\n\n\t\tthis.setTranslationSnap = function ( translationSnap ) {\n\n\t\t\tscope.translationSnap = translationSnap;\n\n\t\t};\n\n\t\tthis.setRotationSnap = function ( rotationSnap ) {\n\n\t\t\tscope.rotationSnap = rotationSnap;\n\n\t\t};\n\n\t\tthis.setSize = function ( size ) {\n\n\t\t\tscope.size = size;\n\t\t\tthis.update();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t};\n\n\t\tthis.setSpace = function ( space ) {\n\n\t\t\tscope.space = space;\n\t\t\tthis.update();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t};\n\n\t\tthis.update = function () {\n\n\t\t\tif ( scope.object === undefined ) return;\n\n\t\t\tscope.object.updateMatrixWorld();\n\t\t\tworldPosition.setFromMatrixPosition( scope.object.matrixWorld );\n\t\t\tworldRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.object.matrixWorld ) );\n\n\t\t\tscope.camera.updateMatrixWorld();\n\t\t\tcamPosition.setFromMatrixPosition( scope.camera.matrixWorld );\n\t\t\tcamRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.camera.matrixWorld ) );\n\n\t\t\tscale = worldPosition.distanceTo( camPosition ) / 6 * scope.size;\n\t\t\tthis.position.copy( worldPosition );\n\t\t\tthis.scale.set( scale, scale, scale );\n\n\t\t\tif ( scope.camera instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\teye.copy( camPosition ).sub( worldPosition ).normalize();\n\n\t\t\t} else if ( scope.camera instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\teye.copy( camPosition ).normalize();\n\n\t\t\t}\n\n\t\t\tif ( scope.space === \"local\" ) {\n\n\t\t\t\t_gizmo[ _mode ].update( worldRotation, eye );\n\n\t\t\t} else if ( scope.space === \"world\" ) {\n\n\t\t\t\t_gizmo[ _mode ].update( new THREE.Euler(), eye );\n\n\t\t\t}\n\n\t\t\t_gizmo[ _mode ].highlight( scope.axis );\n\n\t\t};\n\n\t\tfunction onPointerHover( event ) {\n\n\t\t\tif ( scope.object === undefined || _dragging === true || ( event.button !== undefined && event.button !== 0 ) ) return;\n\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\n\n\t\t\tvar intersect = intersectObjects( pointer, _gizmo[ _mode ].pickers.children );\n\n\t\t\tvar axis = null;\n\n\t\t\tif ( intersect ) {\n\n\t\t\t\taxis = intersect.object.name;\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t}\n\n\t\t\tif ( scope.axis !== axis ) {\n\n\t\t\t\tscope.axis = axis;\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.object === undefined || _dragging === true || ( event.button !== undefined && event.button !== 0 ) ) return;\n\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\n\n\t\t\tif ( pointer.button === 0 || pointer.button === undefined ) {\n\n\t\t\t\tvar intersect = intersectObjects( pointer, _gizmo[ _mode ].pickers.children );\n\n\t\t\t\tif ( intersect ) {\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tscope.dispatchEvent( mouseDownEvent );\n\n\t\t\t\t\tscope.axis = intersect.object.name;\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\teye.copy( camPosition ).sub( worldPosition ).normalize();\n\n\t\t\t\t\t_gizmo[ _mode ].setActivePlane( scope.axis, eye );\n\n\t\t\t\t\tvar planeIntersect = intersectObjects( pointer, [ _gizmo[ _mode ].activePlane ] );\n\n\t\t\t\t\tif ( planeIntersect ) {\n\n\t\t\t\t\t\toldPosition.copy( scope.object.position );\n\t\t\t\t\t\toldScale.copy( scope.object.scale );\n\n\t\t\t\t\t\toldRotationMatrix.extractRotation( scope.object.matrix );\n\t\t\t\t\t\tworldRotationMatrix.extractRotation( scope.object.matrixWorld );\n\n\t\t\t\t\t\tparentRotationMatrix.extractRotation( scope.object.parent.matrixWorld );\n\t\t\t\t\t\tparentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.parent.matrixWorld ) );\n\n\t\t\t\t\t\toffset.copy( planeIntersect.point );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_dragging = true;\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.object === undefined || scope.axis === null || _dragging === false || ( event.button !== undefined && event.button !== 0 ) ) return;\n\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\n\n\t\t\tvar planeIntersect = intersectObjects( pointer, [ _gizmo[ _mode ].activePlane ] );\n\n\t\t\tif ( planeIntersect === false ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tpoint.copy( planeIntersect.point );\n\n\t\t\tif ( _mode === \"translate\" ) {\n\n\t\t\t\tpoint.sub( offset );\n\t\t\t\tpoint.multiply( parentScale );\n\n\t\t\t\tif ( scope.space === \"local\" ) {\n\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n\t\t\t\t\tif ( scope.axis.search( \"X\" ) === - 1 ) point.x = 0;\n\t\t\t\t\tif ( scope.axis.search( \"Y\" ) === - 1 ) point.y = 0;\n\t\t\t\t\tif ( scope.axis.search( \"Z\" ) === - 1 ) point.z = 0;\n\n\t\t\t\t\tpoint.applyMatrix4( oldRotationMatrix );\n\n\t\t\t\t\tscope.object.position.copy( oldPosition );\n\t\t\t\t\tscope.object.position.add( point );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.space === \"world\" || scope.axis.search( \"XYZ\" ) !== - 1 ) {\n\n\t\t\t\t\tif ( scope.axis.search( \"X\" ) === - 1 ) point.x = 0;\n\t\t\t\t\tif ( scope.axis.search( \"Y\" ) === - 1 ) point.y = 0;\n\t\t\t\t\tif ( scope.axis.search( \"Z\" ) === - 1 ) point.z = 0;\n\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( parentRotationMatrix ) );\n\n\t\t\t\t\tscope.object.position.copy( oldPosition );\n\t\t\t\t\tscope.object.position.add( point );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.translationSnap !== null ) {\n\n\t\t\t\t\tif ( scope.space === \"local\" ) {\n\n\t\t\t\t\t\tscope.object.position.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scope.axis.search( \"X\" ) !== - 1 ) scope.object.position.x = Math.round( scope.object.position.x / scope.translationSnap ) * scope.translationSnap;\n\t\t\t\t\tif ( scope.axis.search( \"Y\" ) !== - 1 ) scope.object.position.y = Math.round( scope.object.position.y / scope.translationSnap ) * scope.translationSnap;\n\t\t\t\t\tif ( scope.axis.search( \"Z\" ) !== - 1 ) scope.object.position.z = Math.round( scope.object.position.z / scope.translationSnap ) * scope.translationSnap;\n\n\t\t\t\t\tif ( scope.space === \"local\" ) {\n\n\t\t\t\t\t\tscope.object.position.applyMatrix4( worldRotationMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( _mode === \"scale\" ) {\n\n\t\t\t\tpoint.sub( offset );\n\t\t\t\tpoint.multiply( parentScale );\n\n\t\t\t\tif ( scope.space === \"local\" ) {\n\n\t\t\t\t\tif ( scope.axis === \"XYZ\" ) {\n\n\t\t\t\t\t\tscale = 1 + ( ( point.y ) / Math.max( oldScale.x, oldScale.y, oldScale.z ) );\n\n\t\t\t\t\t\tscope.object.scale.x = oldScale.x * scale;\n\t\t\t\t\t\tscope.object.scale.y = oldScale.y * scale;\n\t\t\t\t\t\tscope.object.scale.z = oldScale.z * scale;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n\t\t\t\t\t\tif ( scope.axis === \"X\" ) scope.object.scale.x = oldScale.x * ( 1 + point.x / oldScale.x );\n\t\t\t\t\t\tif ( scope.axis === \"Y\" ) scope.object.scale.y = oldScale.y * ( 1 + point.y / oldScale.y );\n\t\t\t\t\t\tif ( scope.axis === \"Z\" ) scope.object.scale.z = oldScale.z * ( 1 + point.z / oldScale.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( _mode === \"rotate\" ) {\n\n\t\t\t\tpoint.sub( worldPosition );\n\t\t\t\tpoint.multiply( parentScale );\n\t\t\t\ttempVector.copy( offset ).sub( worldPosition );\n\t\t\t\ttempVector.multiply( parentScale );\n\n\t\t\t\tif ( scope.axis === \"E\" ) {\n\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\n\t\t\t\t\ttempVector.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\n\n\t\t\t\t\trotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\n\t\t\t\t\toffsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\n\n\t\t\t\t\ttempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\n\n\t\t\t\t\tquaternionE.setFromAxisAngle( eye, rotation.z - offsetRotation.z );\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\n\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionE );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\n\n\t\t\t\t\tscope.object.quaternion.copy( tempQuaternion );\n\n\t\t\t\t} else if ( scope.axis === \"XYZE\" ) {\n\n\t\t\t\t\tquaternionE.setFromEuler( point.clone().cross( tempVector ).normalize() ); // rotation axis\n\n\t\t\t\t\ttempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\n\t\t\t\t\tquaternionX.setFromAxisAngle( quaternionE, - point.clone().angleTo( tempVector ) );\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\n\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\n\n\t\t\t\t\tscope.object.quaternion.copy( tempQuaternion );\n\n\t\t\t\t} else if ( scope.space === \"local\" ) {\n\n\t\t\t\t\tpoint.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n\t\t\t\t\ttempVector.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\n\n\t\t\t\t\trotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\n\t\t\t\t\toffsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\n\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( oldRotationMatrix );\n\n\t\t\t\t\tif ( scope.rotationSnap !== null ) {\n\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, Math.round( ( rotation.x - offsetRotation.x ) / scope.rotationSnap ) * scope.rotationSnap );\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, Math.round( ( rotation.y - offsetRotation.y ) / scope.rotationSnap ) * scope.rotationSnap );\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, Math.round( ( rotation.z - offsetRotation.z ) / scope.rotationSnap ) * scope.rotationSnap );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, rotation.x - offsetRotation.x );\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, rotation.y - offsetRotation.y );\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, rotation.z - offsetRotation.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scope.axis === \"X\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionX );\n\t\t\t\t\tif ( scope.axis === \"Y\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionY );\n\t\t\t\t\tif ( scope.axis === \"Z\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionZ );\n\n\t\t\t\t\tscope.object.quaternion.copy( quaternionXYZ );\n\n\t\t\t\t} else if ( scope.space === \"world\" ) {\n\n\t\t\t\t\trotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\n\t\t\t\t\toffsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\n\n\t\t\t\t\ttempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\n\n\t\t\t\t\tif ( scope.rotationSnap !== null ) {\n\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, Math.round( ( rotation.x - offsetRotation.x ) / scope.rotationSnap ) * scope.rotationSnap );\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, Math.round( ( rotation.y - offsetRotation.y ) / scope.rotationSnap ) * scope.rotationSnap );\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, Math.round( ( rotation.z - offsetRotation.z ) / scope.rotationSnap ) * scope.rotationSnap );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tquaternionX.setFromAxisAngle( unitX, rotation.x - offsetRotation.x );\n\t\t\t\t\t\tquaternionY.setFromAxisAngle( unitY, rotation.y - offsetRotation.y );\n\t\t\t\t\t\tquaternionZ.setFromAxisAngle( unitZ, rotation.z - offsetRotation.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tquaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\n\n\t\t\t\t\tif ( scope.axis === \"X\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\n\t\t\t\t\tif ( scope.axis === \"Y\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\n\t\t\t\t\tif ( scope.axis === \"Z\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\n\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\n\n\t\t\t\t\tscope.object.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.update();\n\t\t\tscope.dispatchEvent( changeEvent );\n\t\t\tscope.dispatchEvent( objectChangeEvent );\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tevent.preventDefault(); // Prevent MouseEvent on mobile\n\n\t\t\tif ( event.button !== undefined && event.button !== 0 ) return;\n\n\t\t\tif ( _dragging && ( scope.axis !== null ) ) {\n\n\t\t\t\tmouseUpEvent.mode = _mode;\n\t\t\t\tscope.dispatchEvent( mouseUpEvent );\n\n\t\t\t}\n\n\t\t\t_dragging = false;\n\n\t\t\tif ( 'TouchEvent' in window && event instanceof TouchEvent ) {\n\n\t\t\t\t// Force \"rollover\"\n\n\t\t\t\tscope.axis = null;\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t} else {\n\n\t\t\t\tonPointerHover( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction intersectObjects( pointer, objects ) {\n\n\t\t\tvar rect = domElement.getBoundingClientRect();\n\t\t\tvar x = ( pointer.clientX - rect.left ) / rect.width;\n\t\t\tvar y = ( pointer.clientY - rect.top ) / rect.height;\n\n\t\t\tpointerVector.set( ( x * 2 ) - 1, - ( y * 2 ) + 1 );\n\t\t\tray.setFromCamera( pointerVector, scope.camera );\n\n\t\t\tvar intersections = ray.intersectObjects( objects, true );\n\t\t\treturn intersections[ 0 ] ? intersections[ 0 ] : false;\n\n\t\t}\n\n\t};\n\n\tTHREE.TransformControls.prototype = Object.create( THREE.Object3D.prototype );\n\tTHREE.TransformControls.prototype.constructor = THREE.TransformControls;\n\n}() );\n\n\n\n// WEBPACK FOOTER //\n// ./src/min-dependencies/lib/three/controls/TransformControls.js","import Dimensions from \"../../components/box/Dimensions\";\nimport RuntimeTester from \"../../debug/RuntimeTester\";\n\nconst type = 'Volume';\nconst _box3 = Symbol('box3');\n\nclass Volume {\n    constructor(){\n        /**\n         * @type {THREE.Vector3}\n         */\n        this.position = new THREE.Vector3();\n\n        /**\n         * @type {Dimensions}\n         */\n        this.dimensions = new Dimensions();\n\n        this[_box3] = new THREE.Box3();\n    }\n\n    /** @returns {THREE.Box3} */\n    get box3(){\n        /** @type {THREE.Box3} */\n        let b = this[_box3];\n        b.setFromCenterAndSize(this.position, this.dimensions.vec3);\n        return b;\n    }\n\n    toJSON(){\n        return {\n            type: type,\n            position: this.position,\n            dimensions: this.dimensions\n        };\n    }\n\n    ToString(){\n        return this.dimensions.ToString();\n    }\n\n    static FromJSON(data, volume){\n        if( ! volume ) {\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\n\n            volume = new Volume();\n        }\n\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\n\n        RuntimeTester.Test('Dimensions.FromJSON', () => {\n            return Dimensions.Assert(volume.dimensions);\n        }, true);\n\n        return volume;\n    }\n}\n\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","/** @author chadiik <http://chadiik.com/> */\n\nimport { epsilon, smallValue, smallValueSqrt } from \"./core/Math2D\";\nimport Region from \"./core/Region\";\nimport RegionsTree from \"./core/RegionsTree\";\nimport { Container, Item } from \"./core/Components\";\nimport { PackedItem, PackedContainer } from \"./core/PackedComponents\";\nimport Heuristic from \"./heuristics/Heuristic\";\nimport { debugLog, sleep } from './CUBDebug';\nimport HeuRegular from \"./heuristics/HeuRegular\";\nimport HeuParametric1 from \"./heuristics/HeuParametric1\";\n\nconst heuristics = {\n    HeuRegular: HeuRegular,\n    HeuParametric1: HeuParametric1\n};\n\nvar tempRegion = new Region();\n\nclass CUB{\n    /**\n     * @param {Container} container \n     */\n    constructor(container){\n        \n        this.container = container;\n        this.packedContainer = new PackedContainer(container);\n\n        let firstRegion = new Region(0, 0, 0, container.width, container.height, container.length, 0);\n            firstRegion.SetWeights(0, container.weightCapacity, 0);\n        this.regionsTree = new RegionsTree(firstRegion);\n    }\n\n    /** @param {PackedItem} packedItem @param {Boolean} [harsh] default = false */\n    ProcessRegionsPerPackedItem(packedItem, harsh){\n        let regions = this.regionsTree.regions;\n        let itemVolume = packedItem.ref.volume;\n        \n        // Creates temporary region for following calculations\n        let packedRegion = tempRegion.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\n        packedRegion.SetWeights(packedItem.ref.weight, 0, packedItem.ref.stackingCapacity);\n\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\n            let region = regions[iRegion];\n\n            if(itemVolume > region.volume && packedRegion.ContainsRegion(smallValue, region)){\n                regions.splice(iRegion, 1);\n                iRegion--;\n                console.log('Contained region' + iRegion + ' deleted');\n                continue;\n            }\n\n            if(packedRegion.Intersects(-smallValue, region)){\n\n                if(harsh){\n                    console.log('\\tIntersecting region' + iRegion + ' deleted (!)');\n                    regions.slice(iRegion, 1);\n                    iRegion--;\n                    continue;\n                }\n                \n                let regionRemains = this.regionsTree.Occupy(region, packedRegion);\n                iRegion --;\n            }\n        }\n    }\n\n    ProcessRegionsForPackedItems(harsh){\n        let packedItems = this.packedContainer.packedItems;\n        let numPackedItems = packedItems.length;\n\n        for(let iItem = 0; iItem < numPackedItems; iItem++){\n            let packedItem = packedItems[iItem];\n            this.ProcessRegionsPerPackedItem(packedItem, harsh);\n        }\n    }\n\n    ProcessRegions(){\n\n        let containerWidth = this.container.width,\n            containerHeight = this.container.height;\n\n        // Recalculate preferred insertion side per region (left or right)\n        this.regionsTree.ProcessRegionsPreferredX(containerWidth);\n\n        // Merge and expand free regions (can span several packed item tops)\n        this.regionsTree.ProcessRegionsMergeExpand(containerWidth, containerHeight);\n\n        // Removes regions that are completely enclosed in packed volumes, and correct any intersecting ones\n        this.ProcessRegionsForPackedItems(false);\n\n        // Removes unuseable regions\n        this.regionsTree.ProcessRegionsForZeroRegions();\n\n        // Removes regions that are completely enclosed in larger regions\n        this.regionsTree.ProcessRegionsEnclosed();\n\n        // Recalculate preferred insertion side per region (left or right)\n        this.regionsTree.ProcessRegionsPreferredX(containerWidth);\n\n        // Sort by z (first) and volume (second)\n        this.regionsTree.Sort(Region.SortDeepestSmallest);\n    }\n\n    /** @param {Item} item @param {Heuristic} heuristic */\n    FitUsingHeuristic(item, heuristic){\n                \n        let result = heuristic.Fit(item);\n\n        if(result){\n            let placement = result.packedRegion;\n            placement.SetWeights(item.weight, 0, item.stackingCapacity);\n\n            // Create a new packed item\n            let packedItem = new PackedItem(item, placement.x, placement.y, placement.z, placement.width, placement.height, placement.length, result.orientation);\n\n            // Reserve the tested sub region: regionFitTest from the containing region: region\n            let regionRemains = this.regionsTree.Occupy(result.containingRegion, placement);\n\n            return packedItem;\n        }\n\n        return false;\n    }\n\n    /** @param {Heuristic} heuristic @param {Heuristic} fallback */\n    async Solve(heuristic, fallback){\n        let scope = this;\n        let packedContainer = this.packedContainer;\n\n        let log = { successful: 0, failed: 0, heuristic: 0, fallback: 0 };\n\n        // Helper function\n        /** @param {Item} item @param {Heuristic} workingHeuristic @param {Boolean} final */\n        function unpackItem(item, workingHeuristic, final){\n            if(final) packedContainer.Unpack(item);\n            workingHeuristic.Unpack(item);\n\n            if(final) log.failed++;\n        }\n\n        // Helper function\n        /** @param {PackedItem} packedItem @param {Heuristic} workingHeuristic */\n        function packItem(packedItem, workingHeuristic){\n            packedContainer.Pack(packedItem);\n            packedItem.ref.quantity--;\n\n            if(workingHeuristic === heuristic) log.heuristic++;\n            else log.fallback++;\n\n            log.successful++;\n        }\n\n        let nextItem;\n\n        /** @param {Heuristic} workingHeuristic @param {Boolean} final */\n        async function fitWith(workingHeuristic, final){\n            while( nextItem = await workingHeuristic.NextItem() ){\n\n                scope.ProcessRegions();\n                packedContainer.packedItems.sort(PackedItem.Sort);\n    \n                // Try to pack item\n                let packedItem = scope.FitUsingHeuristic(nextItem, workingHeuristic);\n    \n                if( packedItem === false ){\n                    unpackItem(nextItem, workingHeuristic, final);\n                }\n                else{\n                    packItem(packedItem, workingHeuristic);\n                }\n    \n                /**/await sleep(30);\n            }\n        }\n\n        await fitWith(heuristic, false);\n        if(fallback){\n            await fitWith(fallback, true);\n        }\n\n        console.log('Solved:', log);\n\n        return packedContainer;\n    }\n\n    /** @param {Heuristic} heuristic @param {Heuristic} fallback */\n    async Solve1(heuristic, fallback){\n        let packedContainer = this.packedContainer;\n\n        // Helper function\n        /** @param {Item} item */\n        function unpackItem(item){\n            packedContainer.Unpack(item);\n            heuristic.Unpack(item);\n            \n            if(fallback) fallback.Unpack(item);\n        }\n\n        // Helper function\n        /** @param {PackedItem} packedItem */\n        function packItem(packedItem){\n            packedContainer.Pack(packedItem);\n            packedItem.ref.quantity--;\n        }\n\n        let log = { successful: 0, failed: 0, heuristic: 0, fallback: 0 };\n\n        let nextItem;\n        while( nextItem = await heuristic.NextItem() ){\n\n            this.ProcessRegions();\n            packedContainer.packedItems.sort(PackedItem.Sort);\n\n            // Try to pack item\n            let packedItem = this.FitUsingHeuristic(nextItem, heuristic);\n            if( packedItem ){\n                log.heuristic++;\n            }\n            else if( fallback ){\n                // Fallback if failed\n                // nextItem = await fallback.NextItem();\n                packedItem = this.FitUsingHeuristic(nextItem, fallback);\n\n                log.fallback++;\n            }\n\n            if( packedItem === false ){\n\n                unpackItem(nextItem);\n                log.failed++;\n            }\n            else{\n\n                packItem(packedItem);\n                log.successful++;\n            }\n\n            /**/await sleep(200);\n        }\n\n        console.log('Solved:', log);\n\n        return packedContainer;\n    }\n\n}\n\n/**\n * \n * @param {Container} container \n * @param {Array<Item>} items\n * @param {Heuristic} heuristic\n */\nasync function pack(container, items, heuristic){\n    let cub = new CUB(container);\n\n    heuristic.workingSet.SetItems(items);\n    heuristic.workingSet.SetPackedContainer(cub.packedContainer);\n    heuristic.workingSet.SetRegionsTree(cub.regionsTree);\n\n    let fallback = new HeuRegular();\n        fallback.workingSet.SetItems(items);\n        fallback.workingSet.SetPackedContainer(cub.packedContainer);\n        fallback.workingSet.SetRegionsTree(cub.regionsTree);\n\n    let result = await cub.Solve(heuristic, fallback);\n    \n    return result;\n}\n\nexport {\n    Item,\n    Container,\n    pack,\n    heuristics\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/CUB.js","import Item from \"./components/Item\";\nimport Container from \"./components/Container\";\n\n\n/**\n * @param {Array<Object>} objects \n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\n */\nfunction toItems(objects, m){\n    var items = [];\n    objects.forEach(o => {\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\n    });\n    return items;\n}\n\nclass TestData{\n    /**\n     * @param {Container} container \n     * @param {Array<Item>} items \n     */\n    constructor(container, items){\n        this.container = container;\n        this.items = items;\n    }\n}\n\nclass AFitTest{\n\n    static GenerateDataSample1(){\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\n        var itemsData = [\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\n        ];\n\n        var container = Object.assign(new Container(), containerData);\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\n\n        var data = new TestData(container, items);\n        return data;\n    }\n\n    static GenerateDataSample2(){\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\n        var itemsData = [\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\n        ];\n\n        var container = Object.assign(new Container(), containerData);\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\n\n        var data = new TestData(container, items);\n        return data;\n    }\n\n    static GenerateDataSampleFlatdeck(){\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\n        var itemsData = [\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\n        ];\n\n        var container = Object.assign(new Container(), containerData);\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\n\n        var data = new TestData(container, items);\n        return data;\n    }\n\n    static GenerateDataSampleFlatdeck2(){\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102, WeightCapacity: 48000 };\n        var itemsData = [\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7, StackingCapacity: 0 },\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 28, Height: 30, Quantity: 4 },\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 23, Height: 34, Quantity: 20 },\n            { ID: 1005, Name: 'Item6', Length: 45,  Width: 20, Height: 30, Quantity: 30 },\n            { ID: 1005, Name: 'Item6', Length: 35,  Width: 22, Height: 18, Quantity: 27 }\n        ];\n\n        var container = Object.assign(new Container(), containerData);\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\n\n        var data = new TestData(container, items);\n        return data;\n    }\n}\n\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js","\nfunction almost(n1, n2){\n    return Math.abs(n1 - n2) < .01;\n}\n\nclass Item{\n    /**\n     * @param {Object} id \n     * @param {Number} dim1 \n     * @param {Number} dim2 \n     * @param {Number} dim3 \n     * @param {Number} quantity \n     */\n    constructor(id, dim1, dim2, dim3, quantity){\n        this.ID = id;\n        this.IsPacked = false;\n        this.Dim1 = dim2;\n        this.Dim2 = dim1;\n        this.Dim3 = dim3;\n        this.CoordX = 0;\n        this.CoordY = 0;\n        this.CoordZ = 0;\n        this.Quantity = quantity;\n        this.PackDimX = 0;\n        this.PackDimY = 0;\n        this.PackDimZ = 0;\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\n    }\n\n    /** \n     * @param {Item} item\n     * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\n     */\n    static ResolveOrientation(item){\n        var w = item.Dim1, l = item.Dim2, h = item.Dim3;\n\n        if(almost(item.PackDimX, w)){ // x\n            if(almost(item.PackDimY, h)){ // y\n                return 'xyz';\n            }\n            else if(almost(item.PackDimY, l)){ // z\n                return 'xzy';\n            }\n        }\n        else if(almost(item.PackDimX, h)){ // y\n            if(almost(item.PackDimY, w)){ // x\n                return 'yxz';\n            }\n            else if(almost(item.PackDimY, l)){ // z\n                return 'yzx';\n            }\n        }\n        else if(almost(item.PackDimX, l)){ // z\n            if(almost(item.PackDimY, w)){ // x\n                return 'zxy';\n            }\n            else if(almost(item.PackDimY, h)){ // y\n                return 'zyx';\n            }\n        }\n\n        return 'xyz';\n    }\n}\n\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","\nclass Container{\n    /**\n     * @param {Object} id \n     * @param {Number} width \n     * @param {Number} length \n     * @param {Number} height \n     */\n    constructor(id, width, length, height){\n        this.ID = id;\n\n        this.Width = length || 0;\n        this.Length = width || 0;\n        this.Height = height || 0;\n    }\n}\n\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","import { epsilon, smallValue, smallValueSqrt } from \"../core/Math2D\";\nimport Heuristic from \"./Heuristic\";\nimport { Item } from \"../core/Components\";\nimport Region from \"../core/Region\";\n\nclass HeuRegularParams extends Heuristic.Params{\n    constructor(){ super(); }\n}\n\nvar tempRegion = new Region();\n\nclass HeuRegularSet extends Heuristic.WorkingSet{\n    constructor(...args){\n        super(...args);\n    }\n\n    /** @param {Array<Item>} items */\n    SetItems(items){\n        super.SetItems(items);\n        \n        this.items.sort(Item.VolumeSort);\n    }\n\n    /** @param {Region} region */\n    FitFunction(region){\n        let item = this.workingItem;\n        let validOrientations = item.validOrientations;\n        for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\n            let orientation = validOrientations[iOrient];\n\n            let dimensions = item.GetOrientedDimensions(orientation);\n\n            // Fit test (success: Region, failure: false)\n            let regionFitTest = region.FitTest(smallValue, \n                dimensions[0], dimensions[1], dimensions[2],\n                item.weight, item.grounded,\n                tempRegion);\n            if(regionFitTest !== false){\n\n                let result = new Heuristic.Result(region, regionFitTest, orientation);\n                return result;\n            }\n        }\n\n        return false;\n    }\n}\n\nclass HeuRegular extends Heuristic{\n    constructor(){\n\n        let params = undefined;\n        super(params, HeuRegularSet);\n\n        /** @type {HeuRegularSet} */\n        this.workingSet;\n    }\n\n    /** @param {Item} item */\n    Fit(item){\n        let result = false;\n        let validItem = this.workingSet.SetWorkingItem(item);\n\n        if(validItem){\n            result = this.workingSet.Fit();\n        }\n\n        return result;\n    }\n\n}\n\nHeuRegular.Params = HeuRegularParams;\nHeuRegular.WorkingSet = HeuRegularSet;\n\nexport default HeuRegular;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/heuristics/HeuRegular.js","import { epsilon, smallValue, smallValueSqrt } from \"../core/Math2D\";\nimport Heuristic from \"./Heuristic\";\nimport { Item } from \"../core/Components\";\nimport Region from \"../core/Region\";\n\nclass ScoringParams {\n    /** Scoring weights\n     * @param {Number} minZ score for tightly packing in length (Z)\n     * @param {Number} minWaste score for minimizing wasted space\n     */\n    constructor(minZ, minWaste){\n        this.minZ = minZ;\n        this.minWaste = minWaste;\n    }\n}\n\nclass HeuParametric1Params extends Heuristic.Params{\n    constructor(){\n        super();\n\n        /** Defaults minZ = .9, minWaste = .1 \n         * @type {ScoringParams} */\n        this.scoring = new ScoringParams(.9, .1);\n    }\n}\n\n/** @typedef Score @property {Region} region region index @property {Number} orientation orientation index @property {Number} n score */\n/** @param {Region} region region index @param {Number} orientation orientation index @param {Number} n score */\nfunction scoreConstructor(region, orientation, n){ return { region: region, orientation: orientation, n: n }; }\n\nfunction sortByN(a, b){\n    if(isNaN(a.n) || isNaN(b.n)) return 0;\n\n    if(a.n < b.n) return -1;\n    if(a.n > b.n) return 1;\n    return 0;\n}\n\nconst minRegionAxis = smallValue;\n\nvar tempRegion = new Region();\n\n/** @type {Array<Score>} */\nvar orientationScoreTable = [];\n\nclass HeuParametric1Set extends Heuristic.WorkingSet{\n    constructor(...args){\n        super(...args);\n\n        /** @type {HeuParametric1Params} */\n        this.params;\n    }\n\n    /** @param {Array<Item>} items */\n    SetItems(items){\n        super.SetItems(items);\n        \n        this.items.sort(Item.VolumeSort);\n\n        this.minDimensions = Item.GetMinDimensions(this.items);\n        this.minDimensionsNoWasteFactor = [1, 1, 1];\n\n        /** @type {Array<Score>} */\n        this.regionScoreTable = [];\n    }\n\n    /**\n     * @param {Region} fit \n     * @param {Array<Region>} newRegions \n     */\n    RateFit(fit, newRegions){\n        \n        // Try out a recursive deep rate fit\n        let containerLength = this.packedContainer.container.length;\n        let minDimensions = this.minDimensions;\n        let minDimensionsNoWasteFactor = this.minDimensionsNoWasteFactor;\n        let minZScore = 1 - (fit.z + fit.length) / containerLength; // 0-1\n\n        // new regions usability score\n        let minWasteScore = 1; // have completely filled the region if newRegions.length === 0\n        if(newRegions.length > 0){\n            minWasteScore = 0;\n            for(let iRegion = 0; iRegion < newRegions.length; iRegion++){\n                let region = newRegions[iRegion];\n                \n                let scoreW = 0, scoreH = 0, scoreL = 0;\n                if(region.width >= minDimensions[0] && (region.width - minDimensions[0]) < minDimensions[0] * minDimensionsNoWasteFactor[0]) scoreW += 1;\n                if(region.height >= minDimensions[1] && (region.width - minDimensions[1]) < minDimensions[1] * minDimensionsNoWasteFactor[1]) scoreH += 1;\n                if(region.length >= minDimensions[2] && (region.width - minDimensions[2]) < minDimensions[2] * minDimensionsNoWasteFactor[2]) scoreL += 1;\n                \n                minWasteScore += scoreW * .5 + scoreH * .3 + scoreL * .2;\n            }\n            minWasteScore /= newRegions.length;\n        }\n\n        let minZWeight = this.params.scoring.minZ;\n        let minWasteWeight = this.params.scoring.minWaste;\n        let score = minZScore * minZWeight + minWasteScore * minWasteWeight;\n        return score;\n    }\n\n    /** @param {Region} region */\n    FitFunction(region){\n\n        let regionScoreTable = this.regionScoreTable;\n\n        let item = this.workingItem;\n        let validOrientations = item.validOrientations;\n        \n        if(region.volume > item.volume){\n            let dummyRegion = tempRegion.Copy(region);\n\n            orientationScoreTable.length = 0;\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\n                let orientation = validOrientations[iOrient];\n\n                let dimensions = item.GetOrientedDimensions(orientation);\n                let regionFitTest = region.FitTest(smallValue, \n                    dimensions[0], dimensions[1], dimensions[2], \n                    item.weight, item.grounded);\n                \n                if(regionFitTest !== false){\n\n                    // Subtracts fit from region and calculates new bounding regions\n                    let newRegions = dummyRegion.Subtract(regionFitTest, minRegionAxis);\n                    if(newRegions === undefined) newRegions = [];\n                    if(dummyRegion.length > minRegionAxis)\n                        newRegions.push(dummyRegion);\n\n                    let score = this.RateFit(regionFitTest, newRegions)\n                    let orientationScore = scoreConstructor(region, orientation, score);\n                    orientationScoreTable.push(orientationScore);\n                }\n            }\n\n            if(orientationScoreTable.length > 0){\n                orientationScoreTable.sort(sortByN);\n                let regionScore = orientationScoreTable.pop();\n                regionScoreTable.push(regionScore);\n            }\n        }\n\n        return false;\n    }\n\n    /** @returns {Heuristic.Result} */\n    Fit(){\n        \n        this.regionsTree.Find(this.FitFunction, this);\n\n        if(this.regionScoreTable.length > 0){\n\n            this.regionScoreTable.sort(sortByN);\n            let highestScore = this.regionScoreTable.pop();\n\n            let containingRegion = highestScore.region,\n                orientation = this.workingItem.validOrientations[highestScore.orientation];\n            let dimensions = this.workingItem.GetOrientedDimensions(orientation);\n\n            // Fit test (success: Region, failure: false)\n            let regionFitTest = containingRegion.FitTest(smallValue, \n                dimensions[0], dimensions[1], dimensions[2],\n                this.workingItem.weight, this.workingItem.grounded);\n            \n            if(regionFitTest !== false){\n        \n                let result = new Heuristic.Result(containingRegion, regionFitTest, orientation);\n                return result;\n            }\n        }\n\n        return false;\n    }\n}\n\nclass HeuParametric1 extends Heuristic{\n    /** @param {HeuParametric1Params} params */\n    constructor(params){\n\n        super(params || (new HeuParametric1Params()), HeuParametric1Set);\n\n        /** @type {HeuParametric1Set} */\n        this.workingSet;\n    }\n\n    /** @param {Item} item */\n    Fit(item){\n        let result = false;\n        let validItem = this.workingSet.SetWorkingItem(item);\n\n        if(validItem){\n            result = this.workingSet.Fit();\n        }\n\n        return result;\n    }\n\n}\n\nHeuParametric1.Params = HeuParametric1Params;\nHeuParametric1.WorkingSet = HeuParametric1Set;\n\nexport default HeuParametric1;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cubX/heuristics/HeuParametric1.js","import CargoListView from \"./CargoListView\";\nimport Packer from \"../packer/Packer\";\nimport CargoList from \"../packer/CargoList\";\nimport PackingSpaceView from \"./PackingSpaceView\";\nimport PackingSpace from \"../packer/PackingSpace\";\nimport SceneSetup from \"../view/SceneSetup\";\nimport Utils from \"../utils/cik/Utils\";\nimport PackResultView from \"./PackResultView\";\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\nimport Container from \"../packer/container/Container\";\nimport BoxEntry from \"../components/box/BoxEntry\";\nimport DomUI from \"./dom/DomUI\";\nimport OrthoviewsNavigator from \"./OrthoviewsNavigator\";\nimport Camera from \"../scene/Camera\";\n\n/**\n * @typedef {Object} ViewParams\n * @property {import('../UX').default} ux\n * @property {Number} transitionDuration\n * @property {Object} cargoListView\n * @property {Number} cargoListView.paddingZ\n * @property {Number} cargoListView.paddingY\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\n * @property {Object} packResultView\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\n */\n\n /** @type {ViewParams} */\nconst defaultParams = {\n    ux: undefined,\n    transitionDuration: 1.5,\n    cargoListView: {\n        paddingZ: 120,\n        paddingY: 40,\n        params: {}\n    },\n    packResultView: {\n        params: {\n            animationDuration: 1\n        }\n    }\n};\n\nvar tempBox3 = new THREE.Box3();\nvar tempVec = new THREE.Vector3();\n\nclass View {\n    /**\n     * Constructor\n     * @param {Packer} packer \n     * @param {DomUI} domUI; \n     * @param {SceneSetup} sceneSetup \n     * @param {ViewParams} params \n     */\n    constructor(packer, sceneSetup, domUI, params){\n\n        this.sceneSetup = sceneSetup;\n        this.params = Utils.AssignUndefined(params, defaultParams);\n\n        this.domUI = domUI;\n        this.domUI.CreateOrthoViewsIcons();\n        this.domUI.On(DomUI.signals.orthoViewSelected, this.OnOrthoViewSelected.bind(this));\n\n        var scope = this;\n        var units = this.params.ux.params.units;\n\n        // Fill lights\n        if(true){\n            let lights = this.sceneSetup.DefaultLights(this.sceneSetup.sceneController, true, true);\n\n            let dl = lights.filter(light => light instanceof THREE.DirectionalLight)[0];\n            let dlData = {\"color\":\"0xfceeee\",\"intensity\":1,\"castShadow\":true,\"shadow.bias\":0.00001,\"shadow.radius\":4,\"shadow.mapSize.x\":4096,\"shadow.mapSize.y\":4096,\"shadow.camera.left\":-400,\"shadow.camera.top\":300,\"shadow.camera.right\":400,\"shadow.camera.bottom\":-300,\"shadow.camera.near\":20,\"shadow.camera.far\":800};\n            let Config = require('../utils/cik/config/Config').default;\n            Config.Load(dl, dlData);\n\n            if(this.sceneSetup.ux.params.hud){\n                this.sceneSetup.DefaultLights(this.sceneSetup.hud);\n            }\n\n            let dlComp = lights.filter(light => light instanceof THREE.DirectionalLight)[1];\n            dlComp.castShadow = true;\n        }\n\n        let orthoviewsNavParams = {ux: this.params.ux};\n        this.orthoviewsNavigator = new OrthoviewsNavigator(this.sceneSetup.cameraController, orthoviewsNavParams);\n\n        // Packing space\n        this.packingSpaceView = new PackingSpaceView();\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\n        /** @param {Container} container */\n        function onContainerAdded(container){\n            scope.packingSpaceView.Add(container);\n\n            tempBox3.setFromObject(scope.packingSpaceView.view);\n            tempBox3.getSize(tempVec);\n\n            /** @type {THREE.Box3} */\n            let box3 = container.combinedVolume.box3;\n            scope.sceneSetup.cameraController.TransitionToFrame(scope.params.transitionDuration, tempBox3);\n\n            let containerSize = Math.max(tempVec.x, tempVec.y, tempVec.z);\n            scope.cargoListView.view.position.z = containerSize / 2 + scope.params.cargoListView.paddingZ * units;\n            scope.cargoListView.view.position.y = scope.params.cargoListView.paddingY * units;\n        }\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\n\n        // Cargo list\n        this.params.cargoListView.params.ux = this.params.ux;\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\n\n        this.sceneSetup.input.AddRaycastGroup('OnClick', 'cargoListView', this.cargoListView.raycastGroup);\n\n        this.sceneSetup.sceneController.AddDefault(this.cargoListView.view);\n\n        function onCargoListViewChanged(){\n            tempBox3.setFromObject(scope.cargoListView.view);\n            tempBox3.getCenter(tempVec);\n            let listViewCenterX = tempVec.x;\n            scope.cargoListView.view.getWorldPosition(tempVec);\n            let offsetX = listViewCenterX - tempVec.x;\n\n            /** @type {THREE.Box3} */\n            let box3 = tempBox3;\n            scope.sceneSetup.cameraController.TransitionToFrame(scope.params.transitionDuration, box3, .7);\n\n            tempBox3.setFromObject(scope.packingSpaceView.view);\n            tempBox3.getCenter(tempVec);\n            let centerX = tempVec.x;\n\n            scope.cargoListView.view.position.x = centerX - offsetX;\n        }\n        function onCargoGroupAdded(group){\n            scope.cargoListView.Add(group);\n            onCargoListViewChanged();\n        }\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\n        function onCargoGroupRemoved(group){\n            scope.cargoListView.Remove(group);\n            onCargoListViewChanged();\n        }\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoGroupRemoved);\n        function onCargoGroupModified(group){\n            scope.cargoListView.UpdateGroup(group);\n            onCargoListViewChanged();\n        }\n        packer.cargoList.On(CargoList.signals.groupModified, onCargoGroupModified);\n\n        // Packing result\n        this.params.packResultView.params.ux = this.params.ux;\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\n\n        /** @param {Packer.PackingResult} packingResult */\n        async function onPackUpdate(packingResult){\n            scope.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.home, false);\n            await scope.packResultView.DisplayPackingResult(packingResult);\n        }\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\n\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\n        this.sceneSetup.input.updateComponents.push(updateComponent);\n\n        this.orthoviewsNavigator.boundingView = this.packingSpaceView.view;\n        this.orthoviewsNavigator.cargoListView = this.cargoListView;\n\n        if(this.params.ux.params.hud){\n            this.HUDSetup();\n        }\n\n        if(this.params.ux.params.configure){\n            this.Configure();\n        }\n    }\n\n    /** @param {Number} now */\n    Update(now){\n        this.packResultView.Update();\n        this.cargoListView.Update();\n    }\n\n    HUDSetup(){\n        var units = this.params.ux.params.units;\n        var input = this.sceneSetup.input;\n        var hud = this.sceneSetup.hud;\n        var scope = this;\n\n\n    }\n\n    ClearPackingResults(){\n        this.packResultView.Clear();\n    }\n\n    /** @param {DomUI.orthoviews} viewType */\n    OnOrthoViewSelected(viewType){\n        switch(viewType){\n            case DomUI.orthoviews.home:     this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.home);     break;\n            case DomUI.orthoviews.top:      this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.top);      break;\n            case DomUI.orthoviews.front:    this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.front);    break;\n            case DomUI.orthoviews.side:     this.orthoviewsNavigator.Navigate(OrthoviewsNavigator.orthoviews.side);     break;\n        }\n    }\n\n    Configure(){\n\n        var Smart = require('../utils/cik/config/Smart').default;\n        var Config = require('../utils/cik/config/Config').default;\n        var Control3D = require('../utils/cik/config/Control3D').default;\n\n        var scope = this;\n        var input = this.sceneSetup.input;\n\n        if(this.params.ux.params.hud){\n            var hudControl3D = Control3D.Request('hud');\n\n            Config.MakeShortcut('Configure', 'Show HUDControl3D', function(){\n                hudControl3D.Toggle(scope.cargoListView.view);\n            });\n        }\n    }\n}\n\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","import CargoBoxView from \"./CargoBoxView\";\nimport BoxEntry from \"../components/box/BoxEntry\";\nimport Asset from \"../components/assets/Asset\";\n\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff, flatShading: true});\n\nconst _wireMaterialSettings = Symbol('wireMatSet');\n\nclass PackedCargoBoxView extends CargoBoxView {\n    /**\n     * @param {BoxEntry} boxEntry \n     */\n    constructor(boxEntry){\n        super(boxEntry);\n\n        var meshMaterial = this.mesh.material;\n        meshMaterial.polygonOffset = true;\n        meshMaterial.polygonOffsetFactor = 2;\n        meshMaterial.polygonOffsetUnits = 1;\n        meshMaterial.transparent = true;\n        meshMaterial.opacity = .5;\n        meshMaterial.blending = THREE.NormalBlending;\n        meshMaterial.depthTest = true;\n        meshMaterial.depthWrite = false;\n\n        this.mesh.castShadow = this.mesh.receiveShadow = true;\n\n        var material = wireframeMaterialTemplate.clone();\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\n        this.wireMesh.renderOrder = Number.MAX_SAFE_INTEGER - 1;\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\n\n        this.view.add(this.wireMesh);\n    }\n\n    /** @returns {BoxEntry} */\n    get entry(){ return super.entry; }\n    set entry(value){\n        super.entry = value;\n        this.scale = value.dimensions.vec3;\n    }\n\n    /** @param {Number} value */\n    set focus(value){\n        super.focus = value;\n\n        if(this[_wireMaterialSettings]) Asset.RestoreMaterial(this.wireMesh.material, this[_wireMaterialSettings]);\n\n        if(Math.abs(1 - value) > .0001){\n            if(this[_wireMaterialSettings] === undefined){\n                this.wireMesh.material = this.wireMesh.material.clone();\n                this[_wireMaterialSettings] = {};\n                Asset.SetMaterialFocus(this.wireMesh.material, value, this[_wireMaterialSettings]);\n            }\n            else{\n                Asset.SetMaterialFocus(this.wireMesh.material, value);\n            }\n        }\n    }\n\n    get focus(){ return super.focus; }\n\n    /**\n     * @param {Number} x \n     * @param {Number} y \n     * @param {Number} z \n     */\n    SetScale(x, y, z){\n        this.mesh.scale.set(x, y, z);\n        this.wireMesh.scale.set(x, y, z);\n    }\n\n    /**\n     * @param {Number} x in radians\n     * @param {Number} y in radians\n     * @param {Number} z in radians\n     */\n    SetRotationAngles(x, y, z){\n        this.mesh.rotation.set(x, y, z);\n        this.wireMesh.rotation.set(x, y, z);\n    }\n\n    /**\n     * @param {CargoBoxView} cargoView \n     */\n    Extend(cargoView){\n        this.entry = cargoView.entry;\n        this.mesh.material.color = cargoView.mesh.material.color;\n    }\n}\n\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import PackResultView from \"../PackResultView\";\nimport Packer from \"../../packer/Packer\";\nimport Pool from \"../../utils/cik/Pool\";\n\nvar tempRange = [];\n\nclass Range{\n    /**\n     * \n     * @param {Array<Number>} args [min,max...] pairs\n     */\n    constructor(...args){\n        /** @type {Array<Number>} */\n        this.min = [];\n        /** @type {Array<Number>} */\n        this.max = [];\n\n        for(let i = 0, halfLength = args.length; i < halfLength; i++){\n            this.min.push(args[i * 2]);\n            this.max.push(args[i * 2 + 1]);\n        }\n    }\n\n    /** @param {Array<Number>} args */\n    Min(...args){\n        this.min.length = 0;\n        this.min.push(...args);\n        return this;\n    }\n\n    /** @param {Array<Number>} args */\n    Max(...args){\n        this.max.length = 0;\n        this.max.push(...args);\n        return this;\n    }\n\n    /** @param {Number} index @returns {Number} */\n    Length(index){\n        return this.max[index] - this.min[index];\n    }\n\n    /** @param {Array<Number>} args */\n    Evaluate(...args){\n        tempRange.length = 0;\n        for(let i = 0; i < args.length; i++){\n            let min = this.min[i],\n                max = this.max[i],\n                v = args[i];\n            let value = v * (max - min) + min;\n            tempRange.push(value);\n        }\n        return tempRange;\n    }\n}\n\nconst range = {\n    frequency: 0,\n    volume: 1\n};\n\nconst _playing = Symbol('playing');\nconst _iid = Symbol('iid');\n\nclass Note{\n    constructor(){\n        this.wave = new Pizzicato.Sound({ \n            source: 'wave', \n            options: {\n                type: 'sine',\n                frequency: 440\n            }\n        });\n\n        this[_playing] = false;\n    }\n\n    /** @param {Number} value */\n    set frequency(value){\n        this.wave.frequency = value;\n    }\n\n    /** @returns {Boolean} */\n    get playing(){ return this[_playing]; }\n\n    Play(duration){\n        this[_playing] = true;\n        this.wave.play();\n        let scope = this;\n        function onNoteComplete(){ scope.Stop(); }\n        this[_iid] = window.setTimeout(onNoteComplete, Math.floor(duration * 1000));\n    }\n\n    Stop(){\n        if(this[_iid] !== undefined) window.clearTimeout(this[_iid]);\n        this[_iid] = undefined;\n\n        this.wave.stop();\n        this[_playing] = false;\n    }\n}\n\n/**\n * @returns {Note}\n */\nfunction poolNewFN(){\n    let note = new Note();\n    return note;\n}\n\n/**\n * @param {Note} object \n * @returns {Note}\n */\nfunction poolResetFN(object){\n    return object;\n}\n\nclass Toner{\n    constructor(){\n\n        this.pool = new Pool(poolNewFN, poolResetFN);\n        \n        this.ranges = new Range(\n            100, 900, // freq\n            0, 1, // volume\n            0.2, 0.8 // duration\n        );\n\n        window.Toner = this;\n    }\n\n    GetNote(){\n        /** @type {Note} */\n        let note = this.pool.Request();\n        return note;\n    }\n\n    RelaseNote(note){\n        this.pool.Return(note);\n    }\n\n    /** @param {Number} x @param {Number} y @param {Number} z */\n    Coords(x, y, z){\n\n        const divs = 6;\n        let divLength = this.ranges.Length(range.frequency) / divs;\n        let values = this.ranges.Evaluate(x, y, z);\n\n        let frequency = Math.floor(values[0]),\n            volume = values[1],\n            duration = values[2];\n\n        let note = this.GetNote();\n        note.frequency = frequency;\n        note.Play(duration);\n\n        let scope = this;\n        function onNoteComplete(){\n            scope.RelaseNote(note);\n        }\n        window.setInterval(onNoteComplete, Math.floor(duration * 1000));\n    }\n}\n\nclass Musipack{\n    /**\n     * \n     * @param {PackResultView} packResultView \n     */\n    constructor(packResultView){\n\n        console.log('Musicpack hooked in!');\n\n        this.toner = new Toner();\n\n        packResultView.Once(PackResultView.signals.packVizStart, function(){\n            packResultView.params.animationDuration = 8;\n        });\n        \n        packResultView.On(PackResultView.signals.cargoVizPack, this.OnItemPacked.bind(this));\n        packResultView.On(PackResultView.signals.cargoVizUnpack, this.OnItemUnpacked.bind(this));\n    }\n\n    /** @param {Packer.PackedCargo} item */\n    OnItemPacked(item){\n        this.EvaluateItem(item);\n    }\n\n    /** @param {Packer.PackedCargo} item */\n    OnItemUnpacked(item){\n        this.EvaluateItem(item);\n    }\n\n    /** @param {Packer.PackedCargo} item */\n    EvaluateItem(item){\n        if(item && item.position){\n            let x = item.position.x,\n                y = item.position.y,\n                z = item.position.z;\n\n            let w = item.containingVolume.dimensions.width,\n                h = item.containingVolume.dimensions.height,\n                l = item.containingVolume.dimensions.length;\n            \n            this.toner.Coords(x / w, y / h, z / l);\n        }\n    }\n}\n\nexport default Musipack;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/Musipack.js","import UX from \"../UX\";\nimport Camera from \"../scene/Camera\";\nimport Utils from \"../utils/cik/Utils\";\nimport CargoListView from \"./CargoListView\";\nimport NaNRecovery from \"../utils/cik/NaNRecovery\";\n\n/** @typedef OrthoviewsNavigatorParams @property {UX} ux @property {Number} transitionDuration */\n/** @type {OrthoviewsNavigatorParams} */\nconst defaultParams = {\n    transitionDuration: 1\n};\n\nconst orthoviews = {\n    home: 'home',\n    top: 'top',\n    front: 'front',\n    side: 'side'\n};\n\nvar tempBox3 = new THREE.Box3(),\n    tempVec3 = new THREE.Vector3(),\n    tempCamOffset = new THREE.Vector3();\n\n/** @type {import('../scene/Camera').FrameCoords} */\nvar tempCoords = {position: new THREE.Vector3(), center: new THREE.Vector3()};\n\nconst _cargoListView = Symbol('cargoListView'),\n    _boundingView = Symbol('boundingView'),\n    _recovery = Symbol('recovery');\n\nclass OrthoviewsNavigator{\n    /** @param {Camera} cameraController @param {OrthoviewsNavigatorParams} params */\n    constructor(cameraController, params){\n        \n        this.params = Utils.AssignUndefined(params, defaultParams);\n        this.cameraController = cameraController;\n\n        this.nanRecovery = new NaNRecovery(this.cameraController, 'position.x', 'position.y', 'position.z', 'rotation.x', 'rotation.y', 'rotation.z', 'camera.fov');\n\n        const Smart = require('../utils/cik/config/Smart').default;\n\n        let scope = this;\n        let smart = new Smart(this.cameraController.camera, 'FOV');\n        smart.MakeShortcut('Configure');\n        function onChange(){\n            scope.cameraController.camera.updateProjectionMatrix();\n        }\n        smart.Config(null, this.cameraController.camera, onChange, Smart.serializeModes.none,\n            'fov'\n        );\n    }\n\n    /** @param {THREE.Object3D} boundingView */\n    set boundingView(value){\n        this[_boundingView] = value;\n    }\n\n    get boundingView(){ return this[_boundingView]; }\n\n    /** @param {CargoListView} value */\n    set cargoListView(value){\n        this[_cargoListView] = value;\n    }\n\n    get cargoListView(){ return this[_cargoListView]; }\n\n    /** @param {orthoviews} viewType @param {Boolean} [changeFOV] true by default */\n    Navigate(viewType, changeFOV){\n\n        let neededRecovery = this.nanRecovery.AssertUpdateRecover();\n        console.log('Navigating to: ' + viewType + (neededRecovery ? ', recovered from NaN.' : '.'));\n\n        const duration = 1;\n\n        var distanceMultiplier = .3;\n        if(changeFOV === undefined) changeFOV = true;\n        var fov = changeFOV ? 8 : this.params.ux.params.fov;\n        var slideDown = true;\n\n        tempBox3.setFromObject(this.boundingView);\n        \n        let orientation = tempCamOffset;\n        switch(viewType){\n            case orthoviews.home:  \n                orientation.set(1, -1, 1);\n                fov = this.params.ux.params.fov;\n                distanceMultiplier = .5;\n                break;\n\n            case orthoviews.top:\n                orientation.set(0.01, -1, 0);\n                distanceMultiplier = .3;\n                break;\n\n            case orthoviews.front:\n                this.cargoListView.SlideUp(tempBox3.max.y + 40 * this.params.ux.params.units, duration);\n                distanceMultiplier = .2;\n                slideDown = false;\n                orientation.set(0, 0, 1);\n                break;\n\n            case orthoviews.side:\n                distanceMultiplier = .3;\n                orientation.set(1, 0, 0);\n                break;\n        }\n\n        if(slideDown) this.cargoListView.SlideDown(duration);\n\n        this.cameraController.TransitionToFOV(duration * 1.5, fov);\n\n        let endCoords = this.cameraController.CalcFrameCoords(tempBox3, distanceMultiplier, orientation, fov);\n        this.cameraController.TransitionFromToCoords(this.params.transitionDuration, undefined, endCoords);\n    }\n\n    static get orthoviews(){\n        return orthoviews;\n    }\n}\n\nexport default OrthoviewsNavigator;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/OrthoviewsNavigator.js","\n/** @param {*} obj @param {string} key */\nfunction getKey(obj, key){\n    return key.split('.').reduce(function(a, b){\n        return a && a[b];\n    }, obj);\n}\n\n/** @param {*} obj @param {string} key */\nfunction setKey(obj, key, val){\n    key = key.split('.');\n    while (key.length > 1) obj = obj[key.shift()];\n    let endKey = key.shift();\n    obj[endKey] = val;\n    return obj[endKey];\n}\n\nconst typeofNumber = 'number';\n\nclass NaNRecovery{\n    /**\n     * Properties that needs to be considered\n     * @param {*} root\n     * @param  {...string} keys \n     */\n    constructor(root, ...keys){\n        this.root = root;\n        /** @type {Map<string, Number>} */\n        this.properties = new Map();\n        this.Watch(...keys);\n    }\n\n    /**\n     * Properties that needs to be considered\n     * @param  {...string} keys \n     */\n    Watch(...keys){\n        if(keys !== undefined && keys.length > 0){\n            keys.forEach(key => {\n                let value = getKey(this.root, key);\n                this.properties.set(key, value);\n            });\n        }\n    }\n\n    /**\n     * Checks the current values, recover any NaN (or typeof != number), otherwise update the stored number\n     */\n    AssertUpdateRecover(){\n        let neededRecovery = false;\n        let keys = this.properties.keys();\n        for(let key of keys){\n            // get the current value\n            let value = getKey(this.root, key);\n            // recover if not a number\n            if(isNaN(value) || (typeof value !== typeofNumber)){\n                neededRecovery = true;\n                value = this.properties.get(key);\n            }\n            // update\n            this.properties.set(key, value);\n            setKey(this.root, key, value);\n        };\n\n        return neededRecovery;\n    }\n}\n\nexport default NaNRecovery;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/NaNRecovery.js"],"sourceRoot":""}